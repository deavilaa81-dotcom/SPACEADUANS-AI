(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function KE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Mh={exports:{}},ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function rR(){if(zv)return ml;zv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(o,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:n,type:o,key:c,ref:r!==void 0?r:null,props:l}}return ml.Fragment=e,ml.jsx=t,ml.jsxs=t,ml}var Yv;function aR(){return Yv||(Yv=1,Mh.exports=rR()),Mh.exports}var R=aR(),Dh={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function lR(){if(Jv)return xe;Jv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function I(F){return F===null||typeof F!="object"?null:(F=S&&F[S]||F["@@iterator"],typeof F=="function"?F:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,O={};function K(F,te,de){this.props=F,this.context=te,this.refs=O,this.updater=de||L}K.prototype.isReactComponent={},K.prototype.setState=function(F,te){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,te,"setState")},K.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function ie(){}ie.prototype=K.prototype;function Z(F,te,de){this.props=F,this.context=te,this.refs=O,this.updater=de||L}var re=Z.prototype=new ie;re.constructor=Z,G(re,K.prototype),re.isPureReactComponent=!0;var ue=Array.isArray;function ce(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function b(F,te,de){var ee=de.ref;return{$$typeof:n,type:F,key:te,ref:ee!==void 0?ee:null,props:de}}function P(F,te){return b(F.type,te,F.props)}function V(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function k(F){var te={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(de){return te[de]})}var M=/\/+/g;function j(F,te){return typeof F=="object"&&F!==null&&F.key!=null?k(""+F.key):te.toString(36)}function Ee(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(ce,ce):(F.status="pending",F.then(function(te){F.status==="pending"&&(F.status="fulfilled",F.value=te)},function(te){F.status==="pending"&&(F.status="rejected",F.reason=te)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function $(F,te,de,ee,he){var Te=typeof F;(Te==="undefined"||Te==="boolean")&&(F=null);var Me=!1;if(F===null)Me=!0;else switch(Te){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(F.$$typeof){case n:case e:Me=!0;break;case _:return Me=F._init,$(Me(F._payload),te,de,ee,he)}}if(Me)return he=he(F),Me=ee===""?"."+j(F,0):ee,ue(he)?(de="",Me!=null&&(de=Me.replace(M,"$&/")+"/"),$(he,te,de,"",function(Qn){return Qn})):he!=null&&(V(he)&&(he=P(he,de+(he.key==null||F&&F.key===he.key?"":(""+he.key).replace(M,"$&/")+"/")+Me)),te.push(he)),1;Me=0;var lt=ee===""?".":ee+":";if(ue(F))for(var We=0;We<F.length;We++)ee=F[We],Te=lt+j(ee,We),Me+=$(ee,te,de,Te,he);else if(We=I(F),typeof We=="function")for(F=We.call(F),We=0;!(ee=F.next()).done;)ee=ee.value,Te=lt+j(ee,We++),Me+=$(ee,te,de,Te,he);else if(Te==="object"){if(typeof F.then=="function")return $(Ee(F),te,de,ee,he);throw te=String(F),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ae(F,te,de){if(F==null)return F;var ee=[],he=0;return $(F,ee,"","",function(Te){return te.call(de,Te,he++)}),ee}function ye(F){if(F._status===-1){var te=F._result;te=te(),te.then(function(de){(F._status===0||F._status===-1)&&(F._status=1,F._result=de)},function(de){(F._status===0||F._status===-1)&&(F._status=2,F._result=de)}),F._status===-1&&(F._status=0,F._result=te)}if(F._status===1)return F._result.default;throw F._result}var De=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Ye={map:ae,forEach:function(F,te,de){ae(F,function(){te.apply(this,arguments)},de)},count:function(F){var te=0;return ae(F,function(){te++}),te},toArray:function(F){return ae(F,function(te){return te})||[]},only:function(F){if(!V(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return xe.Activity=E,xe.Children=Ye,xe.Component=K,xe.Fragment=t,xe.Profiler=r,xe.PureComponent=Z,xe.StrictMode=o,xe.Suspense=y,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,xe.__COMPILER_RUNTIME={__proto__:null,c:function(F){return D.H.useMemoCache(F)}},xe.cache=function(F){return function(){return F.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(F,te,de){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ee=G({},F.props),he=F.key;if(te!=null)for(Te in te.key!==void 0&&(he=""+te.key),te)!N.call(te,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&te.ref===void 0||(ee[Te]=te[Te]);var Te=arguments.length-2;if(Te===1)ee.children=de;else if(1<Te){for(var Me=Array(Te),lt=0;lt<Te;lt++)Me[lt]=arguments[lt+2];ee.children=Me}return b(F.type,he,ee)},xe.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},xe.createElement=function(F,te,de){var ee,he={},Te=null;if(te!=null)for(ee in te.key!==void 0&&(Te=""+te.key),te)N.call(te,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(he[ee]=te[ee]);var Me=arguments.length-2;if(Me===1)he.children=de;else if(1<Me){for(var lt=Array(Me),We=0;We<Me;We++)lt[We]=arguments[We+2];he.children=lt}if(F&&F.defaultProps)for(ee in Me=F.defaultProps,Me)he[ee]===void 0&&(he[ee]=Me[ee]);return b(F,Te,he)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(F){return{$$typeof:d,render:F}},xe.isValidElement=V,xe.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:ye}},xe.memo=function(F,te){return{$$typeof:m,type:F,compare:te===void 0?null:te}},xe.startTransition=function(F){var te=D.T,de={};D.T=de;try{var ee=F(),he=D.S;he!==null&&he(de,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(ce,De)}catch(Te){De(Te)}finally{te!==null&&de.types!==null&&(te.types=de.types),D.T=te}},xe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},xe.use=function(F){return D.H.use(F)},xe.useActionState=function(F,te,de){return D.H.useActionState(F,te,de)},xe.useCallback=function(F,te){return D.H.useCallback(F,te)},xe.useContext=function(F){return D.H.useContext(F)},xe.useDebugValue=function(){},xe.useDeferredValue=function(F,te){return D.H.useDeferredValue(F,te)},xe.useEffect=function(F,te){return D.H.useEffect(F,te)},xe.useEffectEvent=function(F){return D.H.useEffectEvent(F)},xe.useId=function(){return D.H.useId()},xe.useImperativeHandle=function(F,te,de){return D.H.useImperativeHandle(F,te,de)},xe.useInsertionEffect=function(F,te){return D.H.useInsertionEffect(F,te)},xe.useLayoutEffect=function(F,te){return D.H.useLayoutEffect(F,te)},xe.useMemo=function(F,te){return D.H.useMemo(F,te)},xe.useOptimistic=function(F,te){return D.H.useOptimistic(F,te)},xe.useReducer=function(F,te,de){return D.H.useReducer(F,te,de)},xe.useRef=function(F){return D.H.useRef(F)},xe.useState=function(F){return D.H.useState(F)},xe.useSyncExternalStore=function(F,te,de){return D.H.useSyncExternalStore(F,te,de)},xe.useTransition=function(){return D.H.useTransition()},xe.version="19.2.4",xe}var Kv;function Vp(){return Kv||(Kv=1,Dh.exports=lR()),Dh.exports}var be=Vp();const uR=KE(be);var Vh={exports:{}},gl={},Ph={exports:{}},Uh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function cR(){return $v||($v=1,(function(n){function e($,ae){var ye=$.length;$.push(ae);e:for(;0<ye;){var De=ye-1>>>1,Ye=$[De];if(0<r(Ye,ae))$[De]=ae,$[ye]=Ye,ye=De;else break e}}function t($){return $.length===0?null:$[0]}function o($){if($.length===0)return null;var ae=$[0],ye=$.pop();if(ye!==ae){$[0]=ye;e:for(var De=0,Ye=$.length,F=Ye>>>1;De<F;){var te=2*(De+1)-1,de=$[te],ee=te+1,he=$[ee];if(0>r(de,ye))ee<Ye&&0>r(he,de)?($[De]=he,$[ee]=ye,De=ee):($[De]=de,$[te]=ye,De=te);else if(ee<Ye&&0>r(he,ye))$[De]=he,$[ee]=ye,De=ee;else break e}}return ae}function r($,ae){var ye=$.sortIndex-ae.sortIndex;return ye!==0?ye:$.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var y=[],m=[],_=1,E=null,S=3,I=!1,L=!1,G=!1,O=!1,K=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function re($){for(var ae=t(m);ae!==null;){if(ae.callback===null)o(m);else if(ae.startTime<=$)o(m),ae.sortIndex=ae.expirationTime,e(y,ae);else break;ae=t(m)}}function ue($){if(G=!1,re($),!L)if(t(y)!==null)L=!0,ce||(ce=!0,k());else{var ae=t(m);ae!==null&&Ee(ue,ae.startTime-$)}}var ce=!1,D=-1,N=5,b=-1;function P(){return O?!0:!(n.unstable_now()-b<N)}function V(){if(O=!1,ce){var $=n.unstable_now();b=$;var ae=!0;try{e:{L=!1,G&&(G=!1,ie(D),D=-1),I=!0;var ye=S;try{t:{for(re($),E=t(y);E!==null&&!(E.expirationTime>$&&P());){var De=E.callback;if(typeof De=="function"){E.callback=null,S=E.priorityLevel;var Ye=De(E.expirationTime<=$);if($=n.unstable_now(),typeof Ye=="function"){E.callback=Ye,re($),ae=!0;break t}E===t(y)&&o(y),re($)}else o(y);E=t(y)}if(E!==null)ae=!0;else{var F=t(m);F!==null&&Ee(ue,F.startTime-$),ae=!1}}break e}finally{E=null,S=ye,I=!1}ae=void 0}}finally{ae?k():ce=!1}}}var k;if(typeof Z=="function")k=function(){Z(V)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,j=M.port2;M.port1.onmessage=V,k=function(){j.postMessage(null)}}else k=function(){K(V,0)};function Ee($,ae){D=K(function(){$(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function($){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ye=S;S=ae;try{return $()}finally{S=ye}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ye=S;S=$;try{return ae()}finally{S=ye}},n.unstable_scheduleCallback=function($,ae,ye){var De=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?De+ye:De):ye=De,$){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=ye+Ye,$={id:_++,callback:ae,priorityLevel:$,startTime:ye,expirationTime:Ye,sortIndex:-1},ye>De?($.sortIndex=ye,e(m,$),t(y)===null&&$===t(m)&&(G?(ie(D),D=-1):G=!0,Ee(ue,ye-De))):($.sortIndex=Ye,e(y,$),L||I||(L=!0,ce||(ce=!0,k()))),$},n.unstable_shouldYield=P,n.unstable_wrapCallback=function($){var ae=S;return function(){var ye=S;S=ae;try{return $.apply(this,arguments)}finally{S=ye}}}})(Uh)),Uh}var Qv;function fR(){return Qv||(Qv=1,Ph.exports=cR()),Ph.exports}var Lh={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function dR(){if(Xv)return tn;Xv=1;var n=Vp();function e(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var o={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(y,m,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:y,containerInfo:m,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,tn.createPortal=function(y,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(y,m,null,_)},tn.flushSync=function(y){var m=c.T,_=o.p;try{if(c.T=null,o.p=2,y)return y()}finally{c.T=m,o.p=_,o.d.f()}},tn.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(y,m))},tn.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},tn.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var _=m.as,E=d(_,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,I=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?o.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:I}):_==="script"&&o.d.X(y,{crossOrigin:E,integrity:S,fetchPriority:I,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},tn.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=d(m.as,m.crossOrigin);o.d.M(y,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(y)},tn.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,E=d(_,m.crossOrigin);o.d.L(y,_,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},tn.preloadModule=function(y,m){if(typeof y=="string")if(m){var _=d(m.as,m.crossOrigin);o.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(y)},tn.requestFormReset=function(y){o.d.r(y)},tn.unstable_batchedUpdates=function(y,m){return y(m)},tn.useFormState=function(y,m,_){return c.H.useFormState(y,m,_)},tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},tn.version="19.2.4",tn}var Wv;function hR(){if(Wv)return Lh.exports;Wv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lh.exports=dR(),Lh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function pR(){if(Zv)return gl;Zv=1;var n=fR(),e=Vp(),t=hR();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function y(i){if(l(i)!==i)throw Error(o(188))}function m(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(o(188));return s!==i?null:i}for(var a=i,u=s;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return y(g),i;if(v===u)return y(g),s;v=v.sibling}throw Error(o(188))}if(a.return!==u.return)a=g,u=v;else{for(var A=!1,w=g.child;w;){if(w===a){A=!0,a=g,u=v;break}if(w===u){A=!0,u=g,a=v;break}w=w.sibling}if(!A){for(w=v.child;w;){if(w===a){A=!0,a=v,u=g;break}if(w===u){A=!0,u=v,a=g;break}w=w.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==u)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:s}function _(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=_(i),s!==null)return s;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function k(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var M=Symbol.for("react.client.reference");function j(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===M?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case G:return"Fragment";case K:return"Profiler";case O:return"StrictMode";case ue:return"Suspense";case ce:return"SuspenseList";case b:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case L:return"Portal";case Z:return i.displayName||"Context";case ie:return(i._context.displayName||"Context")+".Consumer";case re:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:j(i.type)||"Memo";case N:s=i._payload,i=i._init;try{return j(i(s))}catch{}}return null}var Ee=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},De=[],Ye=-1;function F(i){return{current:i}}function te(i){0>Ye||(i.current=De[Ye],De[Ye]=null,Ye--)}function de(i,s){Ye++,De[Ye]=i.current,i.current=s}var ee=F(null),he=F(null),Te=F(null),Me=F(null);function lt(i,s){switch(de(Te,s),de(he,i),de(ee,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?hv(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=hv(s),i=pv(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}te(ee),de(ee,i)}function We(){te(ee),te(he),te(Te)}function Qn(i){i.memoizedState!==null&&de(Me,i);var s=ee.current,a=pv(s,i.type);s!==a&&(de(he,i),de(ee,a))}function Xn(i){he.current===i&&(te(ee),te(he)),Me.current===i&&(te(Me),fl._currentValue=ye)}var Ft,rt;function Tn(i){if(Ft===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Ft=s&&s[1]||"",rt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ft+i+rt}var yo=!1;function gi(i,s){if(!i||yo)return"";yo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(X){var J=X}Reflect.construct(i,[],oe)}else{try{oe.call()}catch(X){J=X}i.call(oe.prototype)}}else{try{throw Error()}catch(X){J=X}(oe=i())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(X){if(X&&J&&typeof X.stack=="string")return[X.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),A=v[0],w=v[1];if(A&&w){var U=A.split(`
`),Y=w.split(`
`);for(g=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;g<Y.length&&!Y[g].includes("DetermineComponentFrameRoot");)g++;if(u===U.length||g===Y.length)for(u=U.length-1,g=Y.length-1;1<=u&&0<=g&&U[u]!==Y[g];)g--;for(;1<=u&&0<=g;u--,g--)if(U[u]!==Y[g]){if(u!==1||g!==1)do if(u--,g--,0>g||U[u]!==Y[g]){var W=`
`+U[u].replace(" at new "," at ");return i.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",i.displayName)),W}while(1<=u&&0<=g);break}}}finally{yo=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Tn(a):""}function da(i,s){switch(i.tag){case 26:case 27:case 5:return Tn(i.type);case 16:return Tn("Lazy");case 13:return i.child!==s&&s!==null?Tn("Suspense Fallback"):Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 15:return gi(i.type,!1);case 11:return gi(i.type.render,!1);case 1:return gi(i.type,!0);case 31:return Tn("Activity");default:return""}}function ha(i){try{var s="",a=null;do s+=da(i,a),a=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Rt=Object.prototype.hasOwnProperty,Lt=n.unstable_scheduleCallback,vo=n.unstable_cancelCallback,Vf=n.unstable_shouldYield,Kl=n.unstable_requestPaint,an=n.unstable_now,ds=n.unstable_getCurrentPriorityLevel,pa=n.unstable_ImmediatePriority,ma=n.unstable_UserBlockingPriority,_o=n.unstable_NormalPriority,Pf=n.unstable_LowPriority,$l=n.unstable_IdlePriority,Ql=n.log,Xl=n.unstable_setDisableYieldValue,Wn=null,Jt=null;function Vn(i){if(typeof Ql=="function"&&Xl(i),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Wn,i)}catch{}}var _t=Math.clz32?Math.clz32:Zl,Wl=Math.log,Zs=Math.LN2;function Zl(i){return i>>>=0,i===0?32:31-(Wl(i)/Zs|0)|0}var yi=256,hs=262144,It=4194304;function vi(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function _i(i,s,a){var u=i.pendingLanes;if(u===0)return 0;var g=0,v=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var w=u&134217727;return w!==0?(u=w&~v,u!==0?g=vi(u):(A&=w,A!==0?g=vi(A):a||(a=w&~i,a!==0&&(g=vi(a))))):(w=u&~v,w!==0?g=vi(w):A!==0?g=vi(A):a||(a=u&~i,a!==0&&(g=vi(a)))),g===0?0:s!==0&&s!==g&&(s&v)===0&&(v=g&-g,a=s&-s,v>=a||v===32&&(a&4194048)!==0)?s:g}function Zn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Uf(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jl(){var i=It;return It<<=1,(It&62914560)===0&&(It=4194304),i}function Ei(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function ps(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Lf(i,s,a,u,g,v){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var w=i.entanglements,U=i.expirationTimes,Y=i.hiddenUpdates;for(a=A&~a;0<a;){var W=31-_t(a),oe=1<<W;w[W]=0,U[W]=-1;var J=Y[W];if(J!==null)for(Y[W]=null,W=0;W<J.length;W++){var X=J[W];X!==null&&(X.lane&=-536870913)}a&=~oe}u!==0&&ms(i,u,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(A&~s))}function ms(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-_t(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function ga(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var u=31-_t(a),g=1<<u;g&s|i[u]&s&&(i[u]|=s),a&=~g}}function ya(i,s){var a=s&-s;return a=(a&42)!==0?1:gs(a),(a&(i.suspendedLanes|s))!==0?0:a}function gs(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function zi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function eu(){var i=ae.p;return i!==0?i:(i=window.event,i===void 0?32:kv(i.type))}function jn(i,s){var a=ae.p;try{return ae.p=i,s()}finally{ae.p=a}}var ei=Math.random().toString(36).slice(2),wt="__reactFiber$"+ei,Gt="__reactProps$"+ei,Ti="__reactContainer$"+ei,js="__reactEvents$"+ei,kf="__reactListeners$"+ei,tu="__reactHandles$"+ei,nu="__reactResources$"+ei,Si="__reactMarker$"+ei;function er(i){delete i[wt],delete i[Gt],delete i[js],delete i[kf],delete i[tu]}function Ai(i){var s=i[wt];if(s)return s;for(var a=i.parentNode;a;){if(s=a[Ti]||a[wt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=Tv(i);i!==null;){if(a=i[wt])return a;i=Tv(i)}return s}i=a,a=i.parentNode}return null}function Pn(i){if(i=i[wt]||i[Ti]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Sn(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function Ci(i){var s=i[nu];return s||(s=i[nu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(i){i[Si]=!0}var va=new Set,_a={};function Ri(i,s){Ii(i,s),Ii(i+"Capture",s)}function Ii(i,s){for(_a[i]=s,i=0;i<s.length;i++)va.add(s[i])}var Ea=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ta={},Sa={};function iu(i){return Rt.call(Sa,i)?!0:Rt.call(Ta,i)?!1:Ea.test(i)?Sa[i]=!0:(Ta[i]=!0,!1)}function tr(i,s,a){if(iu(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function An(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function bt(i,s,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+u)}}function qt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Eo(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Aa(i,s,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function je(i){if(!i._valueTracker){var s=Eo(i)?"checked":"value";i._valueTracker=Aa(i,s,""+i[s])}}function ys(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return i&&(u=Eo(i)?i.checked?"true":"false":i.value),i=u,i!==a?(s.setValue(i),!0):!1}function wi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var vs=/[\n"\\]/g;function dn(i){return i.replace(vs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function nr(i,s,a,u,g,v,A,w){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+qt(s)):i.value!==""+qt(s)&&(i.value=""+qt(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?Ca(i,A,qt(s)):a!=null?Ca(i,A,qt(a)):u!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+qt(w):i.removeAttribute("name")}function ou(i,s,a,u,g,v,A,w){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){je(i);return}a=a!=null?""+qt(a):"",s=s!=null?""+qt(s):a,w||s===i.value||(i.value=s),i.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=w?i.checked:!!u,i.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),je(i)}function Ca(i,s,a){s==="number"&&wi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function To(i,s,a,u){if(i=i.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=s.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&u&&(i[a].defaultSelected=!0)}else{for(a=""+qt(a),s=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function su(i,s,a){if(s!=null&&(s=""+qt(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+qt(a):""}function So(i,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(o(92));if(Ee(u)){if(1<u.length)throw Error(o(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=qt(s),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),je(i)}function hn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ra(i,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,a):typeof a!="number"||a===0||ru.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function Ia(i,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&a[g]!==u&&Ra(i,g,u)}else for(var v in s)s.hasOwnProperty(v)&&Ra(i,v,s[v])}function ir(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ao=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function or(i){return Ao.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ti(){}var wa=null;function Un(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Co=null,xi=null;function _s(i){var s=Pn(i);if(s&&(i=s.stateNode)){var a=i[Gt]||null;e:switch(i=s.stateNode,s.type){case"input":if(nr(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==i&&u.form===i.form){var g=u[Gt]||null;if(!g)throw Error(o(90));nr(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===i.form&&ys(u)}break e;case"textarea":su(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&To(i,!!a.multiple,s,!1)}}}var sr=!1;function Ro(i,s,a){if(sr)return i(s,a);sr=!0;try{var u=i(s);return u}finally{if(sr=!1,(Co!==null||xi!==null)&&(ec(),Co&&(s=Co,i=xi,xi=Co=null,_s(s),i)))for(s=0;s<i.length;s++)_s(i[s])}}function ni(i,s){var a=i.stateNode;if(a===null)return null;var u=a[Gt]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Es=!1;if(Ln)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){Es=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{Es=!1}var bi=null,xa=null,Ts=null;function ba(){if(Ts)return Ts;var i,s=xa,a=s.length,u,g="value"in bi?bi.value:bi.textContent,v=g.length;for(i=0;i<a&&s[i]===g[i];i++);var A=a-i;for(u=1;u<=A&&s[a-u]===g[v-u];u++);return Ts=g.slice(i,1<u?1-u:void 0)}function Ss(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Yi(){return!0}function ii(){return!1}function Kt(i){function s(a,u,g,v,A){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(a=i[w],this[w]=a?a(v):v[w]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Yi:ii,this.isPropagationStopped=ii,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),s}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ni=Kt(Ji),Io=E({},Ji,{view:0,detail:0}),Na=Kt(Io),wo,rr,Mi,ar=E({},Io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Mi&&(Mi&&i.type==="mousemove"?(wo=i.screenX-Mi.screenX,rr=i.screenY-Mi.screenY):rr=wo=0,Mi=i),wo)},movementY:function(i){return"movementY"in i?i.movementY:rr}}),Ma=Kt(ar),As=E({},ar,{dataTransfer:0}),lu=Kt(As),uu=E({},Io,{relatedTarget:0}),Cs=Kt(uu),Da=E({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),cu=Kt(Da),lr=E({},Ji,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),fu=Kt(lr),du=E({},Ji,{data:0}),Di=Kt(du),hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=mu[i])?!!s[i]:!1}function xo(){return gu}var ln=E({},Io,{key:function(i){if(i.key){var s=hu[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Ss(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?pu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xo,charCode:function(i){return i.type==="keypress"?Ss(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ss(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),yu=Kt(ln),vu=E({},ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=Kt(vu),p=E({},Io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xo}),T=Kt(p),C=E({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=Kt(C),H=E({},ar,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Kt(H),fe=E({},Ji,{newState:0,oldState:0}),Ve=Kt(fe),Et=[9,13,27,32],Qe=Ln&&"CompositionEvent"in window,ht=null;Ln&&"documentMode"in document&&(ht=document.documentMode);var kn=Ln&&"TextEvent"in window&&!ht,Vi=Ln&&(!Qe||ht&&8<ht&&11>=ht),oi=" ",si=!1;function Rs(i,s){switch(i){case"keyup":return Et.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ur(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var cr=!1;function NA(i,s){switch(i){case"compositionend":return ur(s);case"keypress":return s.which!==32?null:(si=!0,oi);case"textInput":return i=s.data,i===oi&&si?null:i;default:return null}}function MA(i,s){if(cr)return i==="compositionend"||!Qe&&Rs(i,s)?(i=ba(),Ts=xa=bi=null,cr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Vi&&s.locale!=="ko"?null:s.data;default:return null}}var DA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!DA[i.type]:s==="textarea"}function Rm(i,s,a,u){Co?xi?xi.push(u):xi=[u]:Co=u,s=ac(s,"onChange"),0<s.length&&(a=new Ni("onChange","change",null,a,u),i.push({event:a,listeners:s}))}var Va=null,Pa=null;function VA(i){av(i,0)}function _u(i){var s=Sn(i);if(ys(s))return i}function Im(i,s){if(i==="change")return s}var wm=!1;if(Ln){var Of;if(Ln){var Bf="oninput"in document;if(!Bf){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),Bf=typeof xm.oninput=="function"}Of=Bf}else Of=!1;wm=Of&&(!document.documentMode||9<document.documentMode)}function bm(){Va&&(Va.detachEvent("onpropertychange",Nm),Pa=Va=null)}function Nm(i){if(i.propertyName==="value"&&_u(Pa)){var s=[];Rm(s,Pa,i,Un(i)),Ro(VA,s)}}function PA(i,s,a){i==="focusin"?(bm(),Va=s,Pa=a,Va.attachEvent("onpropertychange",Nm)):i==="focusout"&&bm()}function UA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return _u(Pa)}function LA(i,s){if(i==="click")return _u(s)}function kA(i,s){if(i==="input"||i==="change")return _u(s)}function OA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Cn=typeof Object.is=="function"?Object.is:OA;function Ua(i,s){if(Cn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!Rt.call(s,g)||!Cn(i[g],s[g]))return!1}return!0}function Mm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Dm(i,s){var a=Mm(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=s&&u>=s)return{node:a,offset:s-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Mm(a)}}function Vm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Vm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Pm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=wi(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=wi(i.document)}return s}function Ff(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var BA=Ln&&"documentMode"in document&&11>=document.documentMode,fr=null,Gf=null,La=null,qf=!1;function Um(i,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;qf||fr==null||fr!==wi(u)||(u=fr,"selectionStart"in u&&Ff(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),La&&Ua(La,u)||(La=u,u=ac(Gf,"onSelect"),0<u.length&&(s=new Ni("onSelect","select",null,s,a),i.push({event:s,listeners:u}),s.target=fr)))}function Is(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var dr={animationend:Is("Animation","AnimationEnd"),animationiteration:Is("Animation","AnimationIteration"),animationstart:Is("Animation","AnimationStart"),transitionrun:Is("Transition","TransitionRun"),transitionstart:Is("Transition","TransitionStart"),transitioncancel:Is("Transition","TransitionCancel"),transitionend:Is("Transition","TransitionEnd")},Hf={},Lm={};Ln&&(Lm=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function ws(i){if(Hf[i])return Hf[i];if(!dr[i])return i;var s=dr[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in Lm)return Hf[i]=s[a];return i}var km=ws("animationend"),Om=ws("animationiteration"),Bm=ws("animationstart"),FA=ws("transitionrun"),GA=ws("transitionstart"),qA=ws("transitioncancel"),Fm=ws("transitionend"),Gm=new Map,zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zf.push("scrollEnd");function ri(i,s){Gm.set(i,s),Ri(s,[i])}var Eu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},On=[],hr=0,Yf=0;function Tu(){for(var i=hr,s=Yf=hr=0;s<i;){var a=On[s];On[s++]=null;var u=On[s];On[s++]=null;var g=On[s];On[s++]=null;var v=On[s];if(On[s++]=null,u!==null&&g!==null){var A=u.pending;A===null?g.next=g:(g.next=A.next,A.next=g),u.pending=g}v!==0&&qm(a,g,v)}}function Su(i,s,a,u){On[hr++]=i,On[hr++]=s,On[hr++]=a,On[hr++]=u,Yf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Jf(i,s,a,u){return Su(i,s,a,u),Au(i)}function xs(i,s){return Su(i,null,null,s),Au(i)}function qm(i,s,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var g=!1,v=i.return;v!==null;)v.childLanes|=a,u=v.alternate,u!==null&&(u.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&s!==null&&(g=31-_t(a),i=v.hiddenUpdates,u=i[g],u===null?i[g]=[s]:u.push(s),s.lane=a|536870912),v):null}function Au(i){if(50<ol)throw ol=0,th=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var pr={};function HA(i,s,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(i,s,a,u){return new HA(i,s,a,u)}function Kf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $i(i,s){var a=i.alternate;return a===null?(a=Rn(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Hm(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Cu(i,s,a,u,g,v){var A=0;if(u=i,typeof i=="function")Kf(i)&&(A=1);else if(typeof i=="string")A=$C(i,a,ee.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case b:return i=Rn(31,a,s,g),i.elementType=b,i.lanes=v,i;case G:return bs(a.children,g,v,s);case O:A=8,g|=24;break;case K:return i=Rn(12,a,s,g|2),i.elementType=K,i.lanes=v,i;case ue:return i=Rn(13,a,s,g),i.elementType=ue,i.lanes=v,i;case ce:return i=Rn(19,a,s,g),i.elementType=ce,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Z:A=10;break e;case ie:A=9;break e;case re:A=11;break e;case D:A=14;break e;case N:A=16,u=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),u=null}return s=Rn(A,a,s,g),s.elementType=i,s.type=u,s.lanes=v,s}function bs(i,s,a,u){return i=Rn(7,i,u,s),i.lanes=a,i}function $f(i,s,a){return i=Rn(6,i,null,s),i.lanes=a,i}function zm(i){var s=Rn(18,null,null,0);return s.stateNode=i,s}function Qf(i,s,a){return s=Rn(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Ym=new WeakMap;function Bn(i,s){if(typeof i=="object"&&i!==null){var a=Ym.get(i);return a!==void 0?a:(s={value:i,source:s,stack:ha(s)},Ym.set(i,s),s)}return{value:i,source:s,stack:ha(s)}}var mr=[],gr=0,Ru=null,ka=0,Fn=[],Gn=0,bo=null,Pi=1,Ui="";function Qi(i,s){mr[gr++]=ka,mr[gr++]=Ru,Ru=i,ka=s}function Jm(i,s,a){Fn[Gn++]=Pi,Fn[Gn++]=Ui,Fn[Gn++]=bo,bo=i;var u=Pi;i=Ui;var g=32-_t(u)-1;u&=~(1<<g),a+=1;var v=32-_t(s)+g;if(30<v){var A=g-g%5;v=(u&(1<<A)-1).toString(32),u>>=A,g-=A,Pi=1<<32-_t(s)+g|a<<g|u,Ui=v+i}else Pi=1<<v|a<<g|u,Ui=i}function Xf(i){i.return!==null&&(Qi(i,1),Jm(i,1,0))}function Wf(i){for(;i===Ru;)Ru=mr[--gr],mr[gr]=null,ka=mr[--gr],mr[gr]=null;for(;i===bo;)bo=Fn[--Gn],Fn[Gn]=null,Ui=Fn[--Gn],Fn[Gn]=null,Pi=Fn[--Gn],Fn[Gn]=null}function Km(i,s){Fn[Gn++]=Pi,Fn[Gn++]=Ui,Fn[Gn++]=bo,Pi=s.id,Ui=s.overflow,bo=i}var $t=null,ut=null,qe=!1,No=null,qn=!1,Zf=Error(o(519));function Mo(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oa(Bn(s,i)),Zf}function $m(i){var s=i.stateNode,a=i.type,u=i.memoizedProps;switch(s[wt]=i,s[Gt]=u,a){case"dialog":ke("cancel",s),ke("close",s);break;case"iframe":case"object":case"embed":ke("load",s);break;case"video":case"audio":for(a=0;a<rl.length;a++)ke(rl[a],s);break;case"source":ke("error",s);break;case"img":case"image":case"link":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"input":ke("invalid",s),ou(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ke("invalid",s);break;case"textarea":ke("invalid",s),So(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||fv(s.textContent,a)?(u.popover!=null&&(ke("beforetoggle",s),ke("toggle",s)),u.onScroll!=null&&ke("scroll",s),u.onScrollEnd!=null&&ke("scrollend",s),u.onClick!=null&&(s.onclick=ti),s=!0):s=!1,s||Mo(i,!0)}function Qm(i){for($t=i.return;$t;)switch($t.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:$t=$t.return}}function yr(i){if(i!==$t)return!1;if(!qe)return Qm(i),qe=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||gh(i.type,i.memoizedProps)),a=!a),a&&ut&&Mo(i),Qm(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));ut=Ev(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));ut=Ev(i)}else s===27?(s=ut,Yo(i.type)?(i=Th,Th=null,ut=i):ut=s):ut=$t?zn(i.stateNode.nextSibling):null;return!0}function Ns(){ut=$t=null,qe=!1}function jf(){var i=No;return i!==null&&(yn===null?yn=i:yn.push.apply(yn,i),No=null),i}function Oa(i){No===null?No=[i]:No.push(i)}var ed=F(null),Ms=null,Xi=null;function Do(i,s,a){de(ed,s._currentValue),s._currentValue=a}function Wi(i){i._currentValue=ed.current,te(ed)}function td(i,s,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===a)break;i=i.return}}function nd(i,s,a,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var A=g.child;v=v.firstContext;e:for(;v!==null;){var w=v;v=g;for(var U=0;U<s.length;U++)if(w.context===s[U]){v.lanes|=a,w=v.alternate,w!==null&&(w.lanes|=a),td(v.return,a,i),u||(A=null);break e}v=w.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(o(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),td(A,a,i),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===i){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function vr(i,s,a,u){i=null;for(var g=s,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var w=g.type;Cn(g.pendingProps.value,A.value)||(i!==null?i.push(w):i=[w])}}else if(g===Me.current){if(A=g.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(fl):i=[fl])}g=g.return}i!==null&&nd(s,i,a,u),s.flags|=262144}function Iu(i){for(i=i.firstContext;i!==null;){if(!Cn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ds(i){Ms=i,Xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Qt(i){return Xm(Ms,i)}function wu(i,s){return Ms===null&&Ds(i),Xm(i,s)}function Xm(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Xi===null){if(i===null)throw Error(o(308));Xi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Xi=Xi.next=s;return a}var zA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},YA=n.unstable_scheduleCallback,JA=n.unstable_NormalPriority,Nt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function id(){return{controller:new zA,data:new Map,refCount:0}}function Ba(i){i.refCount--,i.refCount===0&&YA(JA,function(){i.controller.abort()})}var Fa=null,od=0,_r=0,Er=null;function KA(i,s){if(Fa===null){var a=Fa=[];od=0,_r=ah(),Er={status:"pending",value:void 0,then:function(u){a.push(u)}}}return od++,s.then(Wm,Wm),s}function Wm(){if(--od===0&&Fa!==null){Er!==null&&(Er.status="fulfilled");var i=Fa;Fa=null,_r=0,Er=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function $A(i,s){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<a.length;g++)(0,a[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Zm=$.S;$.S=function(i,s){Uy=an(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&KA(i,s),Zm!==null&&Zm(i,s)};var Vs=F(null);function sd(){var i=Vs.current;return i!==null?i:at.pooledCache}function xu(i,s){s===null?de(Vs,Vs.current):de(Vs,s.pool)}function jm(){var i=sd();return i===null?null:{parent:Nt._currentValue,pool:i}}var Tr=Error(o(460)),rd=Error(o(474)),bu=Error(o(542)),Nu={then:function(){}};function eg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function tg(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(ti,ti),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,ig(i),i;default:if(typeof s.status=="string")s.then(ti,ti);else{if(i=at,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,ig(i),i}throw Us=s,Tr}}function Ps(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Us=a,Tr):a}}var Us=null;function ng(){if(Us===null)throw Error(o(459));var i=Us;return Us=null,i}function ig(i){if(i===Tr||i===bu)throw Error(o(483))}var Sr=null,Ga=0;function Mu(i){var s=Ga;return Ga+=1,Sr===null&&(Sr=[]),tg(Sr,i,s)}function qa(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Du(i,s){throw s.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function og(i){function s(q,B){if(i){var z=q.deletions;z===null?(q.deletions=[B],q.flags|=16):z.push(B)}}function a(q,B){if(!i)return null;for(;B!==null;)s(q,B),B=B.sibling;return null}function u(q){for(var B=new Map;q!==null;)q.key!==null?B.set(q.key,q):B.set(q.index,q),q=q.sibling;return B}function g(q,B){return q=$i(q,B),q.index=0,q.sibling=null,q}function v(q,B,z){return q.index=z,i?(z=q.alternate,z!==null?(z=z.index,z<B?(q.flags|=67108866,B):z):(q.flags|=67108866,B)):(q.flags|=1048576,B)}function A(q){return i&&q.alternate===null&&(q.flags|=67108866),q}function w(q,B,z,ne){return B===null||B.tag!==6?(B=$f(z,q.mode,ne),B.return=q,B):(B=g(B,z),B.return=q,B)}function U(q,B,z,ne){var Se=z.type;return Se===G?W(q,B,z.props.children,ne,z.key):B!==null&&(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&Ps(Se)===B.type)?(B=g(B,z.props),qa(B,z),B.return=q,B):(B=Cu(z.type,z.key,z.props,null,q.mode,ne),qa(B,z),B.return=q,B)}function Y(q,B,z,ne){return B===null||B.tag!==4||B.stateNode.containerInfo!==z.containerInfo||B.stateNode.implementation!==z.implementation?(B=Qf(z,q.mode,ne),B.return=q,B):(B=g(B,z.children||[]),B.return=q,B)}function W(q,B,z,ne,Se){return B===null||B.tag!==7?(B=bs(z,q.mode,ne,Se),B.return=q,B):(B=g(B,z),B.return=q,B)}function oe(q,B,z){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=$f(""+B,q.mode,z),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return z=Cu(B.type,B.key,B.props,null,q.mode,z),qa(z,B),z.return=q,z;case L:return B=Qf(B,q.mode,z),B.return=q,B;case N:return B=Ps(B),oe(q,B,z)}if(Ee(B)||k(B))return B=bs(B,q.mode,z,null),B.return=q,B;if(typeof B.then=="function")return oe(q,Mu(B),z);if(B.$$typeof===Z)return oe(q,wu(q,B),z);Du(q,B)}return null}function J(q,B,z,ne){var Se=B!==null?B.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Se!==null?null:w(q,B,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===Se?U(q,B,z,ne):null;case L:return z.key===Se?Y(q,B,z,ne):null;case N:return z=Ps(z),J(q,B,z,ne)}if(Ee(z)||k(z))return Se!==null?null:W(q,B,z,ne,null);if(typeof z.then=="function")return J(q,B,Mu(z),ne);if(z.$$typeof===Z)return J(q,B,wu(q,z),ne);Du(q,z)}return null}function X(q,B,z,ne,Se){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return q=q.get(z)||null,w(B,q,""+ne,Se);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case I:return q=q.get(ne.key===null?z:ne.key)||null,U(B,q,ne,Se);case L:return q=q.get(ne.key===null?z:ne.key)||null,Y(B,q,ne,Se);case N:return ne=Ps(ne),X(q,B,z,ne,Se)}if(Ee(ne)||k(ne))return q=q.get(z)||null,W(B,q,ne,Se,null);if(typeof ne.then=="function")return X(q,B,z,Mu(ne),Se);if(ne.$$typeof===Z)return X(q,B,z,wu(B,ne),Se);Du(B,ne)}return null}function ge(q,B,z,ne){for(var Se=null,Je=null,ve=B,Ue=B=0,Be=null;ve!==null&&Ue<z.length;Ue++){ve.index>Ue?(Be=ve,ve=null):Be=ve.sibling;var Ke=J(q,ve,z[Ue],ne);if(Ke===null){ve===null&&(ve=Be);break}i&&ve&&Ke.alternate===null&&s(q,ve),B=v(Ke,B,Ue),Je===null?Se=Ke:Je.sibling=Ke,Je=Ke,ve=Be}if(Ue===z.length)return a(q,ve),qe&&Qi(q,Ue),Se;if(ve===null){for(;Ue<z.length;Ue++)ve=oe(q,z[Ue],ne),ve!==null&&(B=v(ve,B,Ue),Je===null?Se=ve:Je.sibling=ve,Je=ve);return qe&&Qi(q,Ue),Se}for(ve=u(ve);Ue<z.length;Ue++)Be=X(ve,q,Ue,z[Ue],ne),Be!==null&&(i&&Be.alternate!==null&&ve.delete(Be.key===null?Ue:Be.key),B=v(Be,B,Ue),Je===null?Se=Be:Je.sibling=Be,Je=Be);return i&&ve.forEach(function(Xo){return s(q,Xo)}),qe&&Qi(q,Ue),Se}function Ce(q,B,z,ne){if(z==null)throw Error(o(151));for(var Se=null,Je=null,ve=B,Ue=B=0,Be=null,Ke=z.next();ve!==null&&!Ke.done;Ue++,Ke=z.next()){ve.index>Ue?(Be=ve,ve=null):Be=ve.sibling;var Xo=J(q,ve,Ke.value,ne);if(Xo===null){ve===null&&(ve=Be);break}i&&ve&&Xo.alternate===null&&s(q,ve),B=v(Xo,B,Ue),Je===null?Se=Xo:Je.sibling=Xo,Je=Xo,ve=Be}if(Ke.done)return a(q,ve),qe&&Qi(q,Ue),Se;if(ve===null){for(;!Ke.done;Ue++,Ke=z.next())Ke=oe(q,Ke.value,ne),Ke!==null&&(B=v(Ke,B,Ue),Je===null?Se=Ke:Je.sibling=Ke,Je=Ke);return qe&&Qi(q,Ue),Se}for(ve=u(ve);!Ke.done;Ue++,Ke=z.next())Ke=X(ve,q,Ue,Ke.value,ne),Ke!==null&&(i&&Ke.alternate!==null&&ve.delete(Ke.key===null?Ue:Ke.key),B=v(Ke,B,Ue),Je===null?Se=Ke:Je.sibling=Ke,Je=Ke);return i&&ve.forEach(function(sR){return s(q,sR)}),qe&&Qi(q,Ue),Se}function st(q,B,z,ne){if(typeof z=="object"&&z!==null&&z.type===G&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var Se=z.key;B!==null;){if(B.key===Se){if(Se=z.type,Se===G){if(B.tag===7){a(q,B.sibling),ne=g(B,z.props.children),ne.return=q,q=ne;break e}}else if(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===N&&Ps(Se)===B.type){a(q,B.sibling),ne=g(B,z.props),qa(ne,z),ne.return=q,q=ne;break e}a(q,B);break}else s(q,B);B=B.sibling}z.type===G?(ne=bs(z.props.children,q.mode,ne,z.key),ne.return=q,q=ne):(ne=Cu(z.type,z.key,z.props,null,q.mode,ne),qa(ne,z),ne.return=q,q=ne)}return A(q);case L:e:{for(Se=z.key;B!==null;){if(B.key===Se)if(B.tag===4&&B.stateNode.containerInfo===z.containerInfo&&B.stateNode.implementation===z.implementation){a(q,B.sibling),ne=g(B,z.children||[]),ne.return=q,q=ne;break e}else{a(q,B);break}else s(q,B);B=B.sibling}ne=Qf(z,q.mode,ne),ne.return=q,q=ne}return A(q);case N:return z=Ps(z),st(q,B,z,ne)}if(Ee(z))return ge(q,B,z,ne);if(k(z)){if(Se=k(z),typeof Se!="function")throw Error(o(150));return z=Se.call(z),Ce(q,B,z,ne)}if(typeof z.then=="function")return st(q,B,Mu(z),ne);if(z.$$typeof===Z)return st(q,B,wu(q,z),ne);Du(q,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,B!==null&&B.tag===6?(a(q,B.sibling),ne=g(B,z),ne.return=q,q=ne):(a(q,B),ne=$f(z,q.mode,ne),ne.return=q,q=ne),A(q)):a(q,B)}return function(q,B,z,ne){try{Ga=0;var Se=st(q,B,z,ne);return Sr=null,Se}catch(ve){if(ve===Tr||ve===bu)throw ve;var Je=Rn(29,ve,null,q.mode);return Je.lanes=ne,Je.return=q,Je}finally{}}}var Ls=og(!0),sg=og(!1),Vo=!1;function ad(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ld(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Po(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Uo(i,s,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Xe&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=Au(i),qm(i,null,a),s}return Su(i,u,s,a),Au(i)}function Ha(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,ga(i,a)}}function ud(i,s){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?g=v=s:v=v.next=s}else g=v=s;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var cd=!1;function za(){if(cd){var i=Er;if(i!==null)throw i}}function Ya(i,s,a,u){cd=!1;var g=i.updateQueue;Vo=!1;var v=g.firstBaseUpdate,A=g.lastBaseUpdate,w=g.shared.pending;if(w!==null){g.shared.pending=null;var U=w,Y=U.next;U.next=null,A===null?v=Y:A.next=Y,A=U;var W=i.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==A&&(w===null?W.firstBaseUpdate=Y:w.next=Y,W.lastBaseUpdate=U))}if(v!==null){var oe=g.baseState;A=0,W=Y=U=null,w=v;do{var J=w.lane&-536870913,X=J!==w.lane;if(X?(Oe&J)===J:(u&J)===J){J!==0&&J===_r&&(cd=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ge=i,Ce=w;J=s;var st=a;switch(Ce.tag){case 1:if(ge=Ce.payload,typeof ge=="function"){oe=ge.call(st,oe,J);break e}oe=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ce.payload,J=typeof ge=="function"?ge.call(st,oe,J):ge,J==null)break e;oe=E({},oe,J);break e;case 2:Vo=!0}}J=w.callback,J!==null&&(i.flags|=64,X&&(i.flags|=8192),X=g.callbacks,X===null?g.callbacks=[J]:X.push(J))}else X={lane:J,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(Y=W=X,U=oe):W=W.next=X,A|=J;if(w=w.next,w===null){if(w=g.shared.pending,w===null)break;X=w,w=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);W===null&&(U=oe),g.baseState=U,g.firstBaseUpdate=Y,g.lastBaseUpdate=W,v===null&&(g.shared.lanes=0),Fo|=A,i.lanes=A,i.memoizedState=oe}}function rg(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function ag(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)rg(a[i],s)}var Ar=F(null),Vu=F(0);function lg(i,s){i=ro,de(Vu,i),de(Ar,s),ro=i|s.baseLanes}function fd(){de(Vu,ro),de(Ar,Ar.current)}function dd(){ro=Vu.current,te(Ar),te(Vu)}var In=F(null),Hn=null;function Lo(i){var s=i.alternate;de(Tt,Tt.current&1),de(In,i),Hn===null&&(s===null||Ar.current!==null||s.memoizedState!==null)&&(Hn=i)}function hd(i){de(Tt,Tt.current),de(In,i),Hn===null&&(Hn=i)}function ug(i){i.tag===22?(de(Tt,Tt.current),de(In,i),Hn===null&&(Hn=i)):ko()}function ko(){de(Tt,Tt.current),de(In,In.current)}function wn(i){te(In),Hn===i&&(Hn=null),te(Tt)}var Tt=F(0);function Pu(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||_h(a)||Eh(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Zi=0,Pe=null,it=null,Mt=null,Uu=!1,Cr=!1,ks=!1,Lu=0,Ja=0,Rr=null,QA=0;function yt(){throw Error(o(321))}function pd(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Cn(i[a],s[a]))return!1;return!0}function md(i,s,a,u,g,v){return Zi=v,Pe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=i===null||i.memoizedState===null?Jg:Nd,ks=!1,v=a(u,g),ks=!1,Cr&&(v=fg(s,a,u,g)),cg(i),v}function cg(i){$.H=Qa;var s=it!==null&&it.next!==null;if(Zi=0,Mt=it=Pe=null,Uu=!1,Ja=0,Rr=null,s)throw Error(o(300));i===null||Dt||(i=i.dependencies,i!==null&&Iu(i)&&(Dt=!0))}function fg(i,s,a,u){Pe=i;var g=0;do{if(Cr&&(Rr=null),Ja=0,Cr=!1,25<=g)throw Error(o(301));if(g+=1,Mt=it=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}$.H=Kg,v=s(a,u)}while(Cr);return v}function XA(){var i=$.H,s=i.useState()[0];return s=typeof s.then=="function"?Ka(s):s,i=i.useState()[0],(it!==null?it.memoizedState:null)!==i&&(Pe.flags|=1024),s}function gd(){var i=Lu!==0;return Lu=0,i}function yd(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function vd(i){if(Uu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Uu=!1}Zi=0,Mt=it=Pe=null,Cr=!1,Ja=Lu=0,Rr=null}function un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Pe.memoizedState=Mt=i:Mt=Mt.next=i,Mt}function St(){if(it===null){var i=Pe.alternate;i=i!==null?i.memoizedState:null}else i=it.next;var s=Mt===null?Pe.memoizedState:Mt.next;if(s!==null)Mt=s,it=i;else{if(i===null)throw Pe.alternate===null?Error(o(467)):Error(o(310));it=i,i={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Mt===null?Pe.memoizedState=Mt=i:Mt=Mt.next=i}return Mt}function ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ka(i){var s=Ja;return Ja+=1,Rr===null&&(Rr=[]),i=tg(Rr,i,s),s=Pe,(Mt===null?s.memoizedState:Mt.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?Jg:Nd),i}function Ou(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ka(i);if(i.$$typeof===Z)return Qt(i)}throw Error(o(438,String(i)))}function _d(i){var s=null,a=Pe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=Pe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=ku(),Pe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),u=0;u<i;u++)a[u]=P;return s.index++,a}function ji(i,s){return typeof s=="function"?s(i):s}function Bu(i){var s=St();return Ed(s,it,i)}function Ed(i,s,a){var u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=a;var g=i.baseQueue,v=u.pending;if(v!==null){if(g!==null){var A=g.next;g.next=v.next,v.next=A}s.baseQueue=g=v,u.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{s=g.next;var w=A=null,U=null,Y=s,W=!1;do{var oe=Y.lane&-536870913;if(oe!==Y.lane?(Oe&oe)===oe:(Zi&oe)===oe){var J=Y.revertLane;if(J===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),oe===_r&&(W=!0);else if((Zi&J)===J){Y=Y.next,J===_r&&(W=!0);continue}else oe={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(w=U=oe,A=v):U=U.next=oe,Pe.lanes|=J,Fo|=J;oe=Y.action,ks&&a(v,oe),v=Y.hasEagerState?Y.eagerState:a(v,oe)}else J={lane:oe,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(w=U=J,A=v):U=U.next=J,Pe.lanes|=oe,Fo|=oe;Y=Y.next}while(Y!==null&&Y!==s);if(U===null?A=v:U.next=w,!Cn(v,i.memoizedState)&&(Dt=!0,W&&(a=Er,a!==null)))throw a;i.memoizedState=v,i.baseState=A,i.baseQueue=U,u.lastRenderedState=v}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Td(i){var s=St(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var u=a.dispatch,g=a.pending,v=s.memoizedState;if(g!==null){a.pending=null;var A=g=g.next;do v=i(v,A.action),A=A.next;while(A!==g);Cn(v,s.memoizedState)||(Dt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,u]}function dg(i,s,a){var u=Pe,g=St(),v=qe;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=s();var A=!Cn((it||g).memoizedState,a);if(A&&(g.memoizedState=a,Dt=!0),g=g.queue,Cd(mg.bind(null,u,g,i),[i]),g.getSnapshot!==s||A||Mt!==null&&Mt.memoizedState.tag&1){if(u.flags|=2048,Ir(9,{destroy:void 0},pg.bind(null,u,g,a,s),null),at===null)throw Error(o(349));v||(Zi&127)!==0||hg(u,s,a)}return a}function hg(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=Pe.updateQueue,s===null?(s=ku(),Pe.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function pg(i,s,a,u){s.value=a,s.getSnapshot=u,gg(s)&&yg(i)}function mg(i,s,a){return a(function(){gg(s)&&yg(i)})}function gg(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Cn(i,a)}catch{return!0}}function yg(i){var s=xs(i,2);s!==null&&vn(s,i,2)}function Sd(i){var s=un();if(typeof i=="function"){var a=i;if(i=a(),ks){Vn(!0);try{a()}finally{Vn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:i},s}function vg(i,s,a,u){return i.baseState=a,Ed(i,it,typeof u=="function"?u:ji)}function WA(i,s,a,u,g){if(qu(i))throw Error(o(485));if(i=s.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};$.T!==null?a(!0):v.isTransition=!1,u(v),a=s.pending,a===null?(v.next=s.pending=v,_g(s,v)):(v.next=a.next,s.pending=a.next=v)}}function _g(i,s){var a=s.action,u=s.payload,g=i.state;if(s.isTransition){var v=$.T,A={};$.T=A;try{var w=a(g,u),U=$.S;U!==null&&U(A,w),Eg(i,s,w)}catch(Y){Ad(i,s,Y)}finally{v!==null&&A.types!==null&&(v.types=A.types),$.T=v}}else try{v=a(g,u),Eg(i,s,v)}catch(Y){Ad(i,s,Y)}}function Eg(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Tg(i,s,u)},function(u){return Ad(i,s,u)}):Tg(i,s,a)}function Tg(i,s,a){s.status="fulfilled",s.value=a,Sg(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,_g(i,a)))}function Ad(i,s,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,Sg(s),s=s.next;while(s!==u)}i.action=null}function Sg(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Ag(i,s){return s}function Cg(i,s){if(qe){var a=at.formState;if(a!==null){e:{var u=Pe;if(qe){if(ut){t:{for(var g=ut,v=qn;g.nodeType!==8;){if(!v){g=null;break t}if(g=zn(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){ut=zn(g.nextSibling),u=g.data==="F!";break e}}Mo(u)}u=!1}u&&(s=a[0])}}return a=un(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ag,lastRenderedState:s},a.queue=u,a=Hg.bind(null,Pe,u),u.dispatch=a,u=Sd(!1),v=bd.bind(null,Pe,!1,u.queue),u=un(),g={state:s,dispatch:null,action:i,pending:null},u.queue=g,a=WA.bind(null,Pe,g,v,a),g.dispatch=a,u.memoizedState=i,[s,a,!1]}function Rg(i){var s=St();return Ig(s,it,i)}function Ig(i,s,a){if(s=Ed(i,s,Ag)[0],i=Bu(ji)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ka(s)}catch(A){throw A===Tr?bu:A}else u=s;s=St();var g=s.queue,v=g.dispatch;return a!==s.memoizedState&&(Pe.flags|=2048,Ir(9,{destroy:void 0},ZA.bind(null,g,a),null)),[u,v,i]}function ZA(i,s){i.action=s}function wg(i){var s=St(),a=it;if(a!==null)return Ig(s,a,i);St(),s=s.memoizedState,a=St();var u=a.queue.dispatch;return a.memoizedState=i,[s,u,!1]}function Ir(i,s,a,u){return i={tag:i,create:a,deps:u,inst:s,next:null},s=Pe.updateQueue,s===null&&(s=ku(),Pe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,s.lastEffect=i),i}function xg(){return St().memoizedState}function Fu(i,s,a,u){var g=un();Pe.flags|=i,g.memoizedState=Ir(1|s,{destroy:void 0},a,u===void 0?null:u)}function Gu(i,s,a,u){var g=St();u=u===void 0?null:u;var v=g.memoizedState.inst;it!==null&&u!==null&&pd(u,it.memoizedState.deps)?g.memoizedState=Ir(s,v,a,u):(Pe.flags|=i,g.memoizedState=Ir(1|s,v,a,u))}function bg(i,s){Fu(8390656,8,i,s)}function Cd(i,s){Gu(2048,8,i,s)}function jA(i){Pe.flags|=4;var s=Pe.updateQueue;if(s===null)s=ku(),Pe.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function Ng(i){var s=St().memoizedState;return jA({ref:s,nextImpl:i}),function(){if((Xe&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Mg(i,s){return Gu(4,2,i,s)}function Dg(i,s){return Gu(4,4,i,s)}function Vg(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Pg(i,s,a){a=a!=null?a.concat([i]):null,Gu(4,4,Vg.bind(null,s,i),a)}function Rd(){}function Ug(i,s){var a=St();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&pd(s,u[1])?u[0]:(a.memoizedState=[i,s],i)}function Lg(i,s){var a=St();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&pd(s,u[1]))return u[0];if(u=i(),ks){Vn(!0);try{i()}finally{Vn(!1)}}return a.memoizedState=[u,s],u}function Id(i,s,a){return a===void 0||(Zi&1073741824)!==0&&(Oe&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=ky(),Pe.lanes|=i,Fo|=i,a)}function kg(i,s,a,u){return Cn(a,s)?a:Ar.current!==null?(i=Id(i,a,u),Cn(i,s)||(Dt=!0),i):(Zi&42)===0||(Zi&1073741824)!==0&&(Oe&261930)===0?(Dt=!0,i.memoizedState=a):(i=ky(),Pe.lanes|=i,Fo|=i,s)}function Og(i,s,a,u,g){var v=ae.p;ae.p=v!==0&&8>v?v:8;var A=$.T,w={};$.T=w,bd(i,!1,s,a);try{var U=g(),Y=$.S;if(Y!==null&&Y(w,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var W=$A(U,u);$a(i,s,W,Nn(i))}else $a(i,s,u,Nn(i))}catch(oe){$a(i,s,{then:function(){},status:"rejected",reason:oe},Nn())}finally{ae.p=v,A!==null&&w.types!==null&&(A.types=w.types),$.T=A}}function eC(){}function wd(i,s,a,u){if(i.tag!==5)throw Error(o(476));var g=Bg(i).queue;Og(i,g,s,ye,a===null?eC:function(){return Fg(i),a(u)})}function Bg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:ye},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Fg(i){var s=Bg(i);s.next===null&&(s=i.alternate.memoizedState),$a(i,s.next.queue,{},Nn())}function xd(){return Qt(fl)}function Gg(){return St().memoizedState}function qg(){return St().memoizedState}function tC(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=Nn();i=Po(a);var u=Uo(s,i,a);u!==null&&(vn(u,s,a),Ha(u,s,a)),s={cache:id()},i.payload=s;return}s=s.return}}function nC(i,s,a){var u=Nn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},qu(i)?zg(s,a):(a=Jf(i,s,a,u),a!==null&&(vn(a,i,u),Yg(a,s,u)))}function Hg(i,s,a){var u=Nn();$a(i,s,a,u)}function $a(i,s,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(qu(i))zg(s,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var A=s.lastRenderedState,w=v(A,a);if(g.hasEagerState=!0,g.eagerState=w,Cn(w,A))return Su(i,s,g,0),at===null&&Tu(),!1}catch{}finally{}if(a=Jf(i,s,g,u),a!==null)return vn(a,i,u),Yg(a,s,u),!0}return!1}function bd(i,s,a,u){if(u={lane:2,revertLane:ah(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},qu(i)){if(s)throw Error(o(479))}else s=Jf(i,a,u,2),s!==null&&vn(s,i,2)}function qu(i){var s=i.alternate;return i===Pe||s!==null&&s===Pe}function zg(i,s){Cr=Uu=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function Yg(i,s,a){if((a&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,ga(i,a)}}var Qa={readContext:Qt,use:Ou,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};Qa.useEffectEvent=yt;var Jg={readContext:Qt,use:Ou,useCallback:function(i,s){return un().memoizedState=[i,s===void 0?null:s],i},useContext:Qt,useEffect:bg,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Fu(4194308,4,Vg.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Fu(4194308,4,i,s)},useInsertionEffect:function(i,s){Fu(4,2,i,s)},useMemo:function(i,s){var a=un();s=s===void 0?null:s;var u=i();if(ks){Vn(!0);try{i()}finally{Vn(!1)}}return a.memoizedState=[u,s],u},useReducer:function(i,s,a){var u=un();if(a!==void 0){var g=a(s);if(ks){Vn(!0);try{a(s)}finally{Vn(!1)}}}else g=s;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=nC.bind(null,Pe,i),[u.memoizedState,i]},useRef:function(i){var s=un();return i={current:i},s.memoizedState=i},useState:function(i){i=Sd(i);var s=i.queue,a=Hg.bind(null,Pe,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Rd,useDeferredValue:function(i,s){var a=un();return Id(a,i,s)},useTransition:function(){var i=Sd(!1);return i=Og.bind(null,Pe,i.queue,!0,!1),un().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var u=Pe,g=un();if(qe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),at===null)throw Error(o(349));(Oe&127)!==0||hg(u,s,a)}g.memoizedState=a;var v={value:a,getSnapshot:s};return g.queue=v,bg(mg.bind(null,u,v,i),[i]),u.flags|=2048,Ir(9,{destroy:void 0},pg.bind(null,u,v,a,s),null),a},useId:function(){var i=un(),s=at.identifierPrefix;if(qe){var a=Ui,u=Pi;a=(u&~(1<<32-_t(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Lu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=QA++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:xd,useFormState:Cg,useActionState:Cg,useOptimistic:function(i){var s=un();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=bd.bind(null,Pe,!0,a),a.dispatch=s,[i,s]},useMemoCache:_d,useCacheRefresh:function(){return un().memoizedState=tC.bind(null,Pe)},useEffectEvent:function(i){var s=un(),a={impl:i};return s.memoizedState=a,function(){if((Xe&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Nd={readContext:Qt,use:Ou,useCallback:Ug,useContext:Qt,useEffect:Cd,useImperativeHandle:Pg,useInsertionEffect:Mg,useLayoutEffect:Dg,useMemo:Lg,useReducer:Bu,useRef:xg,useState:function(){return Bu(ji)},useDebugValue:Rd,useDeferredValue:function(i,s){var a=St();return kg(a,it.memoizedState,i,s)},useTransition:function(){var i=Bu(ji)[0],s=St().memoizedState;return[typeof i=="boolean"?i:Ka(i),s]},useSyncExternalStore:dg,useId:Gg,useHostTransitionStatus:xd,useFormState:Rg,useActionState:Rg,useOptimistic:function(i,s){var a=St();return vg(a,it,i,s)},useMemoCache:_d,useCacheRefresh:qg};Nd.useEffectEvent=Ng;var Kg={readContext:Qt,use:Ou,useCallback:Ug,useContext:Qt,useEffect:Cd,useImperativeHandle:Pg,useInsertionEffect:Mg,useLayoutEffect:Dg,useMemo:Lg,useReducer:Td,useRef:xg,useState:function(){return Td(ji)},useDebugValue:Rd,useDeferredValue:function(i,s){var a=St();return it===null?Id(a,i,s):kg(a,it.memoizedState,i,s)},useTransition:function(){var i=Td(ji)[0],s=St().memoizedState;return[typeof i=="boolean"?i:Ka(i),s]},useSyncExternalStore:dg,useId:Gg,useHostTransitionStatus:xd,useFormState:wg,useActionState:wg,useOptimistic:function(i,s){var a=St();return it!==null?vg(a,it,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:_d,useCacheRefresh:qg};Kg.useEffectEvent=Ng;function Md(i,s,a,u){s=i.memoizedState,a=a(u,s),a=a==null?s:E({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Dd={enqueueSetState:function(i,s,a){i=i._reactInternals;var u=Nn(),g=Po(u);g.payload=s,a!=null&&(g.callback=a),s=Uo(i,g,u),s!==null&&(vn(s,i,u),Ha(s,i,u))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var u=Nn(),g=Po(u);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Uo(i,g,u),s!==null&&(vn(s,i,u),Ha(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Nn(),u=Po(a);u.tag=2,s!=null&&(u.callback=s),s=Uo(i,u,a),s!==null&&(vn(s,i,a),Ha(s,i,a))}};function $g(i,s,a,u,g,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,v,A):s.prototype&&s.prototype.isPureReactComponent?!Ua(a,u)||!Ua(g,v):!0}function Qg(i,s,a,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==i&&Dd.enqueueReplaceState(s,s.state,null)}function Os(i,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(i=i.defaultProps){a===s&&(a=E({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function Xg(i){Eu(i)}function Wg(i){console.error(i)}function Zg(i){Eu(i)}function Hu(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function jg(i,s,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Vd(i,s,a){return a=Po(a),a.tag=3,a.payload={element:null},a.callback=function(){Hu(i,s)},a}function ey(i){return i=Po(i),i.tag=3,i}function ty(i,s,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;i.payload=function(){return g(v)},i.callback=function(){jg(s,a,u)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){jg(s,a,u),typeof g!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function iC(i,s,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&vr(s,a,g,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?tc():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Nu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),oh(i,u,g)),!1;case 22:return a.flags|=65536,u===Nu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),oh(i,u,g)),!1}throw Error(o(435,a.tag))}return oh(i,u,g),tc(),!1}if(qe)return s=In.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Zf&&(i=Error(o(422),{cause:u}),Oa(Bn(i,a)))):(u!==Zf&&(s=Error(o(423),{cause:u}),Oa(Bn(s,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Bn(u,a),g=Vd(i.stateNode,u,g),ud(i,g),vt!==4&&(vt=2)),!1;var v=Error(o(520),{cause:u});if(v=Bn(v,a),il===null?il=[v]:il.push(v),vt!==4&&(vt=2),s===null)return!0;u=Bn(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=Vd(a.stateNode,u,i),ud(a,i),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Go===null||!Go.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=ey(g),ty(g,i,a,u),ud(a,g),!1}a=a.return}while(a!==null);return!1}var Pd=Error(o(461)),Dt=!1;function Xt(i,s,a,u){s.child=i===null?sg(s,null,a,u):Ls(s,i.child,a,u)}function ny(i,s,a,u,g){a=a.render;var v=s.ref;if("ref"in u){var A={};for(var w in u)w!=="ref"&&(A[w]=u[w])}else A=u;return Ds(s),u=md(i,s,a,A,v,g),w=gd(),i!==null&&!Dt?(yd(i,s,g),eo(i,s,g)):(qe&&w&&Xf(s),s.flags|=1,Xt(i,s,u,g),s.child)}function iy(i,s,a,u,g){if(i===null){var v=a.type;return typeof v=="function"&&!Kf(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,oy(i,s,v,u,g)):(i=Cu(a.type,null,u,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(v=i.child,!qd(i,g)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:Ua,a(A,u)&&i.ref===s.ref)return eo(i,s,g)}return s.flags|=1,i=$i(v,u),i.ref=s.ref,i.return=s,s.child=i}function oy(i,s,a,u,g){if(i!==null){var v=i.memoizedProps;if(Ua(v,u)&&i.ref===s.ref)if(Dt=!1,s.pendingProps=u=v,qd(i,g))(i.flags&131072)!==0&&(Dt=!0);else return s.lanes=i.lanes,eo(i,s,g)}return Ud(i,s,a,u,g)}function sy(i,s,a,u){var g=u.children,v=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(u=s.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~v}else u=0,s.child=null;return ry(i,s,v,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&xu(s,v!==null?v.cachePool:null),v!==null?lg(s,v):fd(),ug(s);else return u=s.lanes=536870912,ry(i,s,v!==null?v.baseLanes|a:a,a,u)}else v!==null?(xu(s,v.cachePool),lg(s,v),ko(),s.memoizedState=null):(i!==null&&xu(s,null),fd(),ko());return Xt(i,s,g,a),s.child}function Xa(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ry(i,s,a,u,g){var v=sd();return v=v===null?null:{parent:Nt._currentValue,pool:v},s.memoizedState={baseLanes:a,cachePool:v},i!==null&&xu(s,null),fd(),ug(s),i!==null&&vr(i,s,u,!0),s.childLanes=g,null}function zu(i,s){return s=Ju({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function ay(i,s,a){return Ls(s,i.child,null,a),i=zu(s,s.pendingProps),i.flags|=2,wn(s),s.memoizedState=null,i}function oC(i,s,a){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(qe){if(u.mode==="hidden")return i=zu(s,u),s.lanes=536870912,Xa(null,i);if(hd(s),(i=ut)?(i=_v(i,qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:bo!==null?{id:Pi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=zm(i),a.return=s,s.child=a,$t=s,ut=null)):i=null,i===null)throw Mo(s);return s.lanes=536870912,null}return zu(s,u)}var v=i.memoizedState;if(v!==null){var A=v.dehydrated;if(hd(s),g)if(s.flags&256)s.flags&=-257,s=ay(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(Dt||vr(i,s,a,!1),g=(a&i.childLanes)!==0,Dt||g){if(u=at,u!==null&&(A=ya(u,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,xs(i,A),vn(u,i,A),Pd;tc(),s=ay(i,s,a)}else i=v.treeContext,ut=zn(A.nextSibling),$t=s,qe=!0,No=null,qn=!1,i!==null&&Km(s,i),s=zu(s,u),s.flags|=4096;return s}return i=$i(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Yu(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function Ud(i,s,a,u,g){return Ds(s),a=md(i,s,a,u,void 0,g),u=gd(),i!==null&&!Dt?(yd(i,s,g),eo(i,s,g)):(qe&&u&&Xf(s),s.flags|=1,Xt(i,s,a,g),s.child)}function ly(i,s,a,u,g,v){return Ds(s),s.updateQueue=null,a=fg(s,u,a,g),cg(i),u=gd(),i!==null&&!Dt?(yd(i,s,v),eo(i,s,v)):(qe&&u&&Xf(s),s.flags|=1,Xt(i,s,a,v),s.child)}function uy(i,s,a,u,g){if(Ds(s),s.stateNode===null){var v=pr,A=a.contextType;typeof A=="object"&&A!==null&&(v=Qt(A)),v=new a(u,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Dd,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=u,v.state=s.memoizedState,v.refs={},ad(s),A=a.contextType,v.context=typeof A=="object"&&A!==null?Qt(A):pr,v.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Md(s,a,A,u),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Dd.enqueueReplaceState(v,v.state,null),Ya(s,u,v,g),za(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){v=s.stateNode;var w=s.memoizedProps,U=Os(a,w);v.props=U;var Y=v.context,W=a.contextType;A=pr,typeof W=="object"&&W!==null&&(A=Qt(W));var oe=a.getDerivedStateFromProps;W=typeof oe=="function"||typeof v.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,W||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w||Y!==A)&&Qg(s,v,u,A),Vo=!1;var J=s.memoizedState;v.state=J,Ya(s,u,v,g),za(),Y=s.memoizedState,w||J!==Y||Vo?(typeof oe=="function"&&(Md(s,a,oe,u),Y=s.memoizedState),(U=Vo||$g(s,a,U,u,J,Y,A))?(W||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=Y),v.props=u,v.state=Y,v.context=A,u=U):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{v=s.stateNode,ld(i,s),A=s.memoizedProps,W=Os(a,A),v.props=W,oe=s.pendingProps,J=v.context,Y=a.contextType,U=pr,typeof Y=="object"&&Y!==null&&(U=Qt(Y)),w=a.getDerivedStateFromProps,(Y=typeof w=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==oe||J!==U)&&Qg(s,v,u,U),Vo=!1,J=s.memoizedState,v.state=J,Ya(s,u,v,g),za();var X=s.memoizedState;A!==oe||J!==X||Vo||i!==null&&i.dependencies!==null&&Iu(i.dependencies)?(typeof w=="function"&&(Md(s,a,w,u),X=s.memoizedState),(W=Vo||$g(s,a,W,u,J,X,U)||i!==null&&i.dependencies!==null&&Iu(i.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,X,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,X,U)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=X),v.props=u,v.state=X,v.context=U,u=W):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),u=!1)}return v=u,Yu(i,s),u=(s.flags&128)!==0,v||u?(v=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,i!==null&&u?(s.child=Ls(s,i.child,null,g),s.child=Ls(s,null,a,g)):Xt(i,s,a,g),s.memoizedState=v.state,i=s.child):i=eo(i,s,g),i}function cy(i,s,a,u){return Ns(),s.flags|=256,Xt(i,s,a,u),s.child}var Ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kd(i){return{baseLanes:i,cachePool:jm()}}function Od(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=bn),i}function fy(i,s,a){var u=s.pendingProps,g=!1,v=(s.flags&128)!==0,A;if((A=v)||(A=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),A&&(g=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(qe){if(g?Lo(s):ko(),(i=ut)?(i=_v(i,qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:bo!==null?{id:Pi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=zm(i),a.return=s,s.child=a,$t=s,ut=null)):i=null,i===null)throw Mo(s);return Eh(i)?s.lanes=32:s.lanes=536870912,null}var w=u.children;return u=u.fallback,g?(ko(),g=s.mode,w=Ju({mode:"hidden",children:w},g),u=bs(u,g,a,null),w.return=s,u.return=s,w.sibling=u,s.child=w,u=s.child,u.memoizedState=kd(a),u.childLanes=Od(i,A,a),s.memoizedState=Ld,Xa(null,u)):(Lo(s),Bd(s,w))}var U=i.memoizedState;if(U!==null&&(w=U.dehydrated,w!==null)){if(v)s.flags&256?(Lo(s),s.flags&=-257,s=Fd(i,s,a)):s.memoizedState!==null?(ko(),s.child=i.child,s.flags|=128,s=null):(ko(),w=u.fallback,g=s.mode,u=Ju({mode:"visible",children:u.children},g),w=bs(w,g,a,null),w.flags|=2,u.return=s,w.return=s,u.sibling=w,s.child=u,Ls(s,i.child,null,a),u=s.child,u.memoizedState=kd(a),u.childLanes=Od(i,A,a),s.memoizedState=Ld,s=Xa(null,u));else if(Lo(s),Eh(w)){if(A=w.nextSibling&&w.nextSibling.dataset,A)var Y=A.dgst;A=Y,u=Error(o(419)),u.stack="",u.digest=A,Oa({value:u,source:null,stack:null}),s=Fd(i,s,a)}else if(Dt||vr(i,s,a,!1),A=(a&i.childLanes)!==0,Dt||A){if(A=at,A!==null&&(u=ya(A,a),u!==0&&u!==U.retryLane))throw U.retryLane=u,xs(i,u),vn(A,i,u),Pd;_h(w)||tc(),s=Fd(i,s,a)}else _h(w)?(s.flags|=192,s.child=i.child,s=null):(i=U.treeContext,ut=zn(w.nextSibling),$t=s,qe=!0,No=null,qn=!1,i!==null&&Km(s,i),s=Bd(s,u.children),s.flags|=4096);return s}return g?(ko(),w=u.fallback,g=s.mode,U=i.child,Y=U.sibling,u=$i(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,Y!==null?w=$i(Y,w):(w=bs(w,g,a,null),w.flags|=2),w.return=s,u.return=s,u.sibling=w,s.child=u,Xa(null,u),u=s.child,w=i.child.memoizedState,w===null?w=kd(a):(g=w.cachePool,g!==null?(U=Nt._currentValue,g=g.parent!==U?{parent:U,pool:U}:g):g=jm(),w={baseLanes:w.baseLanes|a,cachePool:g}),u.memoizedState=w,u.childLanes=Od(i,A,a),s.memoizedState=Ld,Xa(i.child,u)):(Lo(s),a=i.child,i=a.sibling,a=$i(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=a,s.memoizedState=null,a)}function Bd(i,s){return s=Ju({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Ju(i,s){return i=Rn(22,i,null,s),i.lanes=0,i}function Fd(i,s,a){return Ls(s,i.child,null,a),i=Bd(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function dy(i,s,a){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),td(i.return,s,a)}function Gd(i,s,a,u,g,v){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:v}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=a,A.tailMode=g,A.treeForkCount=v)}function hy(i,s,a){var u=s.pendingProps,g=u.revealOrder,v=u.tail;u=u.children;var A=Tt.current,w=(A&2)!==0;if(w?(A=A&1|2,s.flags|=128):A&=1,de(Tt,A),Xt(i,s,u,a),u=qe?ka:0,!w&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&dy(i,a,s);else if(i.tag===19)dy(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=s.child,g=null;a!==null;)i=a.alternate,i!==null&&Pu(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),Gd(s,!1,g,a,v,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&Pu(i)===null){s.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}Gd(s,!0,a,null,v,u);break;case"together":Gd(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function eo(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),Fo|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(vr(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,a=$i(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=$i(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function qd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Iu(i)))}function sC(i,s,a){switch(s.tag){case 3:lt(s,s.stateNode.containerInfo),Do(s,Nt,i.memoizedState.cache),Ns();break;case 27:case 5:Qn(s);break;case 4:lt(s,s.stateNode.containerInfo);break;case 10:Do(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,hd(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Lo(s),s.flags|=128,null):(a&s.child.childLanes)!==0?fy(i,s,a):(Lo(s),i=eo(i,s,a),i!==null?i.sibling:null);Lo(s);break;case 19:var g=(i.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(vr(i,s,a,!1),u=(a&s.childLanes)!==0),g){if(u)return hy(i,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),de(Tt,Tt.current),u)break;return null;case 22:return s.lanes=0,sy(i,s,a,s.pendingProps);case 24:Do(s,Nt,i.memoizedState.cache)}return eo(i,s,a)}function py(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)Dt=!0;else{if(!qd(i,a)&&(s.flags&128)===0)return Dt=!1,sC(i,s,a);Dt=(i.flags&131072)!==0}else Dt=!1,qe&&(s.flags&1048576)!==0&&Jm(s,ka,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=Ps(s.elementType),s.type=i,typeof i=="function")Kf(i)?(u=Os(i,u),s.tag=1,s=uy(null,s,i,u,a)):(s.tag=0,s=Ud(null,s,i,u,a));else{if(i!=null){var g=i.$$typeof;if(g===re){s.tag=11,s=ny(null,s,i,u,a);break e}else if(g===D){s.tag=14,s=iy(null,s,i,u,a);break e}}throw s=j(i)||i,Error(o(306,s,""))}}return s;case 0:return Ud(i,s,s.type,s.pendingProps,a);case 1:return u=s.type,g=Os(u,s.pendingProps),uy(i,s,u,g,a);case 3:e:{if(lt(s,s.stateNode.containerInfo),i===null)throw Error(o(387));u=s.pendingProps;var v=s.memoizedState;g=v.element,ld(i,s),Ya(s,u,null,a);var A=s.memoizedState;if(u=A.cache,Do(s,Nt,u),u!==v.cache&&nd(s,[Nt],a,!0),za(),u=A.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=cy(i,s,u,a);break e}else if(u!==g){g=Bn(Error(o(424)),s),Oa(g),s=cy(i,s,u,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ut=zn(i.firstChild),$t=s,qe=!0,No=null,qn=!0,a=sg(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ns(),u===g){s=eo(i,s,a);break e}Xt(i,s,u,a)}s=s.child}return s;case 26:return Yu(i,s),i===null?(a=Rv(s.type,null,s.pendingProps,null))?s.memoizedState=a:qe||(a=s.type,i=s.pendingProps,u=lc(Te.current).createElement(a),u[wt]=s,u[Gt]=i,Wt(u,a,i),xt(u),s.stateNode=u):s.memoizedState=Rv(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Qn(s),i===null&&qe&&(u=s.stateNode=Sv(s.type,s.pendingProps,Te.current),$t=s,qn=!0,g=ut,Yo(s.type)?(Th=g,ut=zn(u.firstChild)):ut=g),Xt(i,s,s.pendingProps.children,a),Yu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&qe&&((g=u=ut)&&(u=UC(u,s.type,s.pendingProps,qn),u!==null?(s.stateNode=u,$t=s,ut=zn(u.firstChild),qn=!1,g=!0):g=!1),g||Mo(s)),Qn(s),g=s.type,v=s.pendingProps,A=i!==null?i.memoizedProps:null,u=v.children,gh(g,v)?u=null:A!==null&&gh(g,A)&&(s.flags|=32),s.memoizedState!==null&&(g=md(i,s,XA,null,null,a),fl._currentValue=g),Yu(i,s),Xt(i,s,u,a),s.child;case 6:return i===null&&qe&&((i=a=ut)&&(a=LC(a,s.pendingProps,qn),a!==null?(s.stateNode=a,$t=s,ut=null,i=!0):i=!1),i||Mo(s)),null;case 13:return fy(i,s,a);case 4:return lt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Ls(s,null,u,a):Xt(i,s,u,a),s.child;case 11:return ny(i,s,s.type,s.pendingProps,a);case 7:return Xt(i,s,s.pendingProps,a),s.child;case 8:return Xt(i,s,s.pendingProps.children,a),s.child;case 12:return Xt(i,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,Do(s,s.type,u.value),Xt(i,s,u.children,a),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Ds(s),g=Qt(g),u=u(g),s.flags|=1,Xt(i,s,u,a),s.child;case 14:return iy(i,s,s.type,s.pendingProps,a);case 15:return oy(i,s,s.type,s.pendingProps,a);case 19:return hy(i,s,a);case 31:return oC(i,s,a);case 22:return sy(i,s,a,s.pendingProps);case 24:return Ds(s),u=Qt(Nt),i===null?(g=sd(),g===null&&(g=at,v=id(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),s.memoizedState={parent:u,cache:g},ad(s),Do(s,Nt,g)):((i.lanes&a)!==0&&(ld(i,s),Ya(s,null,null,a),za()),g=i.memoizedState,v=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Do(s,Nt,u)):(u=v.cache,Do(s,Nt,u),u!==g.cache&&nd(s,[Nt],a,!0))),Xt(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function to(i){i.flags|=4}function Hd(i,s,a,u,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(Gy())i.flags|=8192;else throw Us=Nu,rd}else i.flags&=-16777217}function my(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Nv(s))if(Gy())i.flags|=8192;else throw Us=Nu,rd}function Ku(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?jl():536870912,i.lanes|=s,Nr|=s)}function Wa(i,s){if(!qe)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ct(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(s)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=a,s}function rC(i,s,a){var u=s.pendingProps;switch(Wf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(s),null;case 1:return ct(s),null;case 3:return a=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Wi(Nt),We(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(yr(s)?to(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jf())),ct(s),null;case 26:var g=s.type,v=s.memoizedState;return i===null?(to(s),v!==null?(ct(s),my(s,v)):(ct(s),Hd(s,g,null,u,a))):v?v!==i.memoizedState?(to(s),ct(s),my(s,v)):(ct(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&to(s),ct(s),Hd(s,g,i,u,a)),null;case 27:if(Xn(s),a=Te.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&to(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return ct(s),null}i=ee.current,yr(s)?$m(s):(i=Sv(g,u,a),s.stateNode=i,to(s))}return ct(s),null;case 5:if(Xn(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&to(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return ct(s),null}if(v=ee.current,yr(s))$m(s);else{var A=lc(Te.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?A.createElement(g,{is:u.is}):A.createElement(g)}}v[wt]=s,v[Gt]=u;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=v;e:switch(Wt(v,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&to(s)}}return ct(s),Hd(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&to(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(i=Te.current,yr(s)){if(i=s.stateNode,a=s.memoizedProps,u=null,g=$t,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[wt]=s,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||fv(i.nodeValue,a)),i||Mo(s,!0)}else i=lc(i).createTextNode(u),i[wt]=s,s.stateNode=i}return ct(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(u=yr(s),a!==null){if(i===null){if(!u)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[wt]=s}else Ns(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ct(s),i=!1}else a=jf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(wn(s),s):(wn(s),null);if((s.flags&128)!==0)throw Error(o(558))}return ct(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=yr(s),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[wt]=s}else Ns(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ct(s),g=!1}else g=jf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(wn(s),s):(wn(s),null)}return wn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==g&&(u.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),Ku(s,s.updateQueue),ct(s),null);case 4:return We(),i===null&&fh(s.stateNode.containerInfo),ct(s),null;case 10:return Wi(s.type),ct(s),null;case 19:if(te(Tt),u=s.memoizedState,u===null)return ct(s),null;if(g=(s.flags&128)!==0,v=u.rendering,v===null)if(g)Wa(u,!1);else{if(vt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(v=Pu(i),v!==null){for(s.flags|=128,Wa(u,!1),i=v.updateQueue,s.updateQueue=i,Ku(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)Hm(a,i),a=a.sibling;return de(Tt,Tt.current&1|2),qe&&Qi(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&an()>Zu&&(s.flags|=128,g=!0,Wa(u,!1),s.lanes=4194304)}else{if(!g)if(i=Pu(v),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Ku(s,i),Wa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!qe)return ct(s),null}else 2*an()-u.renderingStartTime>Zu&&a!==536870912&&(s.flags|=128,g=!0,Wa(u,!1),s.lanes=4194304);u.isBackwards?(v.sibling=s.child,s.child=v):(i=u.last,i!==null?i.sibling=v:s.child=v,u.last=v)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=an(),i.sibling=null,a=Tt.current,de(Tt,g?a&1|2:a&1),qe&&Qi(s,u.treeForkCount),i):(ct(s),null);case 22:case 23:return wn(s),dd(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(ct(s),s.subtreeFlags&6&&(s.flags|=8192)):ct(s),a=s.updateQueue,a!==null&&Ku(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),i!==null&&te(Vs),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Wi(Nt),ct(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function aC(i,s){switch(Wf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Wi(Nt),We(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Xn(s),null;case 31:if(s.memoizedState!==null){if(wn(s),s.alternate===null)throw Error(o(340));Ns()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(wn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Ns()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return te(Tt),null;case 4:return We(),null;case 10:return Wi(s.type),null;case 22:case 23:return wn(s),dd(),i!==null&&te(Vs),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Wi(Nt),null;case 25:return null;default:return null}}function gy(i,s){switch(Wf(s),s.tag){case 3:Wi(Nt),We();break;case 26:case 27:case 5:Xn(s);break;case 4:We();break;case 31:s.memoizedState!==null&&wn(s);break;case 13:wn(s);break;case 19:te(Tt);break;case 10:Wi(s.type);break;case 22:case 23:wn(s),dd(),i!==null&&te(Vs);break;case 24:Wi(Nt)}}function Za(i,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&i)===i){u=void 0;var v=a.create,A=a.inst;u=v(),A.destroy=u}a=a.next}while(a!==g)}}catch(w){tt(s,s.return,w)}}function Oo(i,s,a){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var v=g.next;u=v;do{if((u.tag&i)===i){var A=u.inst,w=A.destroy;if(w!==void 0){A.destroy=void 0,g=s;var U=a,Y=w;try{Y()}catch(W){tt(g,U,W)}}}u=u.next}while(u!==v)}}catch(W){tt(s,s.return,W)}}function yy(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{ag(s,a)}catch(u){tt(i,i.return,u)}}}function vy(i,s,a){a.props=Os(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){tt(i,s,u)}}function ja(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(g){tt(i,s,g)}}function Li(i,s){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){tt(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){tt(i,s,g)}else a.current=null}function _y(i){var s=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){tt(i,i.return,g)}}function zd(i,s,a){try{var u=i.stateNode;bC(u,i.type,a,s),u[Gt]=s}catch(g){tt(i,i.return,g)}}function Ey(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Yo(i.type)||i.tag===4}function Yd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ey(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Yo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jd(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ti));else if(u!==4&&(u===27&&Yo(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(Jd(i,s,a),i=i.sibling;i!==null;)Jd(i,s,a),i=i.sibling}function $u(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(u!==4&&(u===27&&Yo(i.type)&&(a=i.stateNode),i=i.child,i!==null))for($u(i,s,a),i=i.sibling;i!==null;)$u(i,s,a),i=i.sibling}function Ty(i){var s=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);Wt(s,u,a),s[wt]=i,s[Gt]=a}catch(v){tt(i,i.return,v)}}var no=!1,Vt=!1,Kd=!1,Sy=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function lC(i,s){if(i=i.containerInfo,ph=mc,i=Pm(i),Ff(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,w=-1,U=-1,Y=0,W=0,oe=i,J=null;t:for(;;){for(var X;oe!==a||g!==0&&oe.nodeType!==3||(w=A+g),oe!==v||u!==0&&oe.nodeType!==3||(U=A+u),oe.nodeType===3&&(A+=oe.nodeValue.length),(X=oe.firstChild)!==null;)J=oe,oe=X;for(;;){if(oe===i)break t;if(J===a&&++Y===g&&(w=A),J===v&&++W===u&&(U=A),(X=oe.nextSibling)!==null)break;oe=J,J=oe.parentNode}oe=X}a=w===-1||U===-1?null:{start:w,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(mh={focusedElem:i,selectionRange:a},mc=!1,Ht=s;Ht!==null;)if(s=Ht,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Ht=i;else for(;Ht!==null;){switch(s=Ht,v=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=s,g=v.memoizedProps,v=v.memoizedState,u=a.stateNode;try{var ge=Os(a.type,g);i=u.getSnapshotBeforeUpdate(ge,v),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ce){tt(a,a.return,Ce)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)vh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":vh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,Ht=i;break}Ht=s.return}}function Ay(i,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:oo(i,a),u&4&&Za(5,a);break;case 1:if(oo(i,a),u&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(A){tt(a,a.return,A)}else{var g=Os(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){tt(a,a.return,A)}}u&64&&yy(a),u&512&&ja(a,a.return);break;case 3:if(oo(i,a),u&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{ag(i,s)}catch(A){tt(a,a.return,A)}}break;case 27:s===null&&u&4&&Ty(a);case 26:case 5:oo(i,a),s===null&&u&4&&_y(a),u&512&&ja(a,a.return);break;case 12:oo(i,a);break;case 31:oo(i,a),u&4&&Iy(i,a);break;case 13:oo(i,a),u&4&&wy(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=yC.bind(null,a),kC(i,a))));break;case 22:if(u=a.memoizedState!==null||no,!u){s=s!==null&&s.memoizedState!==null||Vt,g=no;var v=Vt;no=u,(Vt=s)&&!v?so(i,a,(a.subtreeFlags&8772)!==0):oo(i,a),no=g,Vt=v}break;case 30:break;default:oo(i,a)}}function Cy(i){var s=i.alternate;s!==null&&(i.alternate=null,Cy(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&er(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var pt=null,pn=!1;function io(i,s,a){for(a=a.child;a!==null;)Ry(i,s,a),a=a.sibling}function Ry(i,s,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Wn,a)}catch{}switch(a.tag){case 26:Vt||Li(a,s),io(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Vt||Li(a,s);var u=pt,g=pn;Yo(a.type)&&(pt=a.stateNode,pn=!1),io(i,s,a),ll(a.stateNode),pt=u,pn=g;break;case 5:Vt||Li(a,s);case 6:if(u=pt,g=pn,pt=null,io(i,s,a),pt=u,pn=g,pt!==null)if(pn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(v){tt(a,s,v)}else try{pt.removeChild(a.stateNode)}catch(v){tt(a,s,v)}break;case 18:pt!==null&&(pn?(i=pt,yv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Or(i)):yv(pt,a.stateNode));break;case 4:u=pt,g=pn,pt=a.stateNode.containerInfo,pn=!0,io(i,s,a),pt=u,pn=g;break;case 0:case 11:case 14:case 15:Oo(2,a,s),Vt||Oo(4,a,s),io(i,s,a);break;case 1:Vt||(Li(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&vy(a,s,u)),io(i,s,a);break;case 21:io(i,s,a);break;case 22:Vt=(u=Vt)||a.memoizedState!==null,io(i,s,a),Vt=u;break;default:io(i,s,a)}}function Iy(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Or(i)}catch(a){tt(s,s.return,a)}}}function wy(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Or(i)}catch(a){tt(s,s.return,a)}}function uC(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Sy),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Sy),s;default:throw Error(o(435,i.tag))}}function Qu(i,s){var a=uC(i);s.forEach(function(u){if(!a.has(u)){a.add(u);var g=vC.bind(null,i,u);u.then(g,g)}})}function mn(i,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],v=i,A=s,w=A;e:for(;w!==null;){switch(w.tag){case 27:if(Yo(w.type)){pt=w.stateNode,pn=!1;break e}break;case 5:pt=w.stateNode,pn=!1;break e;case 3:case 4:pt=w.stateNode.containerInfo,pn=!0;break e}w=w.return}if(pt===null)throw Error(o(160));Ry(v,A,g),pt=null,pn=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)xy(s,i),s=s.sibling}var ai=null;function xy(i,s){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:mn(s,i),gn(i),u&4&&(Oo(3,i,i.return),Za(3,i),Oo(5,i,i.return));break;case 1:mn(s,i),gn(i),u&512&&(Vt||a===null||Li(a,a.return)),u&64&&no&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=ai;if(mn(s,i),gn(i),u&512&&(Vt||a===null||Li(a,a.return)),u&4){var v=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Si]||v[wt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(u),g.head.insertBefore(v,g.querySelector("head > title"))),Wt(v,u,a),v[wt]=i,xt(v),u=v;break e;case"link":var A=xv("link","href",g).get(u+(a.href||""));if(A){for(var w=0;w<A.length;w++)if(v=A[w],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(w,1);break t}}v=g.createElement(u),Wt(v,u,a),g.head.appendChild(v);break;case"meta":if(A=xv("meta","content",g).get(u+(a.content||""))){for(w=0;w<A.length;w++)if(v=A[w],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(w,1);break t}}v=g.createElement(u),Wt(v,u,a),g.head.appendChild(v);break;default:throw Error(o(468,u))}v[wt]=i,xt(v),u=v}i.stateNode=u}else bv(g,i.type,i.stateNode);else i.stateNode=wv(g,u,i.memoizedProps);else v!==u?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,u===null?bv(g,i.type,i.stateNode):wv(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&zd(i,i.memoizedProps,a.memoizedProps)}break;case 27:mn(s,i),gn(i),u&512&&(Vt||a===null||Li(a,a.return)),a!==null&&u&4&&zd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(mn(s,i),gn(i),u&512&&(Vt||a===null||Li(a,a.return)),i.flags&32){g=i.stateNode;try{hn(g,"")}catch(ge){tt(i,i.return,ge)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,zd(i,g,a!==null?a.memoizedProps:g)),u&1024&&(Kd=!0);break;case 6:if(mn(s,i),gn(i),u&4){if(i.stateNode===null)throw Error(o(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(ge){tt(i,i.return,ge)}}break;case 3:if(fc=null,g=ai,ai=uc(s.containerInfo),mn(s,i),ai=g,gn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Or(s.containerInfo)}catch(ge){tt(i,i.return,ge)}Kd&&(Kd=!1,by(i));break;case 4:u=ai,ai=uc(i.stateNode.containerInfo),mn(s,i),gn(i),ai=u;break;case 12:mn(s,i),gn(i);break;case 31:mn(s,i),gn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Qu(i,u)));break;case 13:mn(s,i),gn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Wu=an()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Qu(i,u)));break;case 22:g=i.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,Y=no,W=Vt;if(no=Y||g,Vt=W||U,mn(s,i),Vt=W,no=Y,gn(i),u&8192)e:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(a===null||U||no||Vt||Bs(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){U=a=s;try{if(v=U.stateNode,g)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{w=U.stateNode;var oe=U.memoizedProps.style,J=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;w.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ge){tt(U,U.return,ge)}}}else if(s.tag===6){if(a===null){U=s;try{U.stateNode.nodeValue=g?"":U.memoizedProps}catch(ge){tt(U,U.return,ge)}}}else if(s.tag===18){if(a===null){U=s;try{var X=U.stateNode;g?vv(X,!0):vv(U.stateNode,!1)}catch(ge){tt(U,U.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Qu(i,a))));break;case 19:mn(s,i),gn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Qu(i,u)));break;case 30:break;case 21:break;default:mn(s,i),gn(i)}}function gn(i){var s=i.flags;if(s&2){try{for(var a,u=i.return;u!==null;){if(Ey(u)){a=u;break}u=u.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var g=a.stateNode,v=Yd(i);$u(i,v,g);break;case 5:var A=a.stateNode;a.flags&32&&(hn(A,""),a.flags&=-33);var w=Yd(i);$u(i,w,A);break;case 3:case 4:var U=a.stateNode.containerInfo,Y=Yd(i);Jd(i,Y,U);break;default:throw Error(o(161))}}catch(W){tt(i,i.return,W)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function by(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;by(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function oo(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ay(i,s.alternate,s),s=s.sibling}function Bs(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Oo(4,s,s.return),Bs(s);break;case 1:Li(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&vy(s,s.return,a),Bs(s);break;case 27:ll(s.stateNode);case 26:case 5:Li(s,s.return),Bs(s);break;case 22:s.memoizedState===null&&Bs(s);break;case 30:Bs(s);break;default:Bs(s)}i=i.sibling}}function so(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=i,v=s,A=v.flags;switch(v.tag){case 0:case 11:case 15:so(g,v,a),Za(4,v);break;case 1:if(so(g,v,a),u=v,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Y){tt(u,u.return,Y)}if(u=v,g=u.updateQueue,g!==null){var w=u.stateNode;try{var U=g.shared.hiddenCallbacks;if(U!==null)for(g.shared.hiddenCallbacks=null,g=0;g<U.length;g++)rg(U[g],w)}catch(Y){tt(u,u.return,Y)}}a&&A&64&&yy(v),ja(v,v.return);break;case 27:Ty(v);case 26:case 5:so(g,v,a),a&&u===null&&A&4&&_y(v),ja(v,v.return);break;case 12:so(g,v,a);break;case 31:so(g,v,a),a&&A&4&&Iy(g,v);break;case 13:so(g,v,a),a&&A&4&&wy(g,v);break;case 22:v.memoizedState===null&&so(g,v,a),ja(v,v.return);break;case 30:break;default:so(g,v,a)}s=s.sibling}}function $d(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Ba(a))}function Qd(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ba(i))}function li(i,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ny(i,s,a,u),s=s.sibling}function Ny(i,s,a,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:li(i,s,a,u),g&2048&&Za(9,s);break;case 1:li(i,s,a,u);break;case 3:li(i,s,a,u),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ba(i)));break;case 12:if(g&2048){li(i,s,a,u),i=s.stateNode;try{var v=s.memoizedProps,A=v.id,w=v.onPostCommit;typeof w=="function"&&w(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){tt(s,s.return,U)}}else li(i,s,a,u);break;case 31:li(i,s,a,u);break;case 13:li(i,s,a,u);break;case 23:break;case 22:v=s.stateNode,A=s.alternate,s.memoizedState!==null?v._visibility&2?li(i,s,a,u):el(i,s):v._visibility&2?li(i,s,a,u):(v._visibility|=2,wr(i,s,a,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&$d(A,s);break;case 24:li(i,s,a,u),g&2048&&Qd(s.alternate,s);break;default:li(i,s,a,u)}}function wr(i,s,a,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=i,A=s,w=a,U=u,Y=A.flags;switch(A.tag){case 0:case 11:case 15:wr(v,A,w,U,g),Za(8,A);break;case 23:break;case 22:var W=A.stateNode;A.memoizedState!==null?W._visibility&2?wr(v,A,w,U,g):el(v,A):(W._visibility|=2,wr(v,A,w,U,g)),g&&Y&2048&&$d(A.alternate,A);break;case 24:wr(v,A,w,U,g),g&&Y&2048&&Qd(A.alternate,A);break;default:wr(v,A,w,U,g)}s=s.sibling}}function el(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,u=s,g=u.flags;switch(u.tag){case 22:el(a,u),g&2048&&$d(u.alternate,u);break;case 24:el(a,u),g&2048&&Qd(u.alternate,u);break;default:el(a,u)}s=s.sibling}}var tl=8192;function xr(i,s,a){if(i.subtreeFlags&tl)for(i=i.child;i!==null;)My(i,s,a),i=i.sibling}function My(i,s,a){switch(i.tag){case 26:xr(i,s,a),i.flags&tl&&i.memoizedState!==null&&QC(a,ai,i.memoizedState,i.memoizedProps);break;case 5:xr(i,s,a);break;case 3:case 4:var u=ai;ai=uc(i.stateNode.containerInfo),xr(i,s,a),ai=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=tl,tl=16777216,xr(i,s,a),tl=u):xr(i,s,a));break;default:xr(i,s,a)}}function Dy(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function nl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Ht=u,Py(u,i)}Dy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Vy(i),i=i.sibling}function Vy(i){switch(i.tag){case 0:case 11:case 15:nl(i),i.flags&2048&&Oo(9,i,i.return);break;case 3:nl(i);break;case 12:nl(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Xu(i)):nl(i);break;default:nl(i)}}function Xu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Ht=u,Py(u,i)}Dy(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Oo(8,s,s.return),Xu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Xu(s));break;default:Xu(s)}i=i.sibling}}function Py(i,s){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Oo(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ba(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ht=u;else e:for(a=i;Ht!==null;){u=Ht;var g=u.sibling,v=u.return;if(Cy(u),u===a){Ht=null;break e}if(g!==null){g.return=v,Ht=g;break e}Ht=v}}}var cC={getCacheForType:function(i){var s=Qt(Nt),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return Qt(Nt).controller.signal}},fC=typeof WeakMap=="function"?WeakMap:Map,Xe=0,at=null,Le=null,Oe=0,et=0,xn=null,Bo=!1,br=!1,Xd=!1,ro=0,vt=0,Fo=0,Fs=0,Wd=0,bn=0,Nr=0,il=null,yn=null,Zd=!1,Wu=0,Uy=0,Zu=1/0,ju=null,Go=null,kt=0,qo=null,Mr=null,ao=0,jd=0,eh=null,Ly=null,ol=0,th=null;function Nn(){return(Xe&2)!==0&&Oe!==0?Oe&-Oe:$.T!==null?ah():eu()}function ky(){if(bn===0)if((Oe&536870912)===0||qe){var i=hs;hs<<=1,(hs&3932160)===0&&(hs=262144),bn=i}else bn=536870912;return i=In.current,i!==null&&(i.flags|=32),bn}function vn(i,s,a){(i===at&&(et===2||et===9)||i.cancelPendingCommit!==null)&&(Dr(i,0),Ho(i,Oe,bn,!1)),ps(i,a),((Xe&2)===0||i!==at)&&(i===at&&((Xe&2)===0&&(Fs|=a),vt===4&&Ho(i,Oe,bn,!1)),ki(i))}function Oy(i,s,a){if((Xe&6)!==0)throw Error(o(327));var u=!a&&(s&127)===0&&(s&i.expiredLanes)===0||Zn(i,s),g=u?pC(i,s):ih(i,s,!0),v=u;do{if(g===0){br&&!u&&Ho(i,s,0,!1);break}else{if(a=i.current.alternate,v&&!dC(a)){g=ih(i,s,!1),v=!1;continue}if(g===2){if(v=s,i.errorRecoveryDisabledLanes&v)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var w=i;g=il;var U=w.current.memoizedState.isDehydrated;if(U&&(Dr(w,A).flags|=256),A=ih(w,A,!1),A!==2){if(Xd&&!U){w.errorRecoveryDisabledLanes|=v,Fs|=v,g=4;break e}v=yn,yn=g,v!==null&&(yn===null?yn=v:yn.push.apply(yn,v))}g=A}if(v=!1,g!==2)continue}}if(g===1){Dr(i,0),Ho(i,s,0,!0);break}e:{switch(u=i,v=g,v){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Ho(u,s,bn,!Bo);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=Wu+300-an(),10<g)){if(Ho(u,s,bn,!Bo),_i(u,0,!0)!==0)break e;ao=s,u.timeoutHandle=mv(By.bind(null,u,a,yn,ju,Zd,s,bn,Fs,Nr,Bo,v,"Throttled",-0,0),g);break e}By(u,a,yn,ju,Zd,s,bn,Fs,Nr,Bo,v,null,-0,0)}}break}while(!0);ki(i)}function By(i,s,a,u,g,v,A,w,U,Y,W,oe,J,X){if(i.timeoutHandle=-1,oe=s.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},My(s,v,oe);var ge=(v&62914560)===v?Wu-an():(v&4194048)===v?Uy-an():0;if(ge=XC(oe,ge),ge!==null){ao=v,i.cancelPendingCommit=ge(Ky.bind(null,i,s,v,a,u,g,A,w,U,W,oe,null,J,X)),Ho(i,v,A,!Y);return}}Ky(i,s,v,a,u,g,A,w,U)}function dC(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],v=g.getSnapshot;g=g.value;try{if(!Cn(v(),g))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ho(i,s,a,u){s&=~Wd,s&=~Fs,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var g=s;0<g;){var v=31-_t(g),A=1<<v;u[v]=-1,g&=~A}a!==0&&ms(i,a,s)}function ec(){return(Xe&6)===0?(sl(0),!1):!0}function nh(){if(Le!==null){if(et===0)var i=Le.return;else i=Le,Xi=Ms=null,vd(i),Sr=null,Ga=0,i=Le;for(;i!==null;)gy(i.alternate,i),i=i.return;Le=null}}function Dr(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,DC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),ao=0,nh(),at=i,Le=a=$i(i.current,null),Oe=s,et=0,xn=null,Bo=!1,br=Zn(i,s),Xd=!1,Nr=bn=Wd=Fs=Fo=vt=0,yn=il=null,Zd=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var g=31-_t(u),v=1<<g;s|=i[g],u&=~v}return ro=s,Tu(),a}function Fy(i,s){Pe=null,$.H=Qa,s===Tr||s===bu?(s=ng(),et=3):s===rd?(s=ng(),et=4):et=s===Pd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,xn=s,Le===null&&(vt=1,Hu(i,Bn(s,i.current)))}function Gy(){var i=In.current;return i===null?!0:(Oe&4194048)===Oe?Hn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?i===Hn:!1}function qy(){var i=$.H;return $.H=Qa,i===null?Qa:i}function Hy(){var i=$.A;return $.A=cC,i}function tc(){vt=4,Bo||(Oe&4194048)!==Oe&&In.current!==null||(br=!0),(Fo&134217727)===0&&(Fs&134217727)===0||at===null||Ho(at,Oe,bn,!1)}function ih(i,s,a){var u=Xe;Xe|=2;var g=qy(),v=Hy();(at!==i||Oe!==s)&&(ju=null,Dr(i,s)),s=!1;var A=vt;e:do try{if(et!==0&&Le!==null){var w=Le,U=xn;switch(et){case 8:nh(),A=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(s=!0);var Y=et;if(et=0,xn=null,Vr(i,w,U,Y),a&&br){A=0;break e}break;default:Y=et,et=0,xn=null,Vr(i,w,U,Y)}}hC(),A=vt;break}catch(W){Fy(i,W)}while(!0);return s&&i.shellSuspendCounter++,Xi=Ms=null,Xe=u,$.H=g,$.A=v,Le===null&&(at=null,Oe=0,Tu()),A}function hC(){for(;Le!==null;)zy(Le)}function pC(i,s){var a=Xe;Xe|=2;var u=qy(),g=Hy();at!==i||Oe!==s?(ju=null,Zu=an()+500,Dr(i,s)):br=Zn(i,s);e:do try{if(et!==0&&Le!==null){s=Le;var v=xn;t:switch(et){case 1:et=0,xn=null,Vr(i,s,v,1);break;case 2:case 9:if(eg(v)){et=0,xn=null,Yy(s);break}s=function(){et!==2&&et!==9||at!==i||(et=7),ki(i)},v.then(s,s);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:eg(v)?(et=0,xn=null,Yy(s)):(et=0,xn=null,Vr(i,s,v,7));break;case 5:var A=null;switch(Le.tag){case 26:A=Le.memoizedState;case 5:case 27:var w=Le;if(A?Nv(A):w.stateNode.complete){et=0,xn=null;var U=w.sibling;if(U!==null)Le=U;else{var Y=w.return;Y!==null?(Le=Y,nc(Y)):Le=null}break t}}et=0,xn=null,Vr(i,s,v,5);break;case 6:et=0,xn=null,Vr(i,s,v,6);break;case 8:nh(),vt=6;break e;default:throw Error(o(462))}}mC();break}catch(W){Fy(i,W)}while(!0);return Xi=Ms=null,$.H=u,$.A=g,Xe=a,Le!==null?0:(at=null,Oe=0,Tu(),vt)}function mC(){for(;Le!==null&&!Vf();)zy(Le)}function zy(i){var s=py(i.alternate,i,ro);i.memoizedProps=i.pendingProps,s===null?nc(i):Le=s}function Yy(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=ly(a,s,s.pendingProps,s.type,void 0,Oe);break;case 11:s=ly(a,s,s.pendingProps,s.type.render,s.ref,Oe);break;case 5:vd(s);default:gy(a,s),s=Le=Hm(s,ro),s=py(a,s,ro)}i.memoizedProps=i.pendingProps,s===null?nc(i):Le=s}function Vr(i,s,a,u){Xi=Ms=null,vd(s),Sr=null,Ga=0;var g=s.return;try{if(iC(i,g,s,a,Oe)){vt=1,Hu(i,Bn(a,i.current)),Le=null;return}}catch(v){if(g!==null)throw Le=g,v;vt=1,Hu(i,Bn(a,i.current)),Le=null;return}s.flags&32768?(qe||u===1?i=!0:br||(Oe&536870912)!==0?i=!1:(Bo=i=!0,(u===2||u===9||u===3||u===6)&&(u=In.current,u!==null&&u.tag===13&&(u.flags|=16384))),Jy(s,i)):nc(s)}function nc(i){var s=i;do{if((s.flags&32768)!==0){Jy(s,Bo);return}i=s.return;var a=rC(s.alternate,s,ro);if(a!==null){Le=a;return}if(s=s.sibling,s!==null){Le=s;return}Le=s=i}while(s!==null);vt===0&&(vt=5)}function Jy(i,s){do{var a=aC(i.alternate,i);if(a!==null){a.flags&=32767,Le=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){Le=i;return}Le=i=a}while(i!==null);vt=6,Le=null}function Ky(i,s,a,u,g,v,A,w,U){i.cancelPendingCommit=null;do ic();while(kt!==0);if((Xe&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(v=s.lanes|s.childLanes,v|=Yf,Lf(i,a,v,A,w,U),i===at&&(Le=at=null,Oe=0),Mr=s,qo=i,ao=a,jd=v,eh=g,Ly=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_C(_o,function(){return Zy(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,g=ae.p,ae.p=2,A=Xe,Xe|=4;try{lC(i,s,a)}finally{Xe=A,ae.p=g,$.T=u}}kt=1,$y(),Qy(),Xy()}}function $y(){if(kt===1){kt=0;var i=qo,s=Mr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var u=ae.p;ae.p=2;var g=Xe;Xe|=4;try{xy(s,i);var v=mh,A=Pm(i.containerInfo),w=v.focusedElem,U=v.selectionRange;if(A!==w&&w&&w.ownerDocument&&Vm(w.ownerDocument.documentElement,w)){if(U!==null&&Ff(w)){var Y=U.start,W=U.end;if(W===void 0&&(W=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(W,w.value.length);else{var oe=w.ownerDocument||document,J=oe&&oe.defaultView||window;if(J.getSelection){var X=J.getSelection(),ge=w.textContent.length,Ce=Math.min(U.start,ge),st=U.end===void 0?Ce:Math.min(U.end,ge);!X.extend&&Ce>st&&(A=st,st=Ce,Ce=A);var q=Dm(w,Ce),B=Dm(w,st);if(q&&B&&(X.rangeCount!==1||X.anchorNode!==q.node||X.anchorOffset!==q.offset||X.focusNode!==B.node||X.focusOffset!==B.offset)){var z=oe.createRange();z.setStart(q.node,q.offset),X.removeAllRanges(),Ce>st?(X.addRange(z),X.extend(B.node,B.offset)):(z.setEnd(B.node,B.offset),X.addRange(z))}}}}for(oe=[],X=w;X=X.parentNode;)X.nodeType===1&&oe.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<oe.length;w++){var ne=oe[w];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}mc=!!ph,mh=ph=null}finally{Xe=g,ae.p=u,$.T=a}}i.current=s,kt=2}}function Qy(){if(kt===2){kt=0;var i=qo,s=Mr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var u=ae.p;ae.p=2;var g=Xe;Xe|=4;try{Ay(i,s.alternate,s)}finally{Xe=g,ae.p=u,$.T=a}}kt=3}}function Xy(){if(kt===4||kt===3){kt=0,Kl();var i=qo,s=Mr,a=ao,u=Ly;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?kt=5:(kt=0,Mr=qo=null,Wy(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Go=null),zi(a),s=s.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Wn,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=$.T,g=ae.p,ae.p=2,$.T=null;try{for(var v=i.onRecoverableError,A=0;A<u.length;A++){var w=u[A];v(w.value,{componentStack:w.stack})}}finally{$.T=s,ae.p=g}}(ao&3)!==0&&ic(),ki(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===th?ol++:(ol=0,th=i):ol=0,sl(0)}}function Wy(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Ba(s)))}function ic(){return $y(),Qy(),Xy(),Zy()}function Zy(){if(kt!==5)return!1;var i=qo,s=jd;jd=0;var a=zi(ao),u=$.T,g=ae.p;try{ae.p=32>a?32:a,$.T=null,a=eh,eh=null;var v=qo,A=ao;if(kt=0,Mr=qo=null,ao=0,(Xe&6)!==0)throw Error(o(331));var w=Xe;if(Xe|=4,Vy(v.current),Ny(v,v.current,A,a),Xe=w,sl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Wn,v)}catch{}return!0}finally{ae.p=g,$.T=u,Wy(i,s)}}function jy(i,s,a){s=Bn(a,s),s=Vd(i.stateNode,s,2),i=Uo(i,s,2),i!==null&&(ps(i,2),ki(i))}function tt(i,s,a){if(i.tag===3)jy(i,i,a);else for(;s!==null;){if(s.tag===3){jy(s,i,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Go===null||!Go.has(u))){i=Bn(a,i),a=ey(2),u=Uo(s,a,2),u!==null&&(ty(a,u,s,i),ps(u,2),ki(u));break}}s=s.return}}function oh(i,s,a){var u=i.pingCache;if(u===null){u=i.pingCache=new fC;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(a)||(Xd=!0,g.add(a),i=gC.bind(null,i,s,a),s.then(i,i))}function gC(i,s,a){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,at===i&&(Oe&a)===a&&(vt===4||vt===3&&(Oe&62914560)===Oe&&300>an()-Wu?(Xe&2)===0&&Dr(i,0):Wd|=a,Nr===Oe&&(Nr=0)),ki(i)}function ev(i,s){s===0&&(s=jl()),i=xs(i,s),i!==null&&(ps(i,s),ki(i))}function yC(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),ev(i,a)}function vC(i,s){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),ev(i,a)}function _C(i,s){return Lt(i,s)}var oc=null,Pr=null,sh=!1,sc=!1,rh=!1,zo=0;function ki(i){i!==Pr&&i.next===null&&(Pr===null?oc=Pr=i:Pr=Pr.next=i),sc=!0,sh||(sh=!0,TC())}function sl(i,s){if(!rh&&sc){rh=!0;do for(var a=!1,u=oc;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var v=0;else{var A=u.suspendedLanes,w=u.pingedLanes;v=(1<<31-_t(42|i)+1)-1,v&=g&~(A&~w),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,ov(u,v))}else v=Oe,v=_i(u,u===at?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||Zn(u,v)||(a=!0,ov(u,v));u=u.next}while(a);rh=!1}}function EC(){tv()}function tv(){sc=sh=!1;var i=0;zo!==0&&MC()&&(i=zo);for(var s=an(),a=null,u=oc;u!==null;){var g=u.next,v=nv(u,s);v===0?(u.next=null,a===null?oc=g:a.next=g,g===null&&(Pr=a)):(a=u,(i!==0||(v&3)!==0)&&(sc=!0)),u=g}kt!==0&&kt!==5||sl(i),zo!==0&&(zo=0)}function nv(i,s){for(var a=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var A=31-_t(v),w=1<<A,U=g[A];U===-1?((w&a)===0||(w&u)!==0)&&(g[A]=Uf(w,s)):U<=s&&(i.expiredLanes|=w),v&=~w}if(s=at,a=Oe,a=_i(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===s&&(et===2||et===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&vo(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Zn(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(u!==null&&vo(u),zi(a)){case 2:case 8:a=ma;break;case 32:a=_o;break;case 268435456:a=$l;break;default:a=_o}return u=iv.bind(null,i),a=Lt(a,u),i.callbackPriority=s,i.callbackNode=a,s}return u!==null&&u!==null&&vo(u),i.callbackPriority=2,i.callbackNode=null,2}function iv(i,s){if(kt!==0&&kt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(ic()&&i.callbackNode!==a)return null;var u=Oe;return u=_i(i,i===at?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(Oy(i,u,s),nv(i,an()),i.callbackNode!=null&&i.callbackNode===a?iv.bind(null,i):null)}function ov(i,s){if(ic())return null;Oy(i,s,!0)}function TC(){VC(function(){(Xe&6)!==0?Lt(pa,EC):tv()})}function ah(){if(zo===0){var i=_r;i===0&&(i=yi,yi<<=1,(yi&261888)===0&&(yi=256)),zo=i}return zo}function sv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:or(""+i)}function rv(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function SC(i,s,a,u,g){if(s==="submit"&&a&&a.stateNode===g){var v=sv((g[Gt]||null).action),A=u.submitter;A&&(s=(s=A[Gt]||null)?sv(s.formAction):A.getAttribute("formAction"),s!==null&&(v=s,A=null));var w=new Ni("action","action",null,u,g);i.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(zo!==0){var U=A?rv(g,A):new FormData(g);wd(a,{pending:!0,data:U,method:g.method,action:v},null,U)}}else typeof v=="function"&&(w.preventDefault(),U=A?rv(g,A):new FormData(g),wd(a,{pending:!0,data:U,method:g.method,action:v},v,U))},currentTarget:g}]})}}for(var lh=0;lh<zf.length;lh++){var uh=zf[lh],AC=uh.toLowerCase(),CC=uh[0].toUpperCase()+uh.slice(1);ri(AC,"on"+CC)}ri(km,"onAnimationEnd"),ri(Om,"onAnimationIteration"),ri(Bm,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(FA,"onTransitionRun"),ri(GA,"onTransitionStart"),ri(qA,"onTransitionCancel"),ri(Fm,"onTransitionEnd"),Ii("onMouseEnter",["mouseout","mouseover"]),Ii("onMouseLeave",["mouseout","mouseover"]),Ii("onPointerEnter",["pointerout","pointerover"]),Ii("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rl));function av(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],g=u.event;u=u.listeners;e:{var v=void 0;if(s)for(var A=u.length-1;0<=A;A--){var w=u[A],U=w.instance,Y=w.currentTarget;if(w=w.listener,U!==v&&g.isPropagationStopped())break e;v=w,g.currentTarget=Y;try{v(g)}catch(W){Eu(W)}g.currentTarget=null,v=U}else for(A=0;A<u.length;A++){if(w=u[A],U=w.instance,Y=w.currentTarget,w=w.listener,U!==v&&g.isPropagationStopped())break e;v=w,g.currentTarget=Y;try{v(g)}catch(W){Eu(W)}g.currentTarget=null,v=U}}}}function ke(i,s){var a=s[js];a===void 0&&(a=s[js]=new Set);var u=i+"__bubble";a.has(u)||(lv(s,i,2,!1),a.add(u))}function ch(i,s,a){var u=0;s&&(u|=4),lv(a,i,u,s)}var rc="_reactListening"+Math.random().toString(36).slice(2);function fh(i){if(!i[rc]){i[rc]=!0,va.forEach(function(a){a!=="selectionchange"&&(RC.has(a)||ch(a,!1,i),ch(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[rc]||(s[rc]=!0,ch("selectionchange",!1,s))}}function lv(i,s,a,u){switch(kv(s)){case 2:var g=jC;break;case 8:g=eR;break;default:g=Ih}a=g.bind(null,s,a,i),g=void 0,!Es||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(s,a,{capture:!0,passive:g}):i.addEventListener(s,a,!0):g!==void 0?i.addEventListener(s,a,{passive:g}):i.addEventListener(s,a,!1)}function dh(i,s,a,u,g){var v=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var w=u.stateNode.containerInfo;if(w===g)break;if(A===4)for(A=u.return;A!==null;){var U=A.tag;if((U===3||U===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;w!==null;){if(A=Ai(w),A===null)return;if(U=A.tag,U===5||U===6||U===26||U===27){u=v=A;continue e}w=w.parentNode}}u=u.return}Ro(function(){var Y=v,W=Un(a),oe=[];e:{var J=Gm.get(i);if(J!==void 0){var X=Ni,ge=i;switch(i){case"keypress":if(Ss(a)===0)break e;case"keydown":case"keyup":X=yu;break;case"focusin":ge="focus",X=Cs;break;case"focusout":ge="blur",X=Cs;break;case"beforeblur":case"afterblur":X=Cs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=T;break;case km:case Om:case Bm:X=cu;break;case Fm:X=x;break;case"scroll":case"scrollend":X=Na;break;case"wheel":X=Q;break;case"copy":case"cut":case"paste":X=fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Ki;break;case"toggle":case"beforetoggle":X=Ve}var Ce=(s&4)!==0,st=!Ce&&(i==="scroll"||i==="scrollend"),q=Ce?J!==null?J+"Capture":null:J;Ce=[];for(var B=Y,z;B!==null;){var ne=B;if(z=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||z===null||q===null||(ne=ni(B,q),ne!=null&&Ce.push(al(B,ne,z))),st)break;B=B.return}0<Ce.length&&(J=new X(J,ge,null,a,W),oe.push({event:J,listeners:Ce}))}}if((s&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",J&&a!==wa&&(ge=a.relatedTarget||a.fromElement)&&(Ai(ge)||ge[Ti]))break e;if((X||J)&&(J=W.window===W?W:(J=W.ownerDocument)?J.defaultView||J.parentWindow:window,X?(ge=a.relatedTarget||a.toElement,X=Y,ge=ge?Ai(ge):null,ge!==null&&(st=l(ge),Ce=ge.tag,ge!==st||Ce!==5&&Ce!==27&&Ce!==6)&&(ge=null)):(X=null,ge=Y),X!==ge)){if(Ce=Ma,ne="onMouseLeave",q="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(Ce=Ki,ne="onPointerLeave",q="onPointerEnter",B="pointer"),st=X==null?J:Sn(X),z=ge==null?J:Sn(ge),J=new Ce(ne,B+"leave",X,a,W),J.target=st,J.relatedTarget=z,ne=null,Ai(W)===Y&&(Ce=new Ce(q,B+"enter",ge,a,W),Ce.target=z,Ce.relatedTarget=st,ne=Ce),st=ne,X&&ge)t:{for(Ce=IC,q=X,B=ge,z=0,ne=q;ne;ne=Ce(ne))z++;ne=0;for(var Se=B;Se;Se=Ce(Se))ne++;for(;0<z-ne;)q=Ce(q),z--;for(;0<ne-z;)B=Ce(B),ne--;for(;z--;){if(q===B||B!==null&&q===B.alternate){Ce=q;break t}q=Ce(q),B=Ce(B)}Ce=null}else Ce=null;X!==null&&uv(oe,J,X,Ce,!1),ge!==null&&st!==null&&uv(oe,st,ge,Ce,!0)}}e:{if(J=Y?Sn(Y):window,X=J.nodeName&&J.nodeName.toLowerCase(),X==="select"||X==="input"&&J.type==="file")var Je=Im;else if(Cm(J))if(wm)Je=kA;else{Je=UA;var ve=PA}else X=J.nodeName,!X||X.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Y&&ir(Y.elementType)&&(Je=Im):Je=LA;if(Je&&(Je=Je(i,Y))){Rm(oe,Je,a,W);break e}ve&&ve(i,J,Y),i==="focusout"&&Y&&J.type==="number"&&Y.memoizedProps.value!=null&&Ca(J,"number",J.value)}switch(ve=Y?Sn(Y):window,i){case"focusin":(Cm(ve)||ve.contentEditable==="true")&&(fr=ve,Gf=Y,La=null);break;case"focusout":La=Gf=fr=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,Um(oe,a,W);break;case"selectionchange":if(BA)break;case"keydown":case"keyup":Um(oe,a,W)}var Ue;if(Qe)e:{switch(i){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else cr?Rs(i,a)&&(Be="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Vi&&a.locale!=="ko"&&(cr||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&cr&&(Ue=ba()):(bi=W,xa="value"in bi?bi.value:bi.textContent,cr=!0)),ve=ac(Y,Be),0<ve.length&&(Be=new Di(Be,i,null,a,W),oe.push({event:Be,listeners:ve}),Ue?Be.data=Ue:(Ue=ur(a),Ue!==null&&(Be.data=Ue)))),(Ue=kn?NA(i,a):MA(i,a))&&(Be=ac(Y,"onBeforeInput"),0<Be.length&&(ve=new Di("onBeforeInput","beforeinput",null,a,W),oe.push({event:ve,listeners:Be}),ve.data=Ue)),SC(oe,i,Y,a,W)}av(oe,s)})}function al(i,s,a){return{instance:i,listener:s,currentTarget:a}}function ac(i,s){for(var a=s+"Capture",u=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=ni(i,a),g!=null&&u.unshift(al(i,g,v)),g=ni(i,s),g!=null&&u.push(al(i,g,v))),i.tag===3)return u;i=i.return}return[]}function IC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function uv(i,s,a,u,g){for(var v=s._reactName,A=[];a!==null&&a!==u;){var w=a,U=w.alternate,Y=w.stateNode;if(w=w.tag,U!==null&&U===u)break;w!==5&&w!==26&&w!==27||Y===null||(U=Y,g?(Y=ni(a,v),Y!=null&&A.unshift(al(a,Y,U))):g||(Y=ni(a,v),Y!=null&&A.push(al(a,Y,U)))),a=a.return}A.length!==0&&i.push({event:s,listeners:A})}var wC=/\r\n?/g,xC=/\u0000|\uFFFD/g;function cv(i){return(typeof i=="string"?i:""+i).replace(wC,`
`).replace(xC,"")}function fv(i,s){return s=cv(s),cv(i)===s}function ot(i,s,a,u,g,v){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||hn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&hn(i,""+u);break;case"className":An(i,"class",u);break;case"tabIndex":An(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":An(i,a,u);break;case"style":Ia(i,u,v);break;case"data":if(s!=="object"){An(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=or(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&ot(i,s,"name",g.name,g,null),ot(i,s,"formEncType",g.formEncType,g,null),ot(i,s,"formMethod",g.formMethod,g,null),ot(i,s,"formTarget",g.formTarget,g,null)):(ot(i,s,"encType",g.encType,g,null),ot(i,s,"method",g.method,g,null),ot(i,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=or(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=ti);break;case"onScroll":u!=null&&ke("scroll",i);break;case"onScrollEnd":u!=null&&ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=or(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":ke("beforetoggle",i),ke("toggle",i),tr(i,"popover",u);break;case"xlinkActuate":bt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":bt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":bt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":bt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":bt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":bt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":bt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":bt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":bt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":tr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=au.get(a)||a,tr(i,a,u))}}function hh(i,s,a,u,g,v){switch(a){case"style":Ia(i,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof u=="string"?hn(i,u):(typeof u=="number"||typeof u=="bigint")&&hn(i,""+u);break;case"onScroll":u!=null&&ke("scroll",i);break;case"onScrollEnd":u!=null&&ke("scrollend",i);break;case"onClick":u!=null&&(i.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_a.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),s=a.slice(2,g?a.length-7:void 0),v=i[Gt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(s,v,g),typeof u=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,u,g);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):tr(i,a,u)}}}function Wt(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",i),ke("load",i);var u=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ot(i,s,v,A,a,null)}}g&&ot(i,s,"srcSet",a.srcSet,a,null),u&&ot(i,s,"src",a.src,a,null);return;case"input":ke("invalid",i);var w=v=A=g=null,U=null,Y=null;for(u in a)if(a.hasOwnProperty(u)){var W=a[u];if(W!=null)switch(u){case"name":g=W;break;case"type":A=W;break;case"checked":U=W;break;case"defaultChecked":Y=W;break;case"value":v=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(o(137,s));break;default:ot(i,s,u,W,a,null)}}ou(i,v,w,U,Y,A,g,!1);return;case"select":ke("invalid",i),u=A=v=null;for(g in a)if(a.hasOwnProperty(g)&&(w=a[g],w!=null))switch(g){case"value":v=w;break;case"defaultValue":A=w;break;case"multiple":u=w;default:ot(i,s,g,w,a,null)}s=v,a=A,i.multiple=!!u,s!=null?To(i,!!u,s,!1):a!=null&&To(i,!!u,a,!0);return;case"textarea":ke("invalid",i),v=g=u=null;for(A in a)if(a.hasOwnProperty(A)&&(w=a[A],w!=null))switch(A){case"value":u=w;break;case"defaultValue":g=w;break;case"children":v=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(o(91));break;default:ot(i,s,A,w,a,null)}So(i,u,g,v);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(u=a[U],u!=null))switch(U){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ot(i,s,U,u,a,null)}return;case"dialog":ke("beforetoggle",i),ke("toggle",i),ke("cancel",i),ke("close",i);break;case"iframe":case"object":ke("load",i);break;case"video":case"audio":for(u=0;u<rl.length;u++)ke(rl[u],i);break;case"image":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"embed":case"source":case"link":ke("error",i),ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(u=a[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ot(i,s,Y,u,a,null)}return;default:if(ir(s)){for(W in a)a.hasOwnProperty(W)&&(u=a[W],u!==void 0&&hh(i,s,W,u,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(u=a[w],u!=null&&ot(i,s,w,u,a,null))}function bC(i,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,A=null,w=null,U=null,Y=null,W=null;for(X in a){var oe=a[X];if(a.hasOwnProperty(X)&&oe!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":U=oe;default:u.hasOwnProperty(X)||ot(i,s,X,null,u,oe)}}for(var J in u){var X=u[J];if(oe=a[J],u.hasOwnProperty(J)&&(X!=null||oe!=null))switch(J){case"type":v=X;break;case"name":g=X;break;case"checked":Y=X;break;case"defaultChecked":W=X;break;case"value":A=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,s));break;default:X!==oe&&ot(i,s,J,X,u,oe)}}nr(i,A,w,U,Y,W,v,g);return;case"select":X=A=w=J=null;for(v in a)if(U=a[v],a.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":X=U;default:u.hasOwnProperty(v)||ot(i,s,v,null,u,U)}for(g in u)if(v=u[g],U=a[g],u.hasOwnProperty(g)&&(v!=null||U!=null))switch(g){case"value":J=v;break;case"defaultValue":w=v;break;case"multiple":A=v;default:v!==U&&ot(i,s,g,v,u,U)}s=w,a=A,u=X,J!=null?To(i,!!a,J,!1):!!u!=!!a&&(s!=null?To(i,!!a,s,!0):To(i,!!a,a?[]:"",!1));return;case"textarea":X=J=null;for(w in a)if(g=a[w],a.hasOwnProperty(w)&&g!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ot(i,s,w,null,u,g)}for(A in u)if(g=u[A],v=a[A],u.hasOwnProperty(A)&&(g!=null||v!=null))switch(A){case"value":J=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==v&&ot(i,s,A,g,u,v)}su(i,J,X);return;case"option":for(var ge in a)if(J=a[ge],a.hasOwnProperty(ge)&&J!=null&&!u.hasOwnProperty(ge))switch(ge){case"selected":i.selected=!1;break;default:ot(i,s,ge,null,u,J)}for(U in u)if(J=u[U],X=a[U],u.hasOwnProperty(U)&&J!==X&&(J!=null||X!=null))switch(U){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:ot(i,s,U,J,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)J=a[Ce],a.hasOwnProperty(Ce)&&J!=null&&!u.hasOwnProperty(Ce)&&ot(i,s,Ce,null,u,J);for(Y in u)if(J=u[Y],X=a[Y],u.hasOwnProperty(Y)&&J!==X&&(J!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(o(137,s));break;default:ot(i,s,Y,J,u,X)}return;default:if(ir(s)){for(var st in a)J=a[st],a.hasOwnProperty(st)&&J!==void 0&&!u.hasOwnProperty(st)&&hh(i,s,st,void 0,u,J);for(W in u)J=u[W],X=a[W],!u.hasOwnProperty(W)||J===X||J===void 0&&X===void 0||hh(i,s,W,J,u,X);return}}for(var q in a)J=a[q],a.hasOwnProperty(q)&&J!=null&&!u.hasOwnProperty(q)&&ot(i,s,q,null,u,J);for(oe in u)J=u[oe],X=a[oe],!u.hasOwnProperty(oe)||J===X||J==null&&X==null||ot(i,s,oe,J,u,X)}function dv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],v=g.transferSize,A=g.initiatorType,w=g.duration;if(v&&w&&dv(A)){for(A=0,w=g.responseEnd,u+=1;u<a.length;u++){var U=a[u],Y=U.startTime;if(Y>w)break;var W=U.transferSize,oe=U.initiatorType;W&&dv(oe)&&(U=U.responseEnd,A+=W*(U<w?1:(w-Y)/(U-Y)))}if(--u,s+=8*(v+A)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ph=null,mh=null;function lc(i){return i.nodeType===9?i:i.ownerDocument}function hv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pv(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function gh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var yh=null;function MC(){var i=window.event;return i&&i.type==="popstate"?i===yh?!1:(yh=i,!0):(yh=null,!1)}var mv=typeof setTimeout=="function"?setTimeout:void 0,DC=typeof clearTimeout=="function"?clearTimeout:void 0,gv=typeof Promise=="function"?Promise:void 0,VC=typeof queueMicrotask=="function"?queueMicrotask:typeof gv<"u"?function(i){return gv.resolve(null).then(i).catch(PC)}:mv;function PC(i){setTimeout(function(){throw i})}function Yo(i){return i==="head"}function yv(i,s){var a=s,u=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(g),Or(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")ll(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,ll(a);for(var v=a.firstChild;v;){var A=v.nextSibling,w=v.nodeName;v[Si]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&ll(i.ownerDocument.body);a=g}while(a);Or(s)}function vv(i,s){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function vh(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":vh(a),er(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function UC(i,s,a,u){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Si])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=zn(i.nextSibling),i===null)break}return null}function LC(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=zn(i.nextSibling),i===null))return null;return i}function _v(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=zn(i.nextSibling),i===null))return null;return i}function _h(i){return i.data==="$?"||i.data==="$~"}function Eh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function kC(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function zn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Th=null;function Ev(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return zn(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function Tv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function Sv(i,s,a){switch(s=lc(a),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function ll(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);er(i)}var Yn=new Map,Av=new Set;function uc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var lo=ae.d;ae.d={f:OC,r:BC,D:FC,C:GC,L:qC,m:HC,X:YC,S:zC,M:JC};function OC(){var i=lo.f(),s=ec();return i||s}function BC(i){var s=Pn(i);s!==null&&s.tag===5&&s.type==="form"?Fg(s):lo.r(i)}var Ur=typeof document>"u"?null:document;function Cv(i,s,a){var u=Ur;if(u&&typeof s=="string"&&s){var g=dn(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Av.has(g)||(Av.add(g),i={rel:i,crossOrigin:a,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),Wt(s,"link",i),xt(s),u.head.appendChild(s)))}}function FC(i){lo.D(i),Cv("dns-prefetch",i,null)}function GC(i,s){lo.C(i,s),Cv("preconnect",i,s)}function qC(i,s,a){lo.L(i,s,a);var u=Ur;if(u&&i&&s){var g='link[rel="preload"][as="'+dn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+dn(a.imageSizes)+'"]')):g+='[href="'+dn(i)+'"]';var v=g;switch(s){case"style":v=Lr(i);break;case"script":v=kr(i)}Yn.has(v)||(i=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),Yn.set(v,i),u.querySelector(g)!==null||s==="style"&&u.querySelector(ul(v))||s==="script"&&u.querySelector(cl(v))||(s=u.createElement("link"),Wt(s,"link",i),xt(s),u.head.appendChild(s)))}}function HC(i,s){lo.m(i,s);var a=Ur;if(a&&i){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+dn(u)+'"][href="'+dn(i)+'"]',v=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=kr(i)}if(!Yn.has(v)&&(i=E({rel:"modulepreload",href:i},s),Yn.set(v,i),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cl(v)))return}u=a.createElement("link"),Wt(u,"link",i),xt(u),a.head.appendChild(u)}}}function zC(i,s,a){lo.S(i,s,a);var u=Ur;if(u&&i){var g=Ci(u).hoistableStyles,v=Lr(i);s=s||"default";var A=g.get(v);if(!A){var w={loading:0,preload:null};if(A=u.querySelector(ul(v)))w.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":s},a),(a=Yn.get(v))&&Sh(i,a);var U=A=u.createElement("link");xt(U),Wt(U,"link",i),U._p=new Promise(function(Y,W){U.onload=Y,U.onerror=W}),U.addEventListener("load",function(){w.loading|=1}),U.addEventListener("error",function(){w.loading|=2}),w.loading|=4,cc(A,s,u)}A={type:"stylesheet",instance:A,count:1,state:w},g.set(v,A)}}}function YC(i,s){lo.X(i,s);var a=Ur;if(a&&i){var u=Ci(a).hoistableScripts,g=kr(i),v=u.get(g);v||(v=a.querySelector(cl(g)),v||(i=E({src:i,async:!0},s),(s=Yn.get(g))&&Ah(i,s),v=a.createElement("script"),xt(v),Wt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function JC(i,s){lo.M(i,s);var a=Ur;if(a&&i){var u=Ci(a).hoistableScripts,g=kr(i),v=u.get(g);v||(v=a.querySelector(cl(g)),v||(i=E({src:i,async:!0,type:"module"},s),(s=Yn.get(g))&&Ah(i,s),v=a.createElement("script"),xt(v),Wt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function Rv(i,s,a,u){var g=(g=Te.current)?uc(g):null;if(!g)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Lr(a.href),a=Ci(g).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Lr(a.href);var v=Ci(g).hoistableStyles,A=v.get(i);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,A),(v=g.querySelector(ul(i)))&&!v._p&&(A.instance=v,A.state.loading=5),Yn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(i,a),v||KC(g,i,a,A.state))),s&&u===null)throw Error(o(528,""));return A}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=kr(a),a=Ci(g).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Lr(i){return'href="'+dn(i)+'"'}function ul(i){return'link[rel="stylesheet"]['+i+"]"}function Iv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function KC(i,s,a,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Wt(s,"link",a),xt(s),i.head.appendChild(s))}function kr(i){return'[src="'+dn(i)+'"]'}function cl(i){return"script[async]"+i}function wv(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+dn(a.href)+'"]');if(u)return s.instance=u,xt(u),u;var g=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),xt(u),Wt(u,"style",g),cc(u,a.precedence,i),s.instance=u;case"stylesheet":g=Lr(a.href);var v=i.querySelector(ul(g));if(v)return s.state.loading|=4,s.instance=v,xt(v),v;u=Iv(a),(g=Yn.get(g))&&Sh(u,g),v=(i.ownerDocument||i).createElement("link"),xt(v);var A=v;return A._p=new Promise(function(w,U){A.onload=w,A.onerror=U}),Wt(v,"link",u),s.state.loading|=4,cc(v,a.precedence,i),s.instance=v;case"script":return v=kr(a.src),(g=i.querySelector(cl(v)))?(s.instance=g,xt(g),g):(u=a,(g=Yn.get(v))&&(u=E({},a),Ah(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),xt(g),Wt(g,"link",u),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,cc(u,a.precedence,i));return s.instance}function cc(i,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,v=g,A=0;A<u.length;A++){var w=u[A];if(w.dataset.precedence===s)v=w;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function Sh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Ah(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var fc=null;function xv(i,s,a){if(fc===null){var u=new Map,g=fc=new Map;g.set(a,u)}else g=fc,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var v=a[g];if(!(v[Si]||v[wt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(s)||"";A=i+A;var w=u.get(A);w?w.push(v):u.set(A,[v])}}return u}function bv(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function $C(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Nv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function QC(i,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Lr(u.href),v=s.querySelector(ul(g));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=dc.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=v,xt(v);return}v=s.ownerDocument||s,u=Iv(u),(g=Yn.get(g))&&Sh(u,g),v=v.createElement("link"),xt(v);var A=v;A._p=new Promise(function(w,U){A.onload=w,A.onerror=U}),Wt(v,"link",u),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=dc.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var Ch=0;function XC(i,s){return i.stylesheets&&i.count===0&&pc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&pc(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+s);0<i.imgBytes&&Ch===0&&(Ch=62500*NC());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&pc(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>Ch?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function dc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var hc=null;function pc(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,hc=new Map,s.forEach(WC,i),hc=null,dc.call(i))}function WC(i,s){if(!(s.state.loading&4)){var a=hc.get(i);if(a)var u=a.get(null);else{a=new Map,hc.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var A=g[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),u=A)}u&&a.set(null,u)}g=s.instance,A=g.getAttribute("data-precedence"),v=a.get(A)||u,v===u&&a.set(null,g),a.set(A,g),this.count++,u=dc.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var fl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function ZC(i,s,a,u,g,v,A,w,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Mv(i,s,a,u,g,v,A,w,U,Y,W,oe){return i=new ZC(i,s,a,A,U,Y,W,oe,w),s=1,v===!0&&(s|=24),v=Rn(3,null,null,s),i.current=v,v.stateNode=i,s=id(),s.refCount++,i.pooledCache=s,s.refCount++,v.memoizedState={element:u,isDehydrated:a,cache:s},ad(v),i}function Dv(i){return i?(i=pr,i):pr}function Vv(i,s,a,u,g,v){g=Dv(g),u.context===null?u.context=g:u.pendingContext=g,u=Po(s),u.payload={element:a},v=v===void 0?null:v,v!==null&&(u.callback=v),a=Uo(i,u,s),a!==null&&(vn(a,i,s),Ha(a,i,s))}function Pv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Rh(i,s){Pv(i,s),(i=i.alternate)&&Pv(i,s)}function Uv(i){if(i.tag===13||i.tag===31){var s=xs(i,67108864);s!==null&&vn(s,i,67108864),Rh(i,67108864)}}function Lv(i){if(i.tag===13||i.tag===31){var s=Nn();s=gs(s);var a=xs(i,s);a!==null&&vn(a,i,s),Rh(i,s)}}var mc=!0;function jC(i,s,a,u){var g=$.T;$.T=null;var v=ae.p;try{ae.p=2,Ih(i,s,a,u)}finally{ae.p=v,$.T=g}}function eR(i,s,a,u){var g=$.T;$.T=null;var v=ae.p;try{ae.p=8,Ih(i,s,a,u)}finally{ae.p=v,$.T=g}}function Ih(i,s,a,u){if(mc){var g=wh(u);if(g===null)dh(i,s,u,gc,a),Ov(i,u);else if(nR(g,i,s,a,u))u.stopPropagation();else if(Ov(i,u),s&4&&-1<tR.indexOf(i)){for(;g!==null;){var v=Pn(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=vi(v.pendingLanes);if(A!==0){var w=v;for(w.pendingLanes|=2,w.entangledLanes|=2;A;){var U=1<<31-_t(A);w.entanglements[1]|=U,A&=~U}ki(v),(Xe&6)===0&&(Zu=an()+500,sl(0))}}break;case 31:case 13:w=xs(v,2),w!==null&&vn(w,v,2),ec(),Rh(v,2)}if(v=wh(u),v===null&&dh(i,s,u,gc,a),v===g)break;g=v}g!==null&&u.stopPropagation()}else dh(i,s,u,null,a)}}function wh(i){return i=Un(i),xh(i)}var gc=null;function xh(i){if(gc=null,i=Ai(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=c(s),i!==null)return i;i=null}else if(a===31){if(i=d(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return gc=i,null}function kv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ds()){case pa:return 2;case ma:return 8;case _o:case Pf:return 32;case $l:return 268435456;default:return 32}default:return 32}}var bh=!1,Jo=null,Ko=null,$o=null,dl=new Map,hl=new Map,Qo=[],tR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ov(i,s){switch(i){case"focusin":case"focusout":Jo=null;break;case"dragenter":case"dragleave":Ko=null;break;case"mouseover":case"mouseout":$o=null;break;case"pointerover":case"pointerout":dl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(s.pointerId)}}function pl(i,s,a,u,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:v,targetContainers:[g]},s!==null&&(s=Pn(s),s!==null&&Uv(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function nR(i,s,a,u,g){switch(s){case"focusin":return Jo=pl(Jo,i,s,a,u,g),!0;case"dragenter":return Ko=pl(Ko,i,s,a,u,g),!0;case"mouseover":return $o=pl($o,i,s,a,u,g),!0;case"pointerover":var v=g.pointerId;return dl.set(v,pl(dl.get(v)||null,i,s,a,u,g)),!0;case"gotpointercapture":return v=g.pointerId,hl.set(v,pl(hl.get(v)||null,i,s,a,u,g)),!0}return!1}function Bv(i){var s=Ai(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){i.blockedOn=s,jn(i.priority,function(){Lv(a)});return}}else if(s===31){if(s=d(a),s!==null){i.blockedOn=s,jn(i.priority,function(){Lv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function yc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=wh(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);wa=u,a.target.dispatchEvent(u),wa=null}else return s=Pn(a),s!==null&&Uv(s),i.blockedOn=a,!1;s.shift()}return!0}function Fv(i,s,a){yc(i)&&a.delete(s)}function iR(){bh=!1,Jo!==null&&yc(Jo)&&(Jo=null),Ko!==null&&yc(Ko)&&(Ko=null),$o!==null&&yc($o)&&($o=null),dl.forEach(Fv),hl.forEach(Fv)}function vc(i,s){i.blockedOn===s&&(i.blockedOn=null,bh||(bh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,iR)))}var _c=null;function Gv(i){_c!==i&&(_c=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){_c===i&&(_c=null);for(var s=0;s<i.length;s+=3){var a=i[s],u=i[s+1],g=i[s+2];if(typeof u!="function"){if(xh(u||a)===null)continue;break}var v=Pn(a);v!==null&&(i.splice(s,3),s-=3,wd(v,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Or(i){function s(U){return vc(U,i)}Jo!==null&&vc(Jo,i),Ko!==null&&vc(Ko,i),$o!==null&&vc($o,i),dl.forEach(s),hl.forEach(s);for(var a=0;a<Qo.length;a++){var u=Qo[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Qo.length&&(a=Qo[0],a.blockedOn===null);)Bv(a),a.blockedOn===null&&Qo.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],v=a[u+1],A=g[Gt]||null;if(typeof v=="function")A||Gv(a);else if(A){var w=null;if(v&&v.hasAttribute("formAction")){if(g=v,A=v[Gt]||null)w=A.formAction;else if(xh(g)!==null)continue}else w=A.action;typeof w=="function"?a[u+1]=w:(a.splice(u,3),u-=3),Gv(a)}}}function qv(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Nh(i){this._internalRoot=i}Ec.prototype.render=Nh.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,u=Nn();Vv(a,u,i,s,null,null)},Ec.prototype.unmount=Nh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Vv(i.current,2,null,i,null,null),ec(),s[Ti]=null}};function Ec(i){this._internalRoot=i}Ec.prototype.unstable_scheduleHydration=function(i){if(i){var s=eu();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Qo.length&&s!==0&&s<Qo[a].priority;a++);Qo.splice(a,0,i),a===0&&Bv(i)}};var Hv=e.version;if(Hv!=="19.2.4")throw Error(o(527,Hv,"19.2.4"));ae.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(s),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var oR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{Wn=Tc.inject(oR),Jt=Tc}catch{}}return gl.createRoot=function(i,s){if(!r(i))throw Error(o(299));var a=!1,u="",g=Xg,v=Wg,A=Zg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=Mv(i,1,!1,null,null,a,u,null,g,v,A,qv),i[Ti]=s.current,fh(i),new Nh(s)},gl.hydrateRoot=function(i,s,a){if(!r(i))throw Error(o(299));var u=!1,g="",v=Xg,A=Wg,w=Zg,U=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),s=Mv(i,1,!0,s,a??null,u,g,U,v,A,w,qv),s.context=Dv(null),a=s.current,u=Nn(),u=gs(u),g=Po(u),g.callback=null,Uo(a,g,u),a=u,s.current.lanes=a,ps(s,a),ki(s),i[Ti]=s.current,fh(i),new Ec(s)},gl.version="19.2.4",gl}var jv;function mR(){if(jv)return Vh.exports;jv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vh.exports=pR(),Vh.exports}var gR=mR();const yR=KE(gR),vR=()=>{};var e0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=function(n){const e=[];let t=0;for(let o=0;o<n.length;o++){let r=n.charCodeAt(o);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++o)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},_R=function(n){const e=[];let t=0,o=0;for(;t<n.length;){const r=n[t++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],c=n[t++],d=n[t++],y=((r&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(y>>10)),e[o++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],c=n[t++];e[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},QE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,d=c?n[r+1]:0,y=r+2<n.length,m=y?n[r+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|m>>6,I=m&63;y||(I=64,c||(S=64)),o.push(t[_],t[E],t[S],t[I])}return o.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($E(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_R(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const m=r<n.length?t[n.charAt(r)]:64;++r;const E=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||d==null||m==null||E==null)throw new ER;const S=l<<2|d>>4;if(o.push(S),m!==64){const I=d<<4&240|m>>2;if(o.push(I),E!==64){const L=m<<6&192|E;o.push(L)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ER extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TR=function(n){const e=$E(n);return QE.encodeByteArray(e,!0)},Gc=function(n){return TR(n).replace(/\./g,"")},SR=function(n){try{return QE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=()=>AR().__FIREBASE_DEFAULTS__,RR=()=>{if(typeof process>"u"||typeof e0>"u")return;const n=e0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},IR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&SR(n[1]);return e&&JSON.parse(e)},Pp=()=>{try{return vR()||CR()||RR()||IR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},wR=n=>{var e,t;return(t=(e=Pp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},xR=n=>{const e=wR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},XE=()=>{var n;return(n=Pp())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function NR(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Gc(JSON.stringify(t)),Gc(JSON.stringify(c)),""].join(".")}const Il={};function DR(){const n={prod:[],emulator:[]};for(const e of Object.keys(Il))Il[e]?n.emulator.push(e):n.prod.push(e);return n}function VR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let t0=!1;function PR(n,e){if(typeof window>"u"||typeof document>"u"||!Up(window.location.host)||Il[n]===e||Il[n]||t0)return;Il[n]=e;function t(S){return`__firebase__banner__${S}`}const o="__firebase__banner",l=DR().prod.length>0;function c(){const S=document.getElementById(o);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{t0=!0,c()},S}function _(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=VR(o),I=t("text"),L=document.getElementById(I)||document.createElement("span"),G=t("learnmore"),O=document.getElementById(G)||document.createElement("a"),K=t("preprendIcon"),ie=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;d(Z),_(O,G);const re=m();y(ie,K),Z.append(ie,L,O,re),document.body.appendChild(Z)}l?(L.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LR(){var e;const n=(e=Pp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kR(){return!LR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OR(){try{return typeof indexedDB=="object"}catch{return!1}}function BR(){return new Promise((n,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(o),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="FirebaseError";class oa extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=FR,Object.setPrototypeOf(this,oa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,WE.prototype.create)}}class WE{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?GR(l,o):"Error",d=`${this.serviceName}: ${c} (${r}).`;return new oa(r,d,o)}}function GR(n,e){return n.replace(qR,(t,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const qR=/\{\$([^}]+)}/g;function Ml(n,e){if(n===e)return!0;const t=Object.keys(n),o=Object.keys(e);for(const r of t){if(!o.includes(r))return!1;const l=n[r],c=e[r];if(n0(l)&&n0(c)){if(!Ml(l,c))return!1}else if(l!==c)return!1}for(const r of o)if(!t.includes(r))return!1;return!0}function n0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(n){return n&&n._delegate?n._delegate:n}class Dl{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new bR;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(o)return null;throw r}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YR(e))try{this.getOrInitializeService({instanceIdentifier:Gs})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(e=Gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gs){return this.instances.has(e)}getOptions(e=Gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&c.resolve(r)}return r}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(o)??new Set;r.add(e),this.onInitCallbacks.set(o,r);const l=this.instances.get(o);return l&&e(l,o),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const r of o)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:zR(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Gs){return this.component?this.component.multipleInstances?e:Gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zR(n){return n===Gs?void 0:n}function YR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new HR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const KR={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},$R=ze.INFO,QR={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},XR=(n,e,...t)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),r=QR[e];if(r)console[r](`[${o}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ZE{constructor(e){this.name=e,this._logLevel=$R,this._logHandler=XR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const WR=(n,e)=>e.some(t=>n instanceof t);let i0,o0;function ZR(){return i0||(i0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jR(){return o0||(o0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jE=new WeakMap,Qh=new WeakMap,eT=new WeakMap,kh=new WeakMap,Lp=new WeakMap;function eI(n){const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Zo(n.result)),r()},c=()=>{o(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&jE.set(t,n)}).catch(()=>{}),Lp.set(e,n),e}function tI(n){if(Qh.has(n))return;const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),r()},c=()=>{o(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Qh.set(n,e)}let Xh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Qh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||eT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nI(n){Xh=n(Xh)}function iI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=n.call(Oh(this),e,...t);return eT.set(o,e.sort?e.sort():[e]),Zo(o)}:jR().includes(n)?function(...e){return n.apply(Oh(this),e),Zo(jE.get(this))}:function(...e){return Zo(n.apply(Oh(this),e))}}function oI(n){return typeof n=="function"?iI(n):(n instanceof IDBTransaction&&tI(n),WR(n,ZR())?new Proxy(n,Xh):n)}function Zo(n){if(n instanceof IDBRequest)return eI(n);if(kh.has(n))return kh.get(n);const e=oI(n);return e!==n&&(kh.set(n,e),Lp.set(e,n)),e}const Oh=n=>Lp.get(n);function sI(n,e,{blocked:t,upgrade:o,blocking:r,terminated:l}={}){const c=indexedDB.open(n,e),d=Zo(c);return o&&c.addEventListener("upgradeneeded",y=>{o(Zo(c.result),y.oldVersion,y.newVersion,Zo(c.transaction),y)}),t&&c.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),d.then(y=>{l&&y.addEventListener("close",()=>l()),r&&y.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const rI=["get","getKey","getAll","getAllKeys","count"],aI=["put","add","delete","clear"],Bh=new Map;function s0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Bh.get(e))return Bh.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,r=aI.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(r||rI.includes(t)))return;const l=async function(c,...d){const y=this.transaction(c,r?"readwrite":"readonly");let m=y.store;return o&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),r&&y.done]))[0]};return Bh.set(e,l),l}nI(n=>({...n,get:(e,t,o)=>s0(e,t)||n.get(e,t,o),has:(e,t)=>!!s0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uI(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function uI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wh="@firebase/app",r0="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=new ZE("@firebase/app"),cI="@firebase/app-compat",fI="@firebase/analytics-compat",dI="@firebase/analytics",hI="@firebase/app-check-compat",pI="@firebase/app-check",mI="@firebase/auth",gI="@firebase/auth-compat",yI="@firebase/database",vI="@firebase/data-connect",_I="@firebase/database-compat",EI="@firebase/functions",TI="@firebase/functions-compat",SI="@firebase/installations",AI="@firebase/installations-compat",CI="@firebase/messaging",RI="@firebase/messaging-compat",II="@firebase/performance",wI="@firebase/performance-compat",xI="@firebase/remote-config",bI="@firebase/remote-config-compat",NI="@firebase/storage",MI="@firebase/storage-compat",DI="@firebase/firestore",VI="@firebase/ai",PI="@firebase/firestore-compat",UI="firebase",LI="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="[DEFAULT]",kI={[Wh]:"fire-core",[cI]:"fire-core-compat",[dI]:"fire-analytics",[fI]:"fire-analytics-compat",[pI]:"fire-app-check",[hI]:"fire-app-check-compat",[mI]:"fire-auth",[gI]:"fire-auth-compat",[yI]:"fire-rtdb",[vI]:"fire-data-connect",[_I]:"fire-rtdb-compat",[EI]:"fire-fn",[TI]:"fire-fn-compat",[SI]:"fire-iid",[AI]:"fire-iid-compat",[CI]:"fire-fcm",[RI]:"fire-fcm-compat",[II]:"fire-perf",[wI]:"fire-perf-compat",[xI]:"fire-rc",[bI]:"fire-rc-compat",[NI]:"fire-gcs",[MI]:"fire-gcs-compat",[DI]:"fire-fst",[PI]:"fire-fst-compat",[VI]:"fire-vertex","fire-js":"fire-js",[UI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Map,OI=new Map,jh=new Map;function a0(n,e){try{n.container.addComponent(e)}catch(t){co.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hc(n){const e=n.name;if(jh.has(e))return co.debug(`There were multiple attempts to register component ${e}.`),!1;jh.set(e,n);for(const t of qc.values())a0(t,n);for(const t of OI.values())a0(t,n);return!0}function BI(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function FI(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jo=new WE("app","Firebase",GI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=LI;function tT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const o={name:Zh,automaticDataCollectionEnabled:!0,...e},r=o.name;if(typeof r!="string"||!r)throw jo.create("bad-app-name",{appName:String(r)});if(t||(t=XE()),!t)throw jo.create("no-options");const l=qc.get(r);if(l){if(Ml(t,l.options)&&Ml(o,l.config))return l;throw jo.create("duplicate-app",{appName:r})}const c=new JR(r);for(const y of jh.values())c.addComponent(y);const d=new qI(t,o,c);return qc.set(r,d),d}function zI(n=Zh){const e=qc.get(n);if(!e&&n===Zh&&XE())return tT();if(!e)throw jo.create("no-app",{appName:n});return e}function Jr(n,e,t){let o=kI[n]??n;t&&(o+=`-${t}`);const r=o.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${o}" with version "${e}":`];r&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),co.warn(c.join(" "));return}Hc(new Dl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="firebase-heartbeat-database",JI=1,Vl="firebase-heartbeat-store";let Fh=null;function nT(){return Fh||(Fh=sI(YI,JI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vl)}catch(t){console.warn(t)}}}}).catch(n=>{throw jo.create("idb-open",{originalErrorMessage:n.message})})),Fh}async function KI(n){try{const t=(await nT()).transaction(Vl),o=await t.objectStore(Vl).get(iT(n));return await t.done,o}catch(e){if(e instanceof oa)co.warn(e.message);else{const t=jo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});co.warn(t.message)}}}async function l0(n,e){try{const o=(await nT()).transaction(Vl,"readwrite");await o.objectStore(Vl).put(e,iT(n)),await o.done}catch(t){if(t instanceof oa)co.warn(t.message);else{const o=jo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});co.warn(o.message)}}}function iT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=1024,QI=30;class XI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ZI(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=u0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>QI){const c=jI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){co.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=u0(),{heartbeatsToSend:o,unsentEntries:r}=WI(this._heartbeatsCache.heartbeats),l=Gc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return co.warn(t),""}}}function u0(){return new Date().toISOString().substring(0,10)}function WI(n,e=$I){const t=[];let o=n.slice();for(const r of n){const l=t.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),c0(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),c0(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class ZI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OR()?BR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await KI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return l0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return l0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function c0(n){return Gc(JSON.stringify({version:2,heartbeats:n})).length}function jI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let o=1;o<n.length;o++)n[o].date<t&&(t=n[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(n){Hc(new Dl("platform-logger",e=>new lI(e),"PRIVATE")),Hc(new Dl("heartbeat",e=>new XI(e),"PRIVATE")),Jr(Wh,r0,n),Jr(Wh,r0,"esm2020"),Jr("fire-js","")}ew("");var tw="firebase",nw="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr(tw,nw,"app");var f0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,oT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function b(){}b.prototype=N.prototype,D.F=N.prototype,D.prototype=new b,D.prototype.constructor=D,D.D=function(P,V,k){for(var M=Array(arguments.length-2),j=2;j<arguments.length;j++)M[j-2]=arguments[j];return N.prototype[V].apply(P,M)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,N,b){b||(b=0);const P=Array(16);if(typeof N=="string")for(var V=0;V<16;++V)P[V]=N.charCodeAt(b++)|N.charCodeAt(b++)<<8|N.charCodeAt(b++)<<16|N.charCodeAt(b++)<<24;else for(V=0;V<16;++V)P[V]=N[b++]|N[b++]<<8|N[b++]<<16|N[b++]<<24;N=D.g[0],b=D.g[1],V=D.g[2];let k=D.g[3],M;M=N+(k^b&(V^k))+P[0]+3614090360&4294967295,N=b+(M<<7&4294967295|M>>>25),M=k+(V^N&(b^V))+P[1]+3905402710&4294967295,k=N+(M<<12&4294967295|M>>>20),M=V+(b^k&(N^b))+P[2]+606105819&4294967295,V=k+(M<<17&4294967295|M>>>15),M=b+(N^V&(k^N))+P[3]+3250441966&4294967295,b=V+(M<<22&4294967295|M>>>10),M=N+(k^b&(V^k))+P[4]+4118548399&4294967295,N=b+(M<<7&4294967295|M>>>25),M=k+(V^N&(b^V))+P[5]+1200080426&4294967295,k=N+(M<<12&4294967295|M>>>20),M=V+(b^k&(N^b))+P[6]+2821735955&4294967295,V=k+(M<<17&4294967295|M>>>15),M=b+(N^V&(k^N))+P[7]+4249261313&4294967295,b=V+(M<<22&4294967295|M>>>10),M=N+(k^b&(V^k))+P[8]+1770035416&4294967295,N=b+(M<<7&4294967295|M>>>25),M=k+(V^N&(b^V))+P[9]+2336552879&4294967295,k=N+(M<<12&4294967295|M>>>20),M=V+(b^k&(N^b))+P[10]+4294925233&4294967295,V=k+(M<<17&4294967295|M>>>15),M=b+(N^V&(k^N))+P[11]+2304563134&4294967295,b=V+(M<<22&4294967295|M>>>10),M=N+(k^b&(V^k))+P[12]+1804603682&4294967295,N=b+(M<<7&4294967295|M>>>25),M=k+(V^N&(b^V))+P[13]+4254626195&4294967295,k=N+(M<<12&4294967295|M>>>20),M=V+(b^k&(N^b))+P[14]+2792965006&4294967295,V=k+(M<<17&4294967295|M>>>15),M=b+(N^V&(k^N))+P[15]+1236535329&4294967295,b=V+(M<<22&4294967295|M>>>10),M=N+(V^k&(b^V))+P[1]+4129170786&4294967295,N=b+(M<<5&4294967295|M>>>27),M=k+(b^V&(N^b))+P[6]+3225465664&4294967295,k=N+(M<<9&4294967295|M>>>23),M=V+(N^b&(k^N))+P[11]+643717713&4294967295,V=k+(M<<14&4294967295|M>>>18),M=b+(k^N&(V^k))+P[0]+3921069994&4294967295,b=V+(M<<20&4294967295|M>>>12),M=N+(V^k&(b^V))+P[5]+3593408605&4294967295,N=b+(M<<5&4294967295|M>>>27),M=k+(b^V&(N^b))+P[10]+38016083&4294967295,k=N+(M<<9&4294967295|M>>>23),M=V+(N^b&(k^N))+P[15]+3634488961&4294967295,V=k+(M<<14&4294967295|M>>>18),M=b+(k^N&(V^k))+P[4]+3889429448&4294967295,b=V+(M<<20&4294967295|M>>>12),M=N+(V^k&(b^V))+P[9]+568446438&4294967295,N=b+(M<<5&4294967295|M>>>27),M=k+(b^V&(N^b))+P[14]+3275163606&4294967295,k=N+(M<<9&4294967295|M>>>23),M=V+(N^b&(k^N))+P[3]+4107603335&4294967295,V=k+(M<<14&4294967295|M>>>18),M=b+(k^N&(V^k))+P[8]+1163531501&4294967295,b=V+(M<<20&4294967295|M>>>12),M=N+(V^k&(b^V))+P[13]+2850285829&4294967295,N=b+(M<<5&4294967295|M>>>27),M=k+(b^V&(N^b))+P[2]+4243563512&4294967295,k=N+(M<<9&4294967295|M>>>23),M=V+(N^b&(k^N))+P[7]+1735328473&4294967295,V=k+(M<<14&4294967295|M>>>18),M=b+(k^N&(V^k))+P[12]+2368359562&4294967295,b=V+(M<<20&4294967295|M>>>12),M=N+(b^V^k)+P[5]+4294588738&4294967295,N=b+(M<<4&4294967295|M>>>28),M=k+(N^b^V)+P[8]+2272392833&4294967295,k=N+(M<<11&4294967295|M>>>21),M=V+(k^N^b)+P[11]+1839030562&4294967295,V=k+(M<<16&4294967295|M>>>16),M=b+(V^k^N)+P[14]+4259657740&4294967295,b=V+(M<<23&4294967295|M>>>9),M=N+(b^V^k)+P[1]+2763975236&4294967295,N=b+(M<<4&4294967295|M>>>28),M=k+(N^b^V)+P[4]+1272893353&4294967295,k=N+(M<<11&4294967295|M>>>21),M=V+(k^N^b)+P[7]+4139469664&4294967295,V=k+(M<<16&4294967295|M>>>16),M=b+(V^k^N)+P[10]+3200236656&4294967295,b=V+(M<<23&4294967295|M>>>9),M=N+(b^V^k)+P[13]+681279174&4294967295,N=b+(M<<4&4294967295|M>>>28),M=k+(N^b^V)+P[0]+3936430074&4294967295,k=N+(M<<11&4294967295|M>>>21),M=V+(k^N^b)+P[3]+3572445317&4294967295,V=k+(M<<16&4294967295|M>>>16),M=b+(V^k^N)+P[6]+76029189&4294967295,b=V+(M<<23&4294967295|M>>>9),M=N+(b^V^k)+P[9]+3654602809&4294967295,N=b+(M<<4&4294967295|M>>>28),M=k+(N^b^V)+P[12]+3873151461&4294967295,k=N+(M<<11&4294967295|M>>>21),M=V+(k^N^b)+P[15]+530742520&4294967295,V=k+(M<<16&4294967295|M>>>16),M=b+(V^k^N)+P[2]+3299628645&4294967295,b=V+(M<<23&4294967295|M>>>9),M=N+(V^(b|~k))+P[0]+4096336452&4294967295,N=b+(M<<6&4294967295|M>>>26),M=k+(b^(N|~V))+P[7]+1126891415&4294967295,k=N+(M<<10&4294967295|M>>>22),M=V+(N^(k|~b))+P[14]+2878612391&4294967295,V=k+(M<<15&4294967295|M>>>17),M=b+(k^(V|~N))+P[5]+4237533241&4294967295,b=V+(M<<21&4294967295|M>>>11),M=N+(V^(b|~k))+P[12]+1700485571&4294967295,N=b+(M<<6&4294967295|M>>>26),M=k+(b^(N|~V))+P[3]+2399980690&4294967295,k=N+(M<<10&4294967295|M>>>22),M=V+(N^(k|~b))+P[10]+4293915773&4294967295,V=k+(M<<15&4294967295|M>>>17),M=b+(k^(V|~N))+P[1]+2240044497&4294967295,b=V+(M<<21&4294967295|M>>>11),M=N+(V^(b|~k))+P[8]+1873313359&4294967295,N=b+(M<<6&4294967295|M>>>26),M=k+(b^(N|~V))+P[15]+4264355552&4294967295,k=N+(M<<10&4294967295|M>>>22),M=V+(N^(k|~b))+P[6]+2734768916&4294967295,V=k+(M<<15&4294967295|M>>>17),M=b+(k^(V|~N))+P[13]+1309151649&4294967295,b=V+(M<<21&4294967295|M>>>11),M=N+(V^(b|~k))+P[4]+4149444226&4294967295,N=b+(M<<6&4294967295|M>>>26),M=k+(b^(N|~V))+P[11]+3174756917&4294967295,k=N+(M<<10&4294967295|M>>>22),M=V+(N^(k|~b))+P[2]+718787259&4294967295,V=k+(M<<15&4294967295|M>>>17),M=b+(k^(V|~N))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+k&4294967295}o.prototype.v=function(D,N){N===void 0&&(N=D.length);const b=N-this.blockSize,P=this.C;let V=this.h,k=0;for(;k<N;){if(V==0)for(;k<=b;)r(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<N;)if(P[V++]=D.charCodeAt(k++),V==this.blockSize){r(this,P),V=0;break}}else for(;k<N;)if(P[V++]=D[k++],V==this.blockSize){r(this,P),V=0;break}}this.h=V,this.o+=N},o.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;N=this.o*8;for(var b=D.length-8;b<D.length;++b)D[b]=N&255,N/=256;for(this.v(D),D=Array(16),N=0,b=0;b<4;++b)for(let P=0;P<32;P+=8)D[N++]=this.g[b]>>>P&255;return D};function l(D,N){var b=d;return Object.prototype.hasOwnProperty.call(b,D)?b[D]:b[D]=N(D)}function c(D,N){this.h=N;const b=[];let P=!0;for(let V=D.length-1;V>=0;V--){const k=D[V]|0;P&&k==N||(b[V]=k,P=!1)}this.g=b}var d={};function y(D){return-128<=D&&D<128?l(D,function(N){return new c([N|0],N<0?-1:0)}):new c([D|0],D<0?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return O(m(-D));const N=[];let b=1;for(let P=0;D>=b;P++)N[P]=D/b|0,b*=4294967296;return new c(N,0)}function _(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return O(_(D.substring(1),N));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=m(Math.pow(N,8));let P=E;for(let k=0;k<D.length;k+=8){var V=Math.min(8,D.length-k);const M=parseInt(D.substring(k,k+V),N);V<8?(V=m(Math.pow(N,V)),P=P.j(V).add(m(M))):(P=P.j(b),P=P.add(m(M)))}return P}var E=y(0),S=y(1),I=y(16777216);n=c.prototype,n.m=function(){if(G(this))return-O(this).m();let D=0,N=1;for(let b=0;b<this.g.length;b++){const P=this.i(b);D+=(P>=0?P:4294967296+P)*N,N*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(L(this))return"0";if(G(this))return"-"+O(this).toString(D);const N=m(Math.pow(D,6));var b=this;let P="";for(;;){const V=re(b,N).g;b=K(b,V.j(N));let k=((b.g.length>0?b.g[0]:b.h)>>>0).toString(D);if(b=V,L(b))return k+P;for(;k.length<6;)k="0"+k;P=k+P}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function L(D){if(D.h!=0)return!1;for(let N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function G(D){return D.h==-1}n.l=function(D){return D=K(this,D),G(D)?-1:L(D)?0:1};function O(D){const N=D.g.length,b=[];for(let P=0;P<N;P++)b[P]=~D.g[P];return new c(b,~D.h).add(S)}n.abs=function(){return G(this)?O(this):this},n.add=function(D){const N=Math.max(this.g.length,D.g.length),b=[];let P=0;for(let V=0;V<=N;V++){let k=P+(this.i(V)&65535)+(D.i(V)&65535),M=(k>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);P=M>>>16,k&=65535,M&=65535,b[V]=M<<16|k}return new c(b,b[b.length-1]&-2147483648?-1:0)};function K(D,N){return D.add(O(N))}n.j=function(D){if(L(this)||L(D))return E;if(G(this))return G(D)?O(this).j(O(D)):O(O(this).j(D));if(G(D))return O(this.j(O(D)));if(this.l(I)<0&&D.l(I)<0)return m(this.m()*D.m());const N=this.g.length+D.g.length,b=[];for(var P=0;P<2*N;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(let V=0;V<D.g.length;V++){const k=this.i(P)>>>16,M=this.i(P)&65535,j=D.i(V)>>>16,Ee=D.i(V)&65535;b[2*P+2*V]+=M*Ee,ie(b,2*P+2*V),b[2*P+2*V+1]+=k*Ee,ie(b,2*P+2*V+1),b[2*P+2*V+1]+=M*j,ie(b,2*P+2*V+1),b[2*P+2*V+2]+=k*j,ie(b,2*P+2*V+2)}for(D=0;D<N;D++)b[D]=b[2*D+1]<<16|b[2*D];for(D=N;D<2*N;D++)b[D]=0;return new c(b,0)};function ie(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function Z(D,N){this.g=D,this.h=N}function re(D,N){if(L(N))throw Error("division by zero");if(L(D))return new Z(E,E);if(G(D))return N=re(O(D),N),new Z(O(N.g),O(N.h));if(G(N))return N=re(D,O(N)),new Z(O(N.g),N.h);if(D.g.length>30){if(G(D)||G(N))throw Error("slowDivide_ only works with positive integers.");for(var b=S,P=N;P.l(D)<=0;)b=ue(b),P=ue(P);var V=ce(b,1),k=ce(P,1);for(P=ce(P,2),b=ce(b,2);!L(P);){var M=k.add(P);M.l(D)<=0&&(V=V.add(b),k=M),P=ce(P,1),b=ce(b,1)}return N=K(D,V.j(N)),new Z(V,N)}for(V=E;D.l(N)>=0;){for(b=Math.max(1,Math.floor(D.m()/N.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),k=m(b),M=k.j(N);G(M)||M.l(D)>0;)b-=P,k=m(b),M=k.j(N);L(k)&&(k=S),V=V.add(k),D=K(D,M)}return new Z(V,D)}n.B=function(D){return re(this,D).h},n.and=function(D){const N=Math.max(this.g.length,D.g.length),b=[];for(let P=0;P<N;P++)b[P]=this.i(P)&D.i(P);return new c(b,this.h&D.h)},n.or=function(D){const N=Math.max(this.g.length,D.g.length),b=[];for(let P=0;P<N;P++)b[P]=this.i(P)|D.i(P);return new c(b,this.h|D.h)},n.xor=function(D){const N=Math.max(this.g.length,D.g.length),b=[];for(let P=0;P<N;P++)b[P]=this.i(P)^D.i(P);return new c(b,this.h^D.h)};function ue(D){const N=D.g.length+1,b=[];for(let P=0;P<N;P++)b[P]=D.i(P)<<1|D.i(P-1)>>>31;return new c(b,D.h)}function ce(D,N){const b=N>>5;N%=32;const P=D.g.length-b,V=[];for(let k=0;k<P;k++)V[k]=N>0?D.i(k+b)>>>N|D.i(k+b+1)<<32-N:D.i(k+b);return new c(V,D.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,oT=o,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=_,es=c}).apply(typeof f0<"u"?f0:typeof self<"u"?self:typeof window<"u"?window:{});var Sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sT,Tl,rT,Vc,ep,aT,lT,uT;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sc=="object"&&Sc];for(var T=0;T<p.length;++T){var C=p[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=t(this);function r(p,T){if(T)e:{var C=o;p=p.split(".");for(var x=0;x<p.length-1;x++){var H=p[x];if(!(H in C))break e;C=C[H]}p=p[p.length-1],x=C[p],T=T(x),T!=x&&T!=null&&e(C,p,{configurable:!0,writable:!0,value:T})}}r("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(p){return p||function(T){var C=[],x;for(x in T)Object.prototype.hasOwnProperty.call(T,x)&&C.push([x,T[x]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function y(p,T,C){return p.call.apply(p.bind,arguments)}function m(p,T,C){return m=y,m.apply(null,arguments)}function _(p,T){var C=Array.prototype.slice.call(arguments,1);return function(){var x=C.slice();return x.push.apply(x,arguments),p.apply(this,x)}}function E(p,T){function C(){}C.prototype=T.prototype,p.Z=T.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(x,H,Q){for(var fe=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)fe[Ve-2]=arguments[Ve];return T.prototype[H].apply(x,fe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function I(p){const T=p.length;if(T>0){const C=Array(T);for(let x=0;x<T;x++)C[x]=p[x];return C}return[]}function L(p,T){for(let x=1;x<arguments.length;x++){const H=arguments[x];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=p.length||0;const Q=H.length||0;p.length=C+Q;for(let fe=0;fe<Q;fe++)p[C+fe]=H[fe]}else p.push(H)}}class G{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function O(p){c.setTimeout(()=>{throw p},0)}function K(){var p=D;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class ie{constructor(){this.h=this.g=null}add(T,C){const x=Z.get();x.set(T,C),this.h?this.h.next=x:this.g=x,this.h=x}}var Z=new G(()=>new re,p=>p.reset());class re{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ce=!1,D=new ie,N=()=>{const p=Promise.resolve(void 0);ue=()=>{p.then(b)}};function b(){for(var p;p=K();){try{p.h.call(p.g)}catch(C){O(C)}var T=Z;T.j(p),T.h<100&&(T.h++,p.next=T.g,T.g=p)}ce=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};c.addEventListener("test",C,T),c.removeEventListener("test",C,T)}catch{}return p})();function M(p){return/^[\s\xa0]*$/.test(p)}function j(p,T){V.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,T)}E(j,V),j.prototype.init=function(p,T){const C=this.type=p.type,x=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget,T||(C=="mouseover"?T=p.fromElement:C=="mouseout"&&(T=p.toElement)),this.relatedTarget=T,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&j.Z.h.call(this)},j.prototype.h=function(){j.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),$=0;function ae(p,T,C,x,H){this.listener=p,this.proxy=null,this.src=T,this.type=C,this.capture=!!x,this.ha=H,this.key=++$,this.da=this.fa=!1}function ye(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function De(p,T,C){for(const x in p)T.call(C,p[x],x,p)}function Ye(p,T){for(const C in p)T.call(void 0,p[C],C,p)}function F(p){const T={};for(const C in p)T[C]=p[C];return T}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(p,T){let C,x;for(let H=1;H<arguments.length;H++){x=arguments[H];for(C in x)p[C]=x[C];for(let Q=0;Q<te.length;Q++)C=te[Q],Object.prototype.hasOwnProperty.call(x,C)&&(p[C]=x[C])}}function ee(p){this.src=p,this.g={},this.h=0}ee.prototype.add=function(p,T,C,x,H){const Q=p.toString();p=this.g[Q],p||(p=this.g[Q]=[],this.h++);const fe=Te(p,T,x,H);return fe>-1?(T=p[fe],C||(T.fa=!1)):(T=new ae(T,this.src,Q,!!x,H),T.fa=C,p.push(T)),T};function he(p,T){const C=T.type;if(C in p.g){var x=p.g[C],H=Array.prototype.indexOf.call(x,T,void 0),Q;(Q=H>=0)&&Array.prototype.splice.call(x,H,1),Q&&(ye(T),p.g[C].length==0&&(delete p.g[C],p.h--))}}function Te(p,T,C,x){for(let H=0;H<p.length;++H){const Q=p[H];if(!Q.da&&Q.listener==T&&Q.capture==!!C&&Q.ha==x)return H}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),lt={};function We(p,T,C,x,H){if(Array.isArray(T)){for(let Q=0;Q<T.length;Q++)We(p,T[Q],C,x,H);return null}return C=ha(C),p&&p[Ee]?p.J(T,C,d(x)?!!x.capture:!1,H):Qn(p,T,C,!1,x,H)}function Qn(p,T,C,x,H,Q){if(!T)throw Error("Invalid event type");const fe=d(H)?!!H.capture:!!H;let Ve=gi(p);if(Ve||(p[Me]=Ve=new ee(p)),C=Ve.add(T,C,x,fe,Q),C.proxy)return C;if(x=Xn(),C.proxy=x,x.src=p,x.listener=C,p.addEventListener)k||(H=fe),H===void 0&&(H=!1),p.addEventListener(T.toString(),x,H);else if(p.attachEvent)p.attachEvent(Tn(T.toString()),x);else if(p.addListener&&p.removeListener)p.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Xn(){function p(C){return T.call(p.src,p.listener,C)}const T=yo;return p}function Ft(p,T,C,x,H){if(Array.isArray(T))for(var Q=0;Q<T.length;Q++)Ft(p,T[Q],C,x,H);else x=d(x)?!!x.capture:!!x,C=ha(C),p&&p[Ee]?(p=p.i,Q=String(T).toString(),Q in p.g&&(T=p.g[Q],C=Te(T,C,x,H),C>-1&&(ye(T[C]),Array.prototype.splice.call(T,C,1),T.length==0&&(delete p.g[Q],p.h--)))):p&&(p=gi(p))&&(T=p.g[T.toString()],p=-1,T&&(p=Te(T,C,x,H)),(C=p>-1?T[p]:null)&&rt(C))}function rt(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[Ee])he(T.i,p);else{var C=p.type,x=p.proxy;T.removeEventListener?T.removeEventListener(C,x,p.capture):T.detachEvent?T.detachEvent(Tn(C),x):T.addListener&&T.removeListener&&T.removeListener(x),(C=gi(T))?(he(C,p),C.h==0&&(C.src=null,T[Me]=null)):ye(p)}}}function Tn(p){return p in lt?lt[p]:lt[p]="on"+p}function yo(p,T){if(p.da)p=!0;else{T=new j(T,this);const C=p.listener,x=p.ha||p.src;p.fa&&rt(p),p=C.call(x,T)}return p}function gi(p){return p=p[Me],p instanceof ee?p:null}var da="__closure_events_fn_"+(Math.random()*1e9>>>0);function ha(p){return typeof p=="function"?p:(p[da]||(p[da]=function(T){return p.handleEvent(T)}),p[da])}function Rt(){P.call(this),this.i=new ee(this),this.M=this,this.G=null}E(Rt,P),Rt.prototype[Ee]=!0,Rt.prototype.removeEventListener=function(p,T,C,x){Ft(this,p,T,C,x)};function Lt(p,T){var C,x=p.G;if(x)for(C=[];x;x=x.G)C.push(x);if(p=p.M,x=T.type||T,typeof T=="string")T=new V(T,p);else if(T instanceof V)T.target=T.target||p;else{var H=T;T=new V(x,p),de(T,H)}H=!0;let Q,fe;if(C)for(fe=C.length-1;fe>=0;fe--)Q=T.g=C[fe],H=vo(Q,x,!0,T)&&H;if(Q=T.g=p,H=vo(Q,x,!0,T)&&H,H=vo(Q,x,!1,T)&&H,C)for(fe=0;fe<C.length;fe++)Q=T.g=C[fe],H=vo(Q,x,!1,T)&&H}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var p=this.i;for(const T in p.g){const C=p.g[T];for(let x=0;x<C.length;x++)ye(C[x]);delete p.g[T],p.h--}}this.G=null},Rt.prototype.J=function(p,T,C,x){return this.i.add(String(p),T,!1,C,x)},Rt.prototype.K=function(p,T,C,x){return this.i.add(String(p),T,!0,C,x)};function vo(p,T,C,x){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();let H=!0;for(let Q=0;Q<T.length;++Q){const fe=T[Q];if(fe&&!fe.da&&fe.capture==C){const Ve=fe.listener,Et=fe.ha||fe.src;fe.fa&&he(p.i,fe),H=Ve.call(Et,x)!==!1&&H}}return H&&!x.defaultPrevented}function Vf(p,T){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:c.setTimeout(p,T||0)}function Kl(p){p.g=Vf(()=>{p.g=null,p.i&&(p.i=!1,Kl(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class an extends P{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Kl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ds(p){P.call(this),this.h=p,this.g={}}E(ds,P);var pa=[];function ma(p){De(p.g,function(T,C){this.g.hasOwnProperty(C)&&rt(T)},p),p.g={}}ds.prototype.N=function(){ds.Z.N.call(this),ma(this)},ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _o=c.JSON.stringify,Pf=c.JSON.parse,$l=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function Ql(){}function Xl(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){V.call(this,"d")}E(Jt,V);function Vn(){V.call(this,"c")}E(Vn,V);var _t={},Wl=null;function Zs(){return Wl=Wl||new Rt}_t.Ia="serverreachability";function Zl(p){V.call(this,_t.Ia,p)}E(Zl,V);function yi(p){const T=Zs();Lt(T,new Zl(T))}_t.STAT_EVENT="statevent";function hs(p,T){V.call(this,_t.STAT_EVENT,p),this.stat=T}E(hs,V);function It(p){const T=Zs();Lt(T,new hs(T,p))}_t.Ja="timingevent";function vi(p,T){V.call(this,_t.Ja,p),this.size=T}E(vi,V);function _i(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},T)}function Zn(){this.g=!0}Zn.prototype.ua=function(){this.g=!1};function Uf(p,T,C,x,H,Q){p.info(function(){if(p.g)if(Q){var fe="",Ve=Q.split("&");for(let Qe=0;Qe<Ve.length;Qe++){var Et=Ve[Qe].split("=");if(Et.length>1){const ht=Et[0];Et=Et[1];const kn=ht.split("_");fe=kn.length>=2&&kn[1]=="type"?fe+(ht+"="+Et+"&"):fe+(ht+"=redacted&")}}}else fe=null;else fe=Q;return"XMLHTTP REQ ("+x+") [attempt "+H+"]: "+T+`
`+C+`
`+fe})}function jl(p,T,C,x,H,Q,fe){p.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+H+"]: "+T+`
`+C+`
`+Q+" "+fe})}function Ei(p,T,C,x){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+Lf(p,C)+(x?" "+x:"")})}function ps(p,T){p.info(function(){return"TIMEOUT: "+T})}Zn.prototype.info=function(){};function Lf(p,T){if(!p.g)return T;if(!T)return null;try{const Q=JSON.parse(T);if(Q){for(p=0;p<Q.length;p++)if(Array.isArray(Q[p])){var C=Q[p];if(!(C.length<2)){var x=C[1];if(Array.isArray(x)&&!(x.length<1)){var H=x[0];if(H!="noop"&&H!="stop"&&H!="close")for(let fe=1;fe<x.length;fe++)x[fe]=""}}}}return _o(Q)}catch{return T}}var ms={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ga={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ya;function gs(){}E(gs,Ql),gs.prototype.g=function(){return new XMLHttpRequest},ya=new gs;function zi(p){return encodeURIComponent(String(p))}function eu(p){var T=1;p=p.split(":");const C=[];for(;T>0&&p.length;)C.push(p.shift()),T--;return p.length&&C.push(p.join(":")),C}function jn(p,T,C,x){this.j=p,this.i=T,this.l=C,this.S=x||1,this.V=new ds(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}var wt={},Gt={};function Ti(p,T,C){p.M=1,p.A=ys(bt(T)),p.u=C,p.R=!0,js(p,null)}function js(p,T){p.F=Date.now(),Si(p),p.B=bt(p.A);var C=p.B,x=p.S;Array.isArray(x)||(x=[String(x)]),ir(C.i,"t",x),p.C=0,C=p.j.L,p.h=new ei,p.g=mu(p.j,C?T:null,!p.u),p.P>0&&(p.O=new an(m(p.Y,p,p.g),p.P)),T=p.V,C=p.g,x=p.ba;var H="readystatechange";Array.isArray(H)||(H&&(pa[0]=H.toString()),H=pa);for(let Q=0;Q<H.length;Q++){const fe=We(C,H[Q],x||T.handleEvent,!1,T.h||T);if(!fe)break;T.g[fe.key]=fe}T=p.J?F(p.J):{},p.u?(p.v||(p.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,T)):(p.v="GET",p.g.ea(p.B,p.v,null,T)),yi(),Uf(p.i,p.v,p.B,p.l,p.S,p.u)}jn.prototype.ba=function(p){p=p.target;const T=this.O;T&&ii(p)==3?T.j():this.Y(p)},jn.prototype.Y=function(p){try{if(p==this.g)e:{const Ve=ii(this.g),Et=this.g.ya(),Qe=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Kt(this.g)))){this.K||Ve!=4||Et==7||(Et==8||Qe<=0?yi(3):yi(2)),Ai(this);var T=this.g.ca();this.X=T;var C=kf(this);if(this.o=T==200,jl(this.i,this.v,this.B,this.l,this.S,Ve,T),this.o){if(this.U&&!this.L){t:{if(this.g){var x,H=this.g;if((x=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(x)){var Q=x;break t}}Q=null}if(p=Q)Ei(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,p);else{this.o=!1,this.m=3,It(12),Sn(this),Pn(this);break e}}if(this.R){p=!0;let ht;for(;!this.K&&this.C<C.length;)if(ht=nu(this,C),ht==Gt){Ve==4&&(this.m=4,It(14),p=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==wt){this.m=4,It(15),Ei(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else Ei(this.i,this.l,ht,null),Ci(this,ht);if(tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||C.length!=0||this.h.h||(this.m=1,It(16),p=!1),this.o=this.o&&p,!p)Ei(this.i,this.l,C,"[Invalid Chunked Response]"),Sn(this),Pn(this);else if(C.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Da(fe),fe.P=!0,It(11))}}else Ei(this.i,this.l,C,null),Ci(this,C);Ve==4&&Sn(this),this.o&&!this.K&&(Ve==4?fu(this.j,this):(this.o=!1,Si(this)))}else Ji(this.g),T==400&&C.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Sn(this),Pn(this)}}}catch{}finally{}};function kf(p){if(!tu(p))return p.g.la();const T=Kt(p.g);if(T==="")return"";let C="";const x=T.length,H=ii(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Sn(p),Pn(p),"";p.h.i=new c.TextDecoder}for(let Q=0;Q<x;Q++)p.h.h=!0,C+=p.h.i.decode(T[Q],{stream:!(H&&Q==x-1)});return T.length=0,p.h.g+=C,p.C=0,p.h.g}function tu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function nu(p,T){var C=p.C,x=T.indexOf(`
`,C);return x==-1?Gt:(C=Number(T.substring(C,x)),isNaN(C)?wt:(x+=1,x+C>T.length?Gt:(T=T.slice(x,x+C),p.C=x+C,T)))}jn.prototype.cancel=function(){this.K=!0,Sn(this)};function Si(p){p.T=Date.now()+p.H,er(p,p.H)}function er(p,T){if(p.D!=null)throw Error("WatchDog timer not null");p.D=_i(m(p.aa,p),T)}function Ai(p){p.D&&(c.clearTimeout(p.D),p.D=null)}jn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(ps(this.i,this.B),this.M!=2&&(yi(),It(17)),Sn(this),this.m=2,Pn(this)):er(this,this.T-p)};function Pn(p){p.j.I==0||p.K||fu(p.j,p)}function Sn(p){Ai(p);var T=p.O;T&&typeof T.dispose=="function"&&T.dispose(),p.O=null,ma(p.V),p.g&&(T=p.g,p.g=null,T.abort(),T.dispose())}function Ci(p,T){try{var C=p.j;if(C.I!=0&&(C.g==p||Ii(C.h,p))){if(!p.L&&Ii(C.h,p)&&C.I==3){try{var x=C.Ba.g.parse(T)}catch{x=null}if(Array.isArray(x)&&x.length==3){var H=x;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)lr(C),wo(C);else break e;Cs(C),It(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=_i(m(C.Va,C),6e3));Ri(C.h)<=1&&C.ta&&(C.ta=void 0)}else Di(C,11)}else if((p.L||C.g==p)&&lr(C),!M(T))for(H=C.Ba.g.parse(T),T=0;T<H.length;T++){let Qe=H[T];const ht=Qe[0];if(!(ht<=C.K))if(C.K=ht,Qe=Qe[1],C.I==2)if(Qe[0]=="c"){C.M=Qe[1],C.ba=Qe[2];const kn=Qe[3];kn!=null&&(C.ka=kn,C.j.info("VER="+C.ka));const Vi=Qe[4];Vi!=null&&(C.za=Vi,C.j.info("SVER="+C.za));const oi=Qe[5];oi!=null&&typeof oi=="number"&&oi>0&&(x=1.5*oi,C.O=x,C.j.info("backChannelRequestTimeoutMs_="+x)),x=C;const si=p.g;if(si){const Rs=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rs){var Q=x.h;Q.g||Rs.indexOf("spdy")==-1&&Rs.indexOf("quic")==-1&&Rs.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ea(Q,Q.h),Q.h=null))}if(x.G){const ur=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;ur&&(x.wa=ur,je(x.J,x.G,ur))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),x=C;var fe=p;if(x.na=pu(x,x.L?x.ba:null,x.W),fe.L){Ta(x.h,fe);var Ve=fe,Et=x.O;Et&&(Ve.H=Et),Ve.D&&(Ai(Ve),Si(Ve)),x.g=fe}else uu(x);C.i.length>0&&Mi(C)}else Qe[0]!="stop"&&Qe[0]!="close"||Di(C,7);else C.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Di(C,7):Na(C):Qe[0]!="noop"&&C.l&&C.l.qa(Qe),C.A=0)}}yi(4)}catch{}}var xt=class{constructor(p,T){this.g=p,this.map=T}};function va(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _a(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Ri(p){return p.h?1:p.g?p.g.size:0}function Ii(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function Ea(p,T){p.g?p.g.add(T):p.h=T}function Ta(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}va.prototype.cancel=function(){if(this.i=Sa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Sa(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const C of p.g.values())T=T.concat(C.G);return T}return I(p.i)}var iu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tr(p,T){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const x=p[C].indexOf("=");let H,Q=null;x>=0?(H=p[C].substring(0,x),Q=p[C].substring(x+1)):H=p[C],T(H,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function An(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;p instanceof An?(this.l=p.l,qt(this,p.j),this.o=p.o,this.g=p.g,Eo(this,p.u),this.h=p.h,Aa(this,au(p.i)),this.m=p.m):p&&(T=String(p).match(iu))?(this.l=!1,qt(this,T[1]||"",!0),this.o=wi(T[2]||""),this.g=wi(T[3]||"",!0),Eo(this,T[4]),this.h=wi(T[5]||"",!0),Aa(this,T[6]||"",!0),this.m=wi(T[7]||"")):(this.l=!1,this.i=new So(null,this.l))}An.prototype.toString=function(){const p=[];var T=this.j;T&&p.push(vs(T,nr,!0),":");var C=this.g;return(C||T=="file")&&(p.push("//"),(T=this.o)&&p.push(vs(T,nr,!0),"@"),p.push(zi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(vs(C,C.charAt(0)=="/"?Ca:ou,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",vs(C,su)),p.join("")},An.prototype.resolve=function(p){const T=bt(this);let C=!!p.j;C?qt(T,p.j):C=!!p.o,C?T.o=p.o:C=!!p.g,C?T.g=p.g:C=p.u!=null;var x=p.h;if(C)Eo(T,p.u);else if(C=!!p.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var H=T.h.lastIndexOf("/");H!=-1&&(x=T.h.slice(0,H+1)+x)}if(H=x,H==".."||H==".")x="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){x=H.lastIndexOf("/",0)==0,H=H.split("/");const Q=[];for(let fe=0;fe<H.length;){const Ve=H[fe++];Ve=="."?x&&fe==H.length&&Q.push(""):Ve==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),x&&fe==H.length&&Q.push("")):(Q.push(Ve),x=!0)}x=Q.join("/")}else x=H}return C?T.h=x:C=p.i.toString()!=="",C?Aa(T,au(p.i)):C=!!p.m,C&&(T.m=p.m),T};function bt(p){return new An(p)}function qt(p,T,C){p.j=C?wi(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function Eo(p,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);p.u=T}else p.u=null}function Aa(p,T,C){T instanceof So?(p.i=T,or(p.i,p.l)):(C||(T=vs(T,To)),p.i=new So(T,p.l))}function je(p,T,C){p.i.set(T,C)}function ys(p){return je(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function wi(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function vs(p,T,C){return typeof p=="string"?(p=encodeURI(p).replace(T,dn),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function dn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var nr=/[#\/\?@]/g,ou=/[#\?:]/g,Ca=/[#\?]/g,To=/[#\?@]/g,su=/#/g;function So(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function hn(p){p.g||(p.g=new Map,p.h=0,p.i&&tr(p.i,function(T,C){p.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=So.prototype,n.add=function(p,T){hn(this),this.i=null,p=Ao(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(T),this.h+=1,this};function ru(p,T){hn(p),T=Ao(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function Ra(p,T){return hn(p),T=Ao(p,T),p.g.has(T)}n.forEach=function(p,T){hn(this),this.g.forEach(function(C,x){C.forEach(function(H){p.call(T,H,x,this)},this)},this)};function Ia(p,T){hn(p);let C=[];if(typeof T=="string")Ra(p,T)&&(C=C.concat(p.g.get(Ao(p,T))));else for(p=Array.from(p.g.values()),T=0;T<p.length;T++)C=C.concat(p[T]);return C}n.set=function(p,T){return hn(this),this.i=null,p=Ao(this,p),Ra(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},n.get=function(p,T){return p?(p=Ia(this,p),p.length>0?String(p[0]):T):T};function ir(p,T,C){ru(p,T),C.length>0&&(p.i=null,p.g.set(Ao(p,T),I(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(let x=0;x<T.length;x++){var C=T[x];const H=zi(C);C=Ia(this,C);for(let Q=0;Q<C.length;Q++){let fe=H;C[Q]!==""&&(fe+="="+zi(C[Q])),p.push(fe)}}return this.i=p.join("&")};function au(p){const T=new So;return T.i=p.i,p.g&&(T.g=new Map(p.g),T.h=p.h),T}function Ao(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function or(p,T){T&&!p.j&&(hn(p),p.i=null,p.g.forEach(function(C,x){const H=x.toLowerCase();x!=H&&(ru(this,x),ir(this,H,C))},p)),p.j=T}function ti(p,T){const C=new Zn;if(c.Image){const x=new Image;x.onload=_(Un,C,"TestLoadImage: loaded",!0,T,x),x.onerror=_(Un,C,"TestLoadImage: error",!1,T,x),x.onabort=_(Un,C,"TestLoadImage: abort",!1,T,x),x.ontimeout=_(Un,C,"TestLoadImage: timeout",!1,T,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=p}else T(!1)}function wa(p,T){const C=new Zn,x=new AbortController,H=setTimeout(()=>{x.abort(),Un(C,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:x.signal}).then(Q=>{clearTimeout(H),Q.ok?Un(C,"TestPingServer: ok",!0,T):Un(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(H),Un(C,"TestPingServer: error",!1,T)})}function Un(p,T,C,x,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),x(C)}catch{}}function Co(){this.g=new $l}function xi(p){this.i=p.Sb||null,this.h=p.ab||!1}E(xi,Ql),xi.prototype.g=function(){return new _s(this.i,this.h)};function _s(p,T){Rt.call(this),this.H=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(_s,Rt),n=_s.prototype,n.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=T,this.readyState=1,ni(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(T.body=p),(this.H||c).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ro(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;sr(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function sr(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?Ro(this):ni(this),this.readyState==3&&sr(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,Ro(this))},n.Na=function(p){this.g&&(this.response=p,Ro(this))},n.ga=function(){this.g&&Ro(this)};function Ro(p){p.readyState=4,p.l=null,p.j=null,p.B=null,ni(p)}n.setRequestHeader=function(p,T){this.A.append(p,T)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=T.next();return p.join(`\r
`)};function ni(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(_s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Ln(p){let T="";return De(p,function(C,x){T+=x,T+=":",T+=C,T+=`\r
`}),T}function Es(p,T,C){e:{for(x in C){var x=!1;break e}x=!0}x||(C=Ln(C),typeof p=="string"?C!=null&&zi(C):je(p,T,C))}function nt(p){Rt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(nt,Rt);var bi=/^https?$/i,xa=["POST","PUT"];n=nt.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,T,C,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ya.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(Q){Ts(this,Q);return}if(p=C||"",C=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var H in x)C.set(H,x[H]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const Q of x.keys())C.set(Q,x.get(Q));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=c.FormData&&p instanceof c.FormData,!(Array.prototype.indexOf.call(xa,T,void 0)>=0)||x||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,fe]of C)this.g.setRequestHeader(Q,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(Q){Ts(this,Q)}};function Ts(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.o=5,ba(p),Yi(p)}function ba(p){p.A||(p.A=!0,Lt(p,"complete"),Lt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Lt(this,"complete"),Lt(this,"abort"),Yi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ss(this):this.Xa())},n.Xa=function(){Ss(this)};function Ss(p){if(p.h&&typeof l<"u"){if(p.v&&ii(p)==4)setTimeout(p.Ca.bind(p),0);else if(Lt(p,"readystatechange"),ii(p)==4){p.h=!1;try{const Q=p.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var x;if(x=Q===0){let fe=String(p.D).match(iu)[1]||null;!fe&&c.self&&c.self.location&&(fe=c.self.location.protocol.slice(0,-1)),x=!bi.test(fe?fe.toLowerCase():"")}C=x}if(C)Lt(p,"complete"),Lt(p,"success");else{p.o=6;try{var H=ii(p)>2?p.g.statusText:""}catch{H=""}p.l=H+" ["+p.ca()+"]",ba(p)}}finally{Yi(p)}}}}function Yi(p,T){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,T||Lt(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ii(p){return p.g?p.g.readyState:0}n.ca=function(){try{return ii(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),Pf(T)}};function Kt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ji(p){const T={};p=(p.g&&ii(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<p.length;x++){if(M(p[x]))continue;var C=eu(p[x]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=T[H]||[];T[H]=Q,Q.push(C)}Ye(T,function(x){return x.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(p,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||T}function Io(p){this.za=0,this.i=[],this.j=new Zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ni("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ni("baseRetryDelayMs",5e3,p),this.Za=Ni("retryDelaySeedMs",1e4,p),this.Ta=Ni("forwardChannelMaxRetries",2,p),this.va=Ni("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new va(p&&p.concurrentRequestLimit),this.Ba=new Co,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Io.prototype,n.ka=8,n.I=1,n.connect=function(p,T,C,x){It(0),this.W=p,this.H=T||{},C&&x!==void 0&&(this.H.OSID=C,this.H.OAID=x),this.F=this.X,this.J=pu(this,null,this.W),Mi(this)};function Na(p){if(rr(p),p.I==3){var T=p.V++,C=bt(p.J);if(je(C,"SID",p.M),je(C,"RID",T),je(C,"TYPE","terminate"),As(p,C),T=new jn(p,p.j,T),T.M=2,T.A=ys(bt(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(T.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=T.A,C=!0),C||(T.g=mu(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Si(T)}hu(p)}function wo(p){p.g&&(Da(p),p.g.cancel(),p.g=null)}function rr(p){wo(p),p.v&&(c.clearTimeout(p.v),p.v=null),lr(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&c.clearTimeout(p.m),p.m=null)}function Mi(p){if(!_a(p.h)&&!p.m){p.m=!0;var T=p.Ea;ue||N(),ce||(ue(),ce=!0),D.add(T,p),p.D=0}}function ar(p,T){return Ri(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=T.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=_i(m(p.Ea,p,T),du(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const H=new jn(this,this.j,p);let Q=this.o;if(this.U&&(Q?(Q=F(Q),de(Q,this.U)):Q=this.U),this.u!==null||this.R||(H.J=Q,Q=null),this.S)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var x=this.i[C];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(T+=x,T>4096){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=lu(this,H,T),C=bt(this.J),je(C,"RID",p),je(C,"CVER",22),this.G&&je(C,"X-HTTP-Session-Id",this.G),As(this,C),Q&&(this.R?T="headers="+zi(Ln(Q))+"&"+T:this.u&&Es(C,this.u,Q)),Ea(this.h,H),this.Ra&&je(C,"TYPE","init"),this.S?(je(C,"$req",T),je(C,"SID","null"),H.U=!0,Ti(H,C,null)):Ti(H,C,T),this.I=2}}else this.I==3&&(p?Ma(this,p):this.i.length==0||_a(this.h)||Ma(this))};function Ma(p,T){var C;T?C=T.l:C=p.V++;const x=bt(p.J);je(x,"SID",p.M),je(x,"RID",C),je(x,"AID",p.K),As(p,x),p.u&&p.o&&Es(x,p.u,p.o),C=new jn(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),T&&(p.i=T.G.concat(p.i)),T=lu(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ea(p.h,C),Ti(C,x,T)}function As(p,T){p.H&&De(p.H,function(C,x){je(T,x,C)}),p.l&&De({},function(C,x){je(T,x,C)})}function lu(p,T,C){C=Math.min(p.i.length,C);const x=p.l?m(p.l.Ka,p.l,p):null;e:{var H=p.i;let Ve=-1;for(;;){const Et=["count="+C];Ve==-1?C>0?(Ve=H[0].g,Et.push("ofs="+Ve)):Ve=0:Et.push("ofs="+Ve);let Qe=!0;for(let ht=0;ht<C;ht++){var Q=H[ht].g;const kn=H[ht].map;if(Q-=Ve,Q<0)Ve=Math.max(0,H[ht].g-100),Qe=!1;else try{Q="req"+Q+"_"||"";try{var fe=kn instanceof Map?kn:Object.entries(kn);for(const[Vi,oi]of fe){let si=oi;d(oi)&&(si=_o(oi)),Et.push(Q+Vi+"="+encodeURIComponent(si))}}catch(Vi){throw Et.push(Q+"type="+encodeURIComponent("_badmap")),Vi}}catch{x&&x(kn)}}if(Qe){fe=Et.join("&");break e}}fe=void 0}return p=p.i.splice(0,C),T.G=p,fe}function uu(p){if(!p.g&&!p.v){p.Y=1;var T=p.Da;ue||N(),ce||(ue(),ce=!0),D.add(T,p),p.A=0}}function Cs(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=_i(m(p.Da,p),du(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,cu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=_i(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),wo(this),cu(this))};function Da(p){p.B!=null&&(c.clearTimeout(p.B),p.B=null)}function cu(p){p.g=new jn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var T=bt(p.na);je(T,"RID","rpc"),je(T,"SID",p.M),je(T,"AID",p.K),je(T,"CI",p.F?"0":"1"),!p.F&&p.ia&&je(T,"TO",p.ia),je(T,"TYPE","xmlhttp"),As(p,T),p.u&&p.o&&Es(T,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=ys(bt(T)),C.u=null,C.R=!0,js(C,p)}n.Va=function(){this.C!=null&&(this.C=null,wo(this),Cs(this),It(19))};function lr(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function fu(p,T){var C=null;if(p.g==T){lr(p),Da(p),p.g=null;var x=2}else if(Ii(p.h,T))C=T.G,Ta(p.h,T),x=1;else return;if(p.I!=0){if(T.o)if(x==1){C=T.u?T.u.length:0,T=Date.now()-T.F;var H=p.D;x=Zs(),Lt(x,new vi(x,C)),Mi(p)}else uu(p);else if(H=T.m,H==3||H==0&&T.X>0||!(x==1&&ar(p,T)||x==2&&Cs(p)))switch(C&&C.length>0&&(T=p.h,T.i=T.i.concat(C)),H){case 1:Di(p,5);break;case 4:Di(p,10);break;case 3:Di(p,6);break;default:Di(p,2)}}}function du(p,T){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*T}function Di(p,T){if(p.j.info("Error code "+T),T==2){var C=m(p.bb,p),x=p.Ua;const H=!x;x=new An(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qt(x,"https"),ys(x),H?ti(x.toString(),C):wa(x.toString(),C)}else It(2);p.I=0,p.l&&p.l.pa(T),hu(p),rr(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function hu(p){if(p.I=0,p.ja=[],p.l){const T=Sa(p.h);(T.length!=0||p.i.length!=0)&&(L(p.ja,T),L(p.ja,p.i),p.h.i.length=0,I(p.i),p.i.length=0),p.l.oa()}}function pu(p,T,C){var x=C instanceof An?bt(C):new An(C);if(x.g!="")T&&(x.g=T+"."+x.g),Eo(x,x.u);else{var H=c.location;x=H.protocol,T=T?T+"."+H.hostname:H.hostname,H=+H.port;const Q=new An(null);x&&qt(Q,x),T&&(Q.g=T),H&&Eo(Q,H),C&&(Q.h=C),x=Q}return C=p.G,T=p.wa,C&&T&&je(x,C,T),je(x,"VER",p.ka),As(p,x),x}function mu(p,T,C){if(T&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Aa&&!p.ma?new nt(new xi({ab:C})):new nt(p.ma),T.Fa(p.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gu(){}n=gu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function xo(){}xo.prototype.g=function(p,T){return new ln(p,T)};function ln(p,T){Rt.call(this),this.g=new Io(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(p?p["X-WebChannel-Client-Profile"]=T.sa:p={"X-WebChannel-Client-Profile":T.sa}),this.g.U=p,(p=T&&T.Qb)&&!M(p)&&(this.g.u=p),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!M(T)&&(this.g.G=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new Ki(this)}E(ln,Rt),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Na(this.g)},ln.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=_o(p),p=C);T.i.push(new xt(T.Ya++,p)),T.I==3&&Mi(T)},ln.prototype.N=function(){this.g.l=null,delete this.j,Na(this.g),delete this.g,ln.Z.N.call(this)};function yu(p){Jt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const C in T){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}E(yu,Jt);function vu(){Vn.call(this),this.status=1}E(vu,Vn);function Ki(p){this.g=p}E(Ki,gu),Ki.prototype.ra=function(){Lt(this.g,"a")},Ki.prototype.qa=function(p){Lt(this.g,new yu(p))},Ki.prototype.pa=function(p){Lt(this.g,new vu)},Ki.prototype.oa=function(){Lt(this.g,"b")},xo.prototype.createWebChannel=xo.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,uT=function(){return new xo},lT=function(){return Zs()},aT=_t,ep={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ms.NO_ERROR=0,ms.TIMEOUT=8,ms.HTTP_ERROR=6,Vc=ms,ga.COMPLETE="complete",rT=ga,Xl.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,Tl=Xl,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,sT=nt}).apply(typeof Sc<"u"?Sc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="12.9.0";function iw(n){sa=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new ZE("@firebase/firestore");function Br(){return Ys.logLevel}function me(n,...e){if(Ys.logLevel<=ze.DEBUG){const t=e.map(kp);Ys.debug(`Firestore (${sa}): ${n}`,...t)}}function fo(n,...e){if(Ys.logLevel<=ze.ERROR){const t=e.map(kp);Ys.error(`Firestore (${sa}): ${n}`,...t)}}function Js(n,...e){if(Ys.logLevel<=ze.WARN){const t=e.map(kp);Ys.warn(`Firestore (${sa}): ${n}`,...t)}}function kp(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,cT(n,o,t)}function cT(n,e,t){let o=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw fo(o),new Error(o)}function Ze(n,e,t,o){let r="Unexpected state";typeof t=="string"?r=t:o=t,n||cT(e,r,o)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends oa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ow{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class sw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rw{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let o=this.i;const r=y=>this.i!==o?(o=this.i,t(y)):Promise.resolve();let l=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ts,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await r(this.currentUser)}))},d=y=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>d(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?d(y):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ts)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ze(typeof o.accessToken=="string",31837,{l:o}),new fT(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class aw{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=on.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class lw{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new aw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class d0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uw{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,FI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const o=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const r=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new d0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new d0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<n;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const r=cw(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<t&&(o+=e.charAt(r[l]%62))}return o}}function Fe(n,e){return n<e?-1:n>e?1:0}function tp(n,e){const t=Math.min(n.length,e.length);for(let o=0;o<t;o++){const r=n.charAt(o),l=e.charAt(o);if(r!==l)return Gh(r)===Gh(l)?Fe(r,l):Gh(r)?1:-1}return Fe(n.length,e.length)}const fw=55296,dw=57343;function Gh(n){const e=n.charCodeAt(0);return e>=fw&&e<=dw}function Zr(n,e,t){return n.length===e.length&&n.every(((o,r)=>t(o,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__name__";class Oi{constructor(e,t,o){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&Re(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let r=0;r<o;r++){const l=Oi.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Fe(e.length,t.length)}static compareSegments(e,t){const o=Oi.isNumericId(e),r=Oi.isNumericId(t);return o&&!r?-1:!o&&r?1:o&&r?Oi.extractNumericId(e).compare(Oi.extractNumericId(t)):tp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return es.fromString(e.substring(4,e.length-2))}}class ft extends Oi{construct(e,t,o){return new ft(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new _e(le.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((r=>r.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const hw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends Oi{construct(e,t,o){return new jt(e,t,o)}static isValidIdentifier(e){return hw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h0}static keyField(){return new jt([h0])}static fromServerFormat(e){const t=[];let o="",r=0;const l=()=>{if(o.length===0)throw new _e(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let c=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new _e(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[r+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new _e(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=y,r+=2}else d==="`"?(c=!c,r++):d!=="."||c?(o+=d,r++):(l(),r++)}if(l(),c)throw new _e(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(t)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(ft.fromString(e))}static fromName(e){return new Ae(ft.fromString(e).popFirst(5))}static empty(){return new Ae(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(n,e,t){if(!t)throw new _e(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pw(n,e,t,o){if(e===!0&&o===!0)throw new _e(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function p0(n){if(!Ae.isDocumentKey(n))throw new _e(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function m0(n){if(Ae.isDocumentKey(n))throw new _e(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Bp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function ci(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bp(n);throw new _e(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n,e){const t={typeString:n};return e&&(t.value=e),t}function Gl(n,e){if(!hT(n))throw new _e(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const r=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in n)){t=`JSON missing required field: '${o}'`;break}const c=n[o];if(r&&typeof c!==r){t=`JSON field '${o}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${o}' field to equal '${l.value}'`;break}}if(t)throw new _e(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=-62135596800,y0=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*y0);return new dt(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<g0)throw new _e(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/y0}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gl(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-g0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Ut("string",dt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new dt(0,0))}static max(){return new we(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=-1;function mw(n,e){const t=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,r=we.fromTimestamp(o===1e9?new dt(t+1,0):new dt(t,o));return new is(r,Ae.empty(),e)}function gw(n){return new is(n.readTime,n.key,Pl)}class is{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new is(we.min(),Ae.empty(),Pl)}static max(){return new is(we.max(),Ae.empty(),Pl)}}function yw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _w{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==vw)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(o,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,o)=>{t(e)}))}static reject(e){return new se(((t,o)=>{o(e)}))}static waitFor(e){return new se(((t,o)=>{let r=0,l=0,c=!1;e.forEach((d=>{++r,d.next((()=>{++l,c&&l===r&&t()}),(y=>o(y)))})),c=!0,l===r&&t()}))}static or(e){let t=se.resolve(!1);for(const o of e)t=t.next((r=>r?se.resolve(r):o()));return t}static forEach(e,t){const o=[];return e.forEach(((r,l)=>{o.push(t.call(this,r,l))})),this.waitFor(o)}static mapArray(e,t){return new se(((o,r)=>{const l=e.length,c=new Array(l);let d=0;for(let y=0;y<l;y++){const m=y;t(e[m]).next((_=>{c[m]=_,++d,d===l&&o(c)}),(_=>r(_)))}}))}static doWhile(e,t){return new se(((o,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):o()};l()}))}}function Ew(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function aa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}uf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=-1;function cf(n){return n==null}function zc(n){return n===0&&1/n==-1/0}function Tw(n){return typeof n=="number"&&Number.isInteger(n)&&!zc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="";function Sw(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=v0(e)),e=Aw(n.get(t),e);return v0(e)}function Aw(n,e){let t=e;const o=n.length;for(let r=0;r<o;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case pT:t+="";break;default:t+=l}}return t}function v0(n){return n+pT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function us(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(e,o.key);if(r===0)return t+o.left.size;r<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ac(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ac(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ac(this.root,e,this.comparator,!0)}}class Ac{constructor(e,t,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?o(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,o,r,l){this.key=e,this.value=t,this.color=o??Zt.RED,this.left=r??Zt.EMPTY,this.right=l??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,r,l){return new Zt(e??this.key,t??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let r=this;const l=o(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,o),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Zt.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,o,r,l){return this}insert(e,t,o){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new E0(this.data.getIterator())}getIteratorFrom(e){return new E0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class E0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Bt(jt.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zr(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new gT("Invalid base64 string: "+l):l}})(e);return new en(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const Cw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(n){if(Ze(!!n,39018),typeof n=="string"){let e=0;const t=Cw.exec(n);if(Ze(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ss(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="server_timestamp",vT="__type__",_T="__previous_value__",ET="__local_write_time__";function Gp(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[vT])==null?void 0:o.stringValue)===yT}function ff(n){const e=n.mapValue.fields[_T];return Gp(e)?ff(e):e}function Ul(n){const e=os(n.mapValue.fields[ET].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t,o,r,l,c,d,y,m,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=y,this.useFetchStreams=m,this.isUsingEmulator=_,this.apiKey=E}}const Yc="(default)";class Ll{constructor(e,t){this.projectId=e,this.database=t||Yc}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===Yc}isEqual(e){return e instanceof Ll&&e.projectId===this.projectId&&e.database===this.database}}function Iw(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new _e(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="__type__",ww="__max__",Cc={mapValue:{}},ST="__vector__",Jc="value";function rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gp(n)?4:bw(n)?9007199254740991:xw(n)?10:11:Re(28295,{value:n})}function qi(n,e){if(n===e)return!0;const t=rs(n);if(t!==rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ul(n).isEqual(Ul(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=os(r.timestampValue),d=os(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return ss(r.bytesValue).isEqual(ss(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return At(r.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(r.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return At(r.integerValue)===At(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=At(r.doubleValue),d=At(l.doubleValue);return c===d?zc(c)===zc(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Zr(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},d=l.mapValue.fields||{};if(_0(c)!==_0(d))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(d[y]===void 0||!qi(c[y],d[y])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function kl(n,e){return(n.values||[]).find((t=>qi(t,e)))!==void 0}function jr(n,e){if(n===e)return 0;const t=rs(n),o=rs(e);if(t!==o)return Fe(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=At(l.integerValue||l.doubleValue),y=At(c.integerValue||c.doubleValue);return d<y?-1:d>y?1:d===y?0:isNaN(d)?isNaN(y)?0:-1:1})(n,e);case 3:return T0(n.timestampValue,e.timestampValue);case 4:return T0(Ul(n),Ul(e));case 5:return tp(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=ss(l),y=ss(c);return d.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),y=c.split("/");for(let m=0;m<d.length&&m<y.length;m++){const _=Fe(d[m],y[m]);if(_!==0)return _}return Fe(d.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Fe(At(l.latitude),At(c.latitude));return d!==0?d:Fe(At(l.longitude),At(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return S0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,I,L,G;const d=l.fields||{},y=c.fields||{},m=(S=d[Jc])==null?void 0:S.arrayValue,_=(I=y[Jc])==null?void 0:I.arrayValue,E=Fe(((L=m==null?void 0:m.values)==null?void 0:L.length)||0,((G=_==null?void 0:_.values)==null?void 0:G.length)||0);return E!==0?E:S0(m,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Cc.mapValue&&c===Cc.mapValue)return 0;if(l===Cc.mapValue)return 1;if(c===Cc.mapValue)return-1;const d=l.fields||{},y=Object.keys(d),m=c.fields||{},_=Object.keys(m);y.sort(),_.sort();for(let E=0;E<y.length&&E<_.length;++E){const S=tp(y[E],_[E]);if(S!==0)return S;const I=jr(d[y[E]],m[_[E]]);if(I!==0)return I}return Fe(y.length,_.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{he:t})}}function T0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=os(n),o=os(e),r=Fe(t.seconds,o.seconds);return r!==0?r:Fe(t.nanos,o.nanos)}function S0(n,e){const t=n.values||[],o=e.values||[];for(let r=0;r<t.length&&r<o.length;++r){const l=jr(t[r],o[r]);if(l)return l}return Fe(t.length,o.length)}function ea(n){return np(n)}function np(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const o=os(t);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ss(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let o="[",r=!0;for(const l of t.values||[])r?r=!1:o+=",",o+=np(l);return o+"]"})(n.arrayValue):"mapValue"in n?(function(t){const o=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const c of o)l?l=!1:r+=",",r+=`${c}:${np(t.fields[c])}`;return r+"}"})(n.mapValue):Re(61005,{value:n})}function Pc(n){switch(rs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ff(n);return e?16+Pc(e):16;case 5:return 2*n.stringValue.length;case 6:return ss(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((r,l)=>r+Pc(l)),0)})(n.arrayValue);case 10:case 11:return(function(o){let r=0;return us(o.fields,((l,c)=>{r+=l.length+Pc(c)})),r})(n.mapValue);default:throw Re(13486,{value:n})}}function ip(n){return!!n&&"integerValue"in n}function qp(n){return!!n&&"arrayValue"in n}function A0(n){return!!n&&"nullValue"in n}function C0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uc(n){return!!n&&"mapValue"in n}function xw(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[TT])==null?void 0:o.stringValue)===ST}function wl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return us(n.mapValue.fields,((t,o)=>e.mapValue.fields[t]=wl(o))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wl(n.arrayValue.values[t]);return e}return{...n}}function bw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ww}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Uc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(t)}setAll(e){let t=jt.emptyPath(),o={},r=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const y=this.getFieldsMap(t);this.applyChanges(y,o,r),o={},r=[],t=d.popLast()}c?o[d.lastSegment()]=wl(c):r.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,o,r)}delete(e){const t=this.field(e.popLast());Uc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let r=t.mapValue.fields[e.get(o)];Uc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,o){us(t,((r,l)=>e[r]=l));for(const r of o)delete e[r]}clone(){return new En(wl(this.value))}}function AT(n){const e=[];return us(n.fields,((t,o)=>{const r=new jt([t]);if(Uc(o)){const l=AT(o.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,o,r,l,c,d){this.key=e,this.documentType=t,this.version=o,this.readTime=r,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new sn(e,0,we.min(),we.min(),we.min(),En.empty(),0)}static newFoundDocument(e,t,o,r){return new sn(e,1,t,we.min(),o,r,0)}static newNoDocument(e,t){return new sn(e,2,t,we.min(),we.min(),En.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,we.min(),we.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t){this.position=e,this.inclusive=t}}function R0(n,e,t){let o=0;for(let r=0;r<n.position.length;r++){const l=e[r],c=n.position[r];if(l.field.isKeyField()?o=Ae.comparator(Ae.fromName(c.referenceValue),t.key):o=jr(c,t.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function I0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t="asc"){this.field=e,this.dir=t}}function Nw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{}class Ot extends CT{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new Dw(e,t,o):t==="array-contains"?new Uw(e,o):t==="in"?new Lw(e,o):t==="not-in"?new kw(e,o):t==="array-contains-any"?new Ow(e,o):new Ot(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new Vw(e,o):new Pw(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(jr(t,this.value)):t!==null&&rs(this.value)===rs(t)&&this.matchesComparison(jr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hi extends CT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Hi(e,t)}matches(e){return RT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function RT(n){return n.op==="and"}function IT(n){return Mw(n)&&RT(n)}function Mw(n){for(const e of n.filters)if(e instanceof Hi)return!1;return!0}function op(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+ea(n.value);if(IT(n))return n.filters.map((e=>op(e))).join(",");{const e=n.filters.map((t=>op(t))).join(",");return`${n.op}(${e})`}}function wT(n,e){return n instanceof Ot?(function(o,r){return r instanceof Ot&&o.op===r.op&&o.field.isEqual(r.field)&&qi(o.value,r.value)})(n,e):n instanceof Hi?(function(o,r){return r instanceof Hi&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,c,d)=>l&&wT(c,r.filters[d])),!0):!1})(n,e):void Re(19439)}function xT(n){return n instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${ea(t.value)}`})(n):n instanceof Hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(xT).join(" ,")+"}"})(n):"Filter"}class Dw extends Ot{constructor(e,t,o){super(e,t,o),this.key=Ae.fromName(o.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vw extends Ot{constructor(e,t){super(e,"in",t),this.keys=bT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Pw extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=bT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bT(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((o=>Ae.fromName(o.referenceValue)))}class Uw extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qp(t)&&kl(t.arrayValue,this.value)}}class Lw extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kl(this.value.arrayValue,t)}}class kw extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kl(this.value.arrayValue,t)}}class Ow extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>kl(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,t=null,o=[],r=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function w0(n,e=null,t=[],o=[],r=null,l=null,c=null){return new Bw(n,e,t,o,r,l,c)}function Hp(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>op(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>ea(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>ea(o))).join(",")),e.Te=t}return e.Te}function zp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Nw(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!I0(n.startAt,e.startAt)&&I0(n.endAt,e.endAt)}function sp(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t=null,o=[],r=[],l=null,c="F",d=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=y,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Fw(n,e,t,o,r,l,c,d){return new df(n,e,t,o,r,l,c,d)}function hf(n){return new df(n)}function x0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Gw(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function qw(n){return n.collectionGroup!==null}function xl(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Bt(jt.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new $c(l,o))})),t.has(jt.keyField().canonicalString())||e.Ie.push(new $c(jt.keyField(),o))}return e.Ie}function Bi(n){const e=Ne(n);return e.Ee||(e.Ee=Hw(e,xl(n))),e.Ee}function Hw(n,e){if(n.limitType==="F")return w0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new $c(r.field,l)}));const t=n.endAt?new Kc(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Kc(n.startAt.position,n.startAt.inclusive):null;return w0(n.path,n.collectionGroup,e,n.filters,n.limit,t,o)}}function rp(n,e,t){return new df(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pf(n,e){return zp(Bi(n),Bi(e))&&n.limitType===e.limitType}function NT(n){return`${Hp(Bi(n))}|lt:${n.limitType}`}function Fr(n){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((r=>xT(r))).join(", ")}]`),cf(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((r=>ea(r))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((r=>ea(r))).join(",")),`Target(${o})`})(Bi(n))}; limitType=${n.limitType})`}function mf(n,e){return e.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):Ae.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(n,e)&&(function(o,r){for(const l of xl(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(o,r){return!(o.startAt&&!(function(c,d,y){const m=R0(c,d,y);return c.inclusive?m<=0:m<0})(o.startAt,xl(o),r)||o.endAt&&!(function(c,d,y){const m=R0(c,d,y);return c.inclusive?m>=0:m>0})(o.endAt,xl(o),r))})(n,e)}function zw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MT(n){return(e,t)=>{let o=!1;for(const r of xl(n)){const l=Yw(r,e,t);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function Yw(n,e,t){const o=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(l,c,d){const y=c.data.field(l),m=d.data.field(l);return y!==null&&m!==null?jr(y,m):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),r=this.inner[o];if(r===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],e))return o.length===1?delete this.inner[t]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,((t,o)=>{for(const[r,l]of o)e(r,l)}))}isEmpty(){return mT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=new gt(Ae.comparator);function ho(){return Jw}const DT=new gt(Ae.comparator);function Sl(...n){let e=DT;for(const t of n)e=e.insert(t.key,t);return e}function VT(n){let e=DT;return n.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function Hs(){return bl()}function PT(){return bl()}function bl(){return new Qs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Kw=new gt(Ae.comparator),$w=new Bt(Ae.comparator);function Ge(...n){let e=$w;for(const t of n)e=e.add(t);return e}const Qw=new Bt(Fe);function Xw(){return Qw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function UT(n){return{integerValue:""+n}}function Ww(n,e){return Tw(e)?UT(e):Yp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this._=void 0}}function Zw(n,e,t){return n instanceof Qc?(function(r,l){const c={fields:{[vT]:{stringValue:yT},[ET]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Gp(l)&&(l=ff(l)),l&&(c.fields[_T]=l),{mapValue:c}})(t,e):n instanceof ta?kT(n,e):n instanceof Ol?OT(n,e):(function(r,l){const c=LT(r,l),d=b0(c)+b0(r.Ae);return ip(c)&&ip(r.Ae)?UT(d):Yp(r.serializer,d)})(n,e)}function jw(n,e,t){return n instanceof ta?kT(n,e):n instanceof Ol?OT(n,e):t}function LT(n,e){return n instanceof Xc?(function(o){return ip(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class Qc extends gf{}class ta extends gf{constructor(e){super(),this.elements=e}}function kT(n,e){const t=BT(e);for(const o of n.elements)t.some((r=>qi(r,o)))||t.push(o);return{arrayValue:{values:t}}}class Ol extends gf{constructor(e){super(),this.elements=e}}function OT(n,e){let t=BT(e);for(const o of n.elements)t=t.filter((r=>!qi(r,o)));return{arrayValue:{values:t}}}class Xc extends gf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function b0(n){return At(n.integerValue||n.doubleValue)}function BT(n){return qp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t){this.field=e,this.transform=t}}function tx(n,e){return n.field.isEqual(e.field)&&(function(o,r){return o instanceof ta&&r instanceof ta||o instanceof Ol&&r instanceof Ol?Zr(o.elements,r.elements,qi):o instanceof Xc&&r instanceof Xc?qi(o.Ae,r.Ae):o instanceof Qc&&r instanceof Qc})(n.transform,e.transform)}class nx{constructor(e,t){this.version=e,this.transformResults=t}}class fi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fi}static exists(e){return new fi(void 0,e)}static updateTime(e){return new fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yf{}function FT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Jp(n.key,fi.none()):new ql(n.key,n.data,fi.none());{const t=n.data,o=En.empty();let r=new Bt(jt.comparator);for(let l of e.fields)if(!r.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?o.delete(l):o.set(l,c),r=r.add(l)}return new cs(n.key,o,new Dn(r.toArray()),fi.none())}}function ix(n,e,t){n instanceof ql?(function(r,l,c){const d=r.value.clone(),y=M0(r.fieldTransforms,l,c.transformResults);d.setAll(y),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof cs?(function(r,l,c){if(!Lc(r.precondition,l))return void l.convertToUnknownDocument(c.version);const d=M0(r.fieldTransforms,l,c.transformResults),y=l.data;y.setAll(GT(r)),y.setAll(d),l.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(n,e,t):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Nl(n,e,t,o){return n instanceof ql?(function(l,c,d,y){if(!Lc(l.precondition,c))return d;const m=l.value.clone(),_=D0(l.fieldTransforms,y,c);return m.setAll(_),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,o):n instanceof cs?(function(l,c,d,y){if(!Lc(l.precondition,c))return d;const m=D0(l.fieldTransforms,y,c),_=c.data;return _.setAll(GT(l)),_.setAll(m),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,o):(function(l,c,d){return Lc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function ox(n,e){let t=null;for(const o of n.fieldTransforms){const r=e.data.field(o.field),l=LT(o.transform,r||null);l!=null&&(t===null&&(t=En.empty()),t.set(o.field,l))}return t||null}function N0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&Zr(o,r,((l,c)=>tx(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ql extends yf{constructor(e,t,o,r=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class cs extends yf{constructor(e,t,o,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function GT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=n.data.field(t);e.set(t,o)}})),e}function M0(n,e,t){const o=new Map;Ze(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const l=n[r],c=l.transform,d=e.data.field(l.field);o.set(l.field,jw(c,d,t[r]))}return o}function D0(n,e,t){const o=new Map;for(const r of n){const l=r.transform,c=t.data.field(r.field);o.set(r.field,Zw(l,c,e))}return o}class Jp extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sx extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t,o,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&ix(l,e,o[r])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Nl(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Nl(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=PT();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(r.key)?null:d;const y=FT(c,d);y!==null&&o.set(r.key,y),c.isValidDocument()||c.convertToNoDocument(we.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Zr(this.mutations,e.mutations,((t,o)=>N0(t,o)))&&Zr(this.baseMutations,e.baseMutations,((t,o)=>N0(t,o)))}}class Kp{constructor(e,t,o,r){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=r}static from(e,t,o){Ze(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let r=(function(){return Kw})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,o[c].version);return new Kp(e,t,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,He;function ux(n){switch(n){case le.OK:return Re(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function qT(n){if(n===void 0)return fo("GRPC error has no .code"),le.UNKNOWN;switch(n){case Pt.OK:return le.OK;case Pt.CANCELLED:return le.CANCELLED;case Pt.UNKNOWN:return le.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return le.INTERNAL;case Pt.UNAVAILABLE:return le.UNAVAILABLE;case Pt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Pt.NOT_FOUND:return le.NOT_FOUND;case Pt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Pt.ABORTED:return le.ABORTED;case Pt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Pt.DATA_LOSS:return le.DATA_LOSS;default:return Re(39323,{code:n})}}(He=Pt||(Pt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=new es([4294967295,4294967295],0);function V0(n){const e=cx().encode(n),t=new oT;return t.update(e),new Uint8Array(t.digest())}function P0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new es([t,o],0),new es([r,l],0)]}class $p{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new Al(`Invalid padding: ${t}`);if(o<0)throw new Al(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Al(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new Al(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=es.fromNumber(this.ge)}ye(e,t,o){let r=e.add(t.multiply(es.fromNumber(o)));return r.compare(fx)===1&&(r=new es([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=V0(e),[o,r]=P0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(o,r,l);if(!this.we(c))return!1}return!0}static create(e,t,o){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new $p(l,r,t);return o.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=V0(e),[o,r]=P0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(o,r,l);this.be(c)}}be(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class Al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,o,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const r=new Map;return r.set(e,Hl.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new vf(we.min(),r,new gt(Fe),ho(),Ge())}}class Hl{constructor(e,t,o,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Hl(o,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,o,r){this.Se=e,this.removedTargetIds=t,this.key=o,this.De=r}}class HT{constructor(e,t){this.targetId=e,this.Ce=t}}class zT{constructor(e,t,o=en.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=r}}class U0{constructor(){this.ve=0,this.Fe=L0(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),o=Ge();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:o=o.add(r);break;default:Re(38017,{changeType:l})}})),new Hl(this.Me,this.xe,e,t,o)}Ke(){this.Oe=!1,this.Fe=L0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class dx{constructor(e){this.Ge=e,this.ze=new Map,this.je=ho(),this.He=Rc(),this.Je=Rc(),this.Ze=new gt(Fe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,o=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(sp(l))if(o===0){const c=new Ae(l.path);this.et(t,c,sn.newNoDocument(c,we.min()))}else Ze(o===1,20013,{expectedCount:o});else{const c=this._t(t);if(c!==o){const d=this.ut(e),y=d?this.ct(d,e,c):1;if(y!==0){this.it(t);const m=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=t;let c,d;try{c=ss(o).toUint8Array()}catch(y){if(y instanceof gT)return Js("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{d=new $p(c,r,l)}catch(y){return Js(y instanceof Al?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return d.ge===0?null:d}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let r=0;return o.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&sp(d.target)){const y=new Ae(d.target.path);this.It(y).has(c)||this.Et(c,y)||this.et(c,y,sn.newNoDocument(y,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let o=Ge();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((y=>{const m=this.ot(y);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new vf(e,t,this.Ze,this.je,o);return this.je=ho(),this.He=Rc(),this.Je=Rc(),this.Ze=new gt(Fe),r}Ye(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,o),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new U0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Bt(Fe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Bt(Fe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new U0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Rc(){return new gt(Ae.comparator)}function L0(){return new gt(Ae.comparator)}const hx={asc:"ASCENDING",desc:"DESCENDING"},px={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mx={and:"AND",or:"OR"};class gx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ap(n,e){return n.useProto3Json||cf(e)?e:{value:e}}function Wc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yx(n,e){return Wc(n,e.toTimestamp())}function Fi(n){return Ze(!!n,49232),we.fromTimestamp((function(t){const o=os(t);return new dt(o.seconds,o.nanos)})(n))}function Qp(n,e){return lp(n,e).canonicalString()}function lp(n,e){const t=(function(r){return new ft(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function JT(n){const e=ft.fromString(n);return Ze(WT(e),10190,{key:e.toString()}),e}function up(n,e){return Qp(n.databaseId,e.path)}function qh(n,e){const t=JT(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae($T(t))}function KT(n,e){return Qp(n.databaseId,e)}function vx(n){const e=JT(n);return e.length===4?ft.emptyPath():$T(e)}function cp(n){return new ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $T(n){return Ze(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function k0(n,e,t){return{name:up(n,e),fields:t.value.mapValue.fields}}function _x(n,e){let t;if("targetChange"in e){e.targetChange;const o=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Re(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(m,_){return m.useProto3Json?(Ze(_===void 0||typeof _=="string",58123),en.fromBase64String(_||"")):(Ze(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),en.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(m){const _=m.code===void 0?le.UNKNOWN:qT(m.code);return new _e(_,m.message||"")})(c);t=new zT(o,r,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const r=qh(n,o.document.name),l=Fi(o.document.updateTime),c=o.document.createTime?Fi(o.document.createTime):we.min(),d=new En({mapValue:{fields:o.document.fields}}),y=sn.newFoundDocument(r,l,c,d),m=o.targetIds||[],_=o.removedTargetIds||[];t=new kc(m,_,y.key,y)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const r=qh(n,o.document),l=o.readTime?Fi(o.readTime):we.min(),c=sn.newNoDocument(r,l),d=o.removedTargetIds||[];t=new kc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const r=qh(n,o.document),l=o.removedTargetIds||[];t=new kc([],l,r,null)}else{if(!("filter"in e))return Re(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,c=new lx(r,l),d=o.targetId;t=new HT(d,c)}}return t}function Ex(n,e){let t;if(e instanceof ql)t={update:k0(n,e.key,e.value)};else if(e instanceof Jp)t={delete:up(n,e.key)};else if(e instanceof cs)t={update:k0(n,e.key,e.data),updateMask:bx(e.fieldMask)};else{if(!(e instanceof sx))return Re(16599,{dt:e.type});t={verify:up(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(l,c){const d=c.transform;if(d instanceof Qc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ta)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ol)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Xc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Re(20930,{transform:c.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:yx(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re(27497)})(n,e.precondition)),t}function Tx(n,e){return n&&n.length>0?(Ze(e!==void 0,14353),n.map((t=>(function(r,l){let c=r.updateTime?Fi(r.updateTime):Fi(l);return c.isEqual(we.min())&&(c=Fi(l)),new nx(c,r.transformResults||[])})(t,e)))):[]}function Sx(n,e){return{documents:[KT(n,e.path)]}}function Ax(n,e){const t={structuredQuery:{}},o=e.path;let r;e.collectionGroup!==null?(r=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=KT(n,r);const l=(function(m){if(m.length!==0)return XT(Hi.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((_=>(function(S){return{field:Gr(S.field),direction:Ix(S.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=ap(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:r}}function Cx(n){let e=vx(n.parent);const t=n.structuredQuery,o=t.from?t.from.length:0;let r=null;if(o>0){Ze(o===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const S=QT(E);return S instanceof Hi&&IT(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(L){return new $c(qr(L.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,cf(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(E){const S=!!E.before,I=E.values||[];return new Kc(I,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const S=!E.before,I=E.values||[];return new Kc(I,S)})(t.endAt)),Fw(e,r,c,l,d,"F",y,m)}function Rx(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function QT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=qr(t.unaryFilter.field);return Ot.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=qr(t.unaryFilter.field);return Ot.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qr(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qr(t.unaryFilter.field);return Ot.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ot.create(qr(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Hi.create(t.compositeFilter.filters.map((o=>QT(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function Ix(n){return hx[n]}function wx(n){return px[n]}function xx(n){return mx[n]}function Gr(n){return{fieldPath:n.canonicalString()}}function qr(n){return jt.fromServerFormat(n.fieldPath)}function XT(n){return n instanceof Ot?(function(t){if(t.op==="=="){if(C0(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NAN"}};if(A0(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(C0(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NOT_NAN"}};if(A0(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gr(t.field),op:wx(t.op),value:t.value}}})(n):n instanceof Hi?(function(t){const o=t.getFilters().map((r=>XT(r)));return o.length===1?o[0]:{compositeFilter:{op:xx(t.op),filters:o}}})(n):Re(54877,{filter:n})}function bx(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function WT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function ZT(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t,o,r,l=we.min(),c=we.min(),d=en.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=y}withSequenceNumber(e){return new Wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.yt=e}}function Mx(n){const e=Cx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.Sn=new Vx}addToCollectionParentIndex(e,t){return this.Sn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(is.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(is.min())}updateCollectionGroup(e,t,o){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Vx{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t]||new Bt(ft.comparator),l=!r.has(o);return this.index[t]=r.add(o),l}has(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t];return r&&r.has(o)}getEntries(e){return(this.index[e]||new Bt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jT=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(jT,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new na(0)}static ar(){return new na(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="LruGarbageCollector",Px=1048576;function F0([n,e],[t,o]){const r=Fe(n,t);return r===0?Fe(e,o):r}class Ux{constructor(e){this.Pr=e,this.buffer=new Bt(F0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();F0(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Lx{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){me(B0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){aa(t)?me(B0,"Ignoring IndexedDB error during garbage collection: ",t):await ra(t)}await this.Ar(3e5)}))}}class kx{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(uf.ce);const o=new Ux(t);return this.Vr.forEachTarget(e,(r=>o.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>o.Er(r))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(O0)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let o,r,l,c,d,y,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(e,r)))).next((E=>(o=E,d=Date.now(),this.removeTargets(e,o,t)))).next((E=>(l=E,y=Date.now(),this.removeOrphanedDocuments(e,o)))).next((E=>(m=Date.now(),Br()<=ze.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${r} in `+(d-c)+`ms
	Removed ${l} targets in `+(y-d)+`ms
	Removed ${E} documents in `+(m-y)+`ms
Total Duration: ${m-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:E}))))}}function Ox(n,e){return new kx(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.changes=new Qs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?se.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t,o,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=r}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(o=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(o!==null&&Nl(o.mutation,r,Dn.empty(),dt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,Ge()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=Ge()){const r=Hs();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,o).next((l=>{let c=Sl();return l.forEach(((d,y)=>{c=c.insert(d,y.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const o=Hs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,Ge())))}populateOverlays(e,t,o){const r=[];return o.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,o,r){let l=ho();const c=bl(),d=(function(){return bl()})();return t.forEach(((y,m)=>{const _=o.get(m.key);r.has(m.key)&&(_===void 0||_.mutation instanceof cs)?l=l.insert(m.key,m):_!==void 0?(c.set(m.key,_.mutation.getFieldMask()),Nl(_.mutation,m,_.mutation.getFieldMask(),dt.now())):c.set(m.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((m,_)=>c.set(m,_))),t.forEach(((m,_)=>d.set(m,new Fx(_,c.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const o=bl();let r=new gt(((c,d)=>c-d)),l=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((y=>{const m=t.get(y);if(m===null)return;let _=o.get(y)||Dn.empty();_=d.applyToLocalView(m,_),o.set(y,_);const E=(r.get(d.batchId)||Ge()).add(y);r=r.insert(d.batchId,E)}))})).next((()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const y=d.getNext(),m=y.key,_=y.value,E=PT();_.forEach((S=>{if(!l.has(S)){const I=FT(t.get(S),o.get(S));I!==null&&E.set(S,I),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,E))}return se.waitFor(c)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,r){return Gw(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,r):this.getDocumentsMatchingCollectionQuery(e,t,o,r)}getNextDocuments(e,t,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,r-l.size):se.resolve(Hs());let d=Pl,y=l;return c.next((m=>se.forEach(m,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{y=y.insert(_,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,y,m,Ge()))).next((_=>({batchId:d,changes:VT(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((o=>{let r=Sl();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,r){const l=t.collectionGroup;let c=Sl();return this.indexManager.getCollectionParents(e,l).next((d=>se.forEach(d,(y=>{const m=(function(E,S){return new df(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,o,r).next((_=>{_.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l,r)))).next((c=>{l.forEach(((y,m)=>{const _=m.getKey();c.get(_)===null&&(c=c.insert(_,sn.newInvalidDocument(_)))}));let d=Sl();return c.forEach(((y,m)=>{const _=l.get(y);_!==void 0&&Nl(_.mutation,m,Dn.empty(),dt.now()),mf(t,m)&&(d=d.insert(y,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return se.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Fi(r.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:Mx(r.bundledQuery),readTime:Fi(r.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.overlays=new gt(Ae.comparator),this.Lr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Hs();return se.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((r,l)=>{this.bt(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,o){const r=this.Lr.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(o)),se.resolve()}getOverlaysForCollection(e,t,o){const r=Hs(),l=t.length+1,c=new Ae(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const y=d.getNext().value,m=y.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&y.largestBatchId>o&&r.set(y.getKey(),y)}return se.resolve(r)}getOverlaysForCollectionGroup(e,t,o,r){let l=new gt(((m,_)=>m-_));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>o){let _=l.get(m.largestBatchId);_===null&&(_=Hs(),l=l.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=Hs(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=r)););return se.resolve(d)}bt(e,t,o){const r=this.overlays.get(o.key);if(r!==null){const c=this.Lr.get(r.largestBatchId).delete(o.key);this.Lr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(o.key,new ax(t,o));let l=this.Lr.get(t);l===void 0&&(l=Ge(),this.Lr.set(t,l)),this.Lr.set(t,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.kr=new Bt(zt.Kr),this.qr=new Bt(zt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const o=new zt(e,t);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new zt(e,t))}Qr(e,t){e.forEach((o=>this.removeReference(o,t)))}Gr(e){const t=new Ae(new ft([])),o=new zt(t,e),r=new zt(t,e+1),l=[];return this.qr.forEachInRange([o,r],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ae(new ft([])),o=new zt(t,e),r=new zt(t,e+1);let l=Ge();return this.qr.forEachInRange([o,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new zt(e,0),o=this.kr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class zt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ae.comparator(e.key,t.key)||Fe(e.Hr,t.Hr)}static Ur(e,t){return Fe(e.Hr,t.Hr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Bt(zt.Kr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,r){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new rx(l,t,o,r);this.mutationQueue.push(c);for(const d of r)this.Jr=this.Jr.add(new zt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,r=this.Xr(o),l=r<0?0:r;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Fp:this.Yn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new zt(t,0),r=new zt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([o,r],(c=>{const d=this.Zr(c.Hr);l.push(d)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Bt(Fe);return t.forEach((r=>{const l=new zt(r,0),c=new zt(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{o=o.add(d.Hr)}))})),se.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,r=o.length+1;let l=o;Ae.isDocumentKey(l)||(l=l.child(""));const c=new zt(new Ae(l),0);let d=new Bt(Fe);return this.Jr.forEachWhile((y=>{const m=y.key.path;return!!o.isPrefixOf(m)&&(m.length===r&&(d=d.add(y.Hr)),!0)}),c),se.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((o=>{const r=this.Zr(o);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Ze(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return se.forEach(t.mutations,(r=>{const l=new zt(r.key,t.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,t){const o=new zt(t,0),r=this.Jr.firstAfterOrEqual(o);return se.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.ti=e,this.docs=(function(){return new gt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,r=this.docs.get(o),l=r?r.size:0,c=this.ti(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return se.resolve(o?o.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let o=ho();return t.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():sn.newInvalidDocument(r))})),se.resolve(o)}getDocumentsMatchingQuery(e,t,o,r){let l=ho();const c=t.path,d=new Ae(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(d);for(;y.hasNext();){const{key:m,value:{document:_}}=y.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||yw(gw(_),o)<=0||(r.has(_.key)||mf(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,o,r){Re(9500)}ni(e,t){return se.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new Kx(this)}getSize(e){return se.resolve(this.size)}}class Kx extends Bx{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(o)})),se.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.persistence=e,this.ri=new Qs((t=>Hp(t)),zp),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.ii=0,this.si=new Xp,this.targetCount=0,this.oi=na._r()}forEachTarget(e,t){return this.ri.forEach(((o,r)=>t(r))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ii&&(this.ii=t),se.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new na(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.lr(t),se.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,o){let r=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&o.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),se.waitFor(l).next((()=>r))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const o=this.ri.get(t)||null;return se.resolve(o)}addMatchingKeys(e,t,o){return this.si.$r(t,o),se.resolve()}removeMatchingKeys(e,t,o){this.si.Qr(t,o);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const o=this.si.jr(t);return se.resolve(o)}containsKey(e,t){return se.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t){this._i={},this.overlays={},this.ai=new uf(0),this.ui=!1,this.ui=!0,this.ci=new zx,this.referenceDelegate=e(this),this.li=new $x(this),this.indexManager=new Dx,this.remoteDocumentCache=(function(r){return new Jx(r)})((o=>this.referenceDelegate.hi(o))),this.serializer=new Nx(t),this.Pi=new qx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Hx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this._i[e.toKey()];return o||(o=new Yx(t,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,o){me("MemoryPersistence","Starting transaction:",e);const r=new Qx(this.ai.next());return this.referenceDelegate.Ti(),o(r).next((l=>this.referenceDelegate.Ii(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ei(e,t){return se.or(Object.values(this._i).map((o=>()=>o.containsKey(e,t))))}}class Qx extends _w{constructor(e){super(),this.currentSequenceNumber=e}}class Wp{constructor(e){this.persistence=e,this.Ri=new Xp,this.Ai=null}static Vi(e){return new Wp(e)}get di(){if(this.Ai)return this.Ai;throw Re(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.di.delete(o.toString()),se.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.di.add(o.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.di.add(l.toString())))})).next((()=>o.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,(o=>{const r=Ae.fromPath(o);return this.mi(e,r).next((l=>{l||t.removeEntry(r,we.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((o=>{o?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Zc{constructor(e,t){this.persistence=e,this.fi=new Qs((o=>Sw(o.path)),((o,r)=>o.isEqual(r))),this.garbageCollector=Ox(this,t)}static Vi(e,t){return new Zc(e,t)}Ti(){}Ii(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((r=>o+r))))}pr(e){let t=0;return this.mr(e,(o=>{t++})).next((()=>t))}mr(e,t){return se.forEach(this.fi,((o,r)=>this.wr(e,o,r).next((l=>l?se.resolve():t(r)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(o++,l.removeEntry(c,we.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),se.resolve()}removeReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pc(e.data.value)),t}wr(e,t,o){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return se.resolve(r!==void 0&&r>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t,o,r){this.targetId=e,this.fromCache=t,this.Ts=o,this.Is=r}static Es(e,t){let o=Ge(),r=Ge();for(const l of t.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Zp(e,t.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return kR()?8:Ew(UR())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,r){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,r,o).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Xx;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,o,r){return o.documentReadCount<this.Vs?(Br()<=ze.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Fr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(Br()<=ze.DEBUG&&me("QueryEngine","Query:",Fr(t),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.ds*r?(Br()<=ze.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Fr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(t))):se.resolve())}gs(e,t){if(x0(t))return se.resolve(null);let o=Bi(t);return this.indexManager.getIndexType(e,o).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=rp(t,null,"F"),o=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const c=Ge(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,o).next((y=>{const m=this.bs(t,d);return this.Ss(t,m,c,y.readTime)?this.gs(e,rp(t,null,"F")):this.Ds(e,m,t,y)}))))})))))}ps(e,t,o,r){return x0(t)||r.isEqual(we.min())?se.resolve(null):this.fs.getDocuments(e,o).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,o,r)?se.resolve(null):(Br()<=ze.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fr(t)),this.Ds(e,c,t,mw(r,Pl)).next((d=>d)))}))}bs(e,t){let o=new Bt(MT(e));return t.forEach(((r,l)=>{mf(e,l)&&(o=o.add(l))})),o}Ss(e,t,o,r){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}ys(e,t,o){return Br()<=ze.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Fr(t)),this.fs.getDocumentsMatchingQuery(e,t,is.min(),o)}Ds(e,t,o,r){return this.fs.getDocumentsMatchingQuery(e,o,r).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="LocalStore",Zx=3e8;class jx{constructor(e,t,o,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new gt(Fe),this.Fs=new Qs((l=>Hp(l)),zp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gx(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function eb(n,e,t,o){return new jx(n,e,t,o)}async function tS(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return t.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,t.Os(e),t.mutationQueue.getAllMutationBatches(o)))).next((l=>{const c=[],d=[];let y=Ge();for(const m of r){c.push(m.batchId);for(const _ of m.mutations)y=y.add(_.key)}for(const m of l){d.push(m.batchId);for(const _ of m.mutations)y=y.add(_.key)}return t.localDocuments.getDocuments(o,y).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function tb(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,y,m,_){const E=m.batch,S=E.keys();let I=se.resolve();return S.forEach((L=>{I=I.next((()=>_.getEntry(y,L))).next((G=>{const O=m.docVersions.get(L);Ze(O!==null,48541),G.version.compareTo(O)<0&&(E.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),_.addEntry(G)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(y,E)))})(t,o,e,l).next((()=>l.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let y=Ge();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(y=y.add(d.batch.mutations[m].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(o,r)))}))}function nS(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function nb(n,e){const t=Ne(n),o=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const d=[];e.targetChanges.forEach(((_,E)=>{const S=r.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,E))));let I=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(en.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,o)),r=r.insert(E,I),(function(G,O,K){return G.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=Zx?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,I,_)&&d.push(t.li.updateTargetData(l,I))}));let y=ho(),m=Ge();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(ib(l,c,e.documentUpdates).next((_=>{y=_.Bs,m=_.Ls}))),!o.isEqual(we.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(_)}return se.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,m))).next((()=>y))})).then((l=>(t.vs=r,l)))}function ib(n,e,t){let o=Ge(),r=Ge();return t.forEach((l=>o=o.add(l))),e.getEntries(n,o).next((l=>{let c=ho();return t.forEach(((d,y)=>{const m=l.get(d);y.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),y.isNoDocument()&&y.version.isEqual(we.min())?(e.removeEntry(d,y.readTime),c=c.insert(d,y)):!m.isValidDocument()||y.version.compareTo(m.version)>0||y.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(y),c=c.insert(d,y)):me(jp,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",y.version)})),{Bs:c,Ls:r}}))}function ob(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=Fp),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function sb(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return t.li.getTargetData(o,e).next((l=>l?(r=l,se.resolve(r)):t.li.allocateTargetId(o).next((c=>(r=new Wo(e,c,"TargetPurposeListen",o.currentSequenceNumber),t.li.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=t.vs.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(o.targetId,o),t.Fs.set(e,o.targetId)),o}))}async function fp(n,e,t){const o=Ne(n),r=o.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",l,(c=>o.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!aa(c))throw c;me(jp,`Failed to update sequence numbers for target ${e}: ${c}`)}o.vs=o.vs.remove(e),o.Fs.delete(r.target)}function G0(n,e,t){const o=Ne(n);let r=we.min(),l=Ge();return o.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,m,_){const E=Ne(y),S=E.Fs.get(_);return S!==void 0?se.resolve(E.vs.get(S)):E.li.getTargetData(m,_)})(o,c,Bi(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(c,d.targetId).next((y=>{l=y}))})).next((()=>o.Cs.getDocumentsMatchingQuery(c,e,t?r:we.min(),t?l:Ge()))).next((d=>(rb(o,zw(e),d),{documents:d,ks:l})))))}function rb(n,e,t){let o=n.Ms.get(e)||we.min();t.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),n.Ms.set(e,o)}class q0{constructor(){this.activeTargetIds=Xw()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ab{constructor(){this.vo=new q0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,o){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new q0,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="ConnectivityMonitor";class z0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){me(H0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){me(H0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic=null;function dp(){return Ic===null?Ic=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ic++,"0x"+Ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="RestConnection",ub={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class cb{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${o}/databases/${r}`,this.$o=this.databaseId.database===Yc?`project_id=${o}`:`project_id=${o}&database_id=${r}`}Wo(e,t,o,r,l){const c=dp(),d=this.Qo(e,t.toUriEncodedString());me(Hh,`Sending RPC '${e}' ${c}:`,d,o);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(y,r,l);const{host:m}=new URL(d),_=Up(m);return this.zo(e,d,y,o,_).then((E=>(me(Hh,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Js(Hh,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",o),E}))}jo(e,t,o,r,l,c){return this.Wo(e,t,o,r,l)}Go(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),o&&o.headers.forEach(((r,l)=>e[l]=r))}Qo(e,t){const o=ub[e];let r=`${this.qo}/v1/${t}:${o}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection",yl=(n,e,t)=>{n.listen(e,(o=>{try{t(o)}catch(r){setTimeout((()=>{throw r}),0)}}))};class Kr extends cb{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Kr.c_){const e=lT();yl(e,aT.STAT_EVENT,(t=>{t.stat===ep.PROXY?me(nn,"STAT_EVENT: detected buffering proxy"):t.stat===ep.NOPROXY&&me(nn,"STAT_EVENT: detected no buffering proxy")})),Kr.c_=!0}}zo(e,t,o,r,l){const c=dp();return new Promise(((d,y)=>{const m=new sT;m.setWithCredentials(!0),m.listenOnce(rT.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Vc.NO_ERROR:const E=m.getResponseJson();me(nn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case Vc.TIMEOUT:me(nn,`RPC '${e}' ${c} timed out`),y(new _e(le.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:const S=m.getStatus();if(me(nn,`RPC '${e}' ${c} failed with status:`,S,"response text:",m.getResponseText()),S>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const L=I==null?void 0:I.error;if(L&&L.status&&L.message){const G=(function(K){const ie=K.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ie)>=0?ie:le.UNKNOWN})(L.status);y(new _e(G,L.message))}else y(new _e(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else y(new _e(le.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{me(nn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(r);me(nn,`RPC '${e}' ${c} sending request:`,r),m.send(t,"POST",_,o,15)}))}T_(e,t,o){const r=dp(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(d.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,o),d.encodeInitMessageHeaders=!0;const m=l.join("");me(nn,`Creating RPC '${e}' stream ${r}: ${m}`,d);const _=c.createWebChannel(m,d);this.I_(_);let E=!1,S=!1;const I=new fb({Ho:L=>{S?me(nn,`Not sending because RPC '${e}' stream ${r} is closed:`,L):(E||(me(nn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),E=!0),me(nn,`RPC '${e}' stream ${r} sending:`,L),_.send(L))},Jo:()=>_.close()});return yl(_,Tl.EventType.OPEN,(()=>{S||(me(nn,`RPC '${e}' stream ${r} transport opened.`),I.i_())})),yl(_,Tl.EventType.CLOSE,(()=>{S||(S=!0,me(nn,`RPC '${e}' stream ${r} transport closed`),I.o_(),this.E_(_))})),yl(_,Tl.EventType.ERROR,(L=>{S||(S=!0,Js(nn,`RPC '${e}' stream ${r} transport errored. Name:`,L.name,"Message:",L.message),I.o_(new _e(le.UNAVAILABLE,"The operation could not be completed")))})),yl(_,Tl.EventType.MESSAGE,(L=>{var G;if(!S){const O=L.data[0];Ze(!!O,16349);const K=O,ie=(K==null?void 0:K.error)||((G=K[0])==null?void 0:G.error);if(ie){me(nn,`RPC '${e}' stream ${r} received error:`,ie);const Z=ie.status;let re=(function(D){const N=Pt[D];if(N!==void 0)return qT(N)})(Z),ue=ie.message;Z==="NOT_FOUND"&&ue.includes("database")&&ue.includes("does not exist")&&ue.includes(this.databaseId.database)&&Js(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),re===void 0&&(re=le.INTERNAL,ue="Unknown error status: "+Z+" with message "+ie.message),S=!0,I.o_(new _e(re,ue)),_.close()}else me(nn,`RPC '${e}' stream ${r} received:`,O),I.__(O)}})),Kr.u_(),setTimeout((()=>{I.s_()}),0),I}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,o){super.Go(e,t,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return uT()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(n){return new Kr(n)}function zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n){return new gx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr.c_=!1;class iS{constructor(e,t,o=1e3,r=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=o,this.A_=r,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-o);r>0&&me("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="PersistentStream";class oS{constructor(e,t,o,r,l,c,d,y){this.Ci=e,this.b_=o,this.S_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(fo(t.toString()),fo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.D_===t&&this.G_(o,r)}),(o=>{e((()=>{const r=new _e(le.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(r)}))}))}G_(e,t){const o=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{o((()=>this.z_(r)))})),this.stream.onMessage((r=>{o((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Y0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(me(Y0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hb extends oS{constructor(e,t,o,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,r,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=_x(this.serializer,e),o=(function(l){if(!("targetChange"in l))return we.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?we.min():c.readTime?Fi(c.readTime):we.min()})(e);return this.listener.J_(t,o)}Z_(e){const t={};t.database=cp(this.serializer),t.addTarget=(function(l,c){let d;const y=c.target;if(d=sp(y)?{documents:Sx(l,y)}:{query:Ax(l,y).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=YT(l,c.resumeToken);const m=ap(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(we.min())>0){d.readTime=Wc(l,c.snapshotVersion.toTimestamp());const m=ap(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const o=Rx(this.serializer,e);o&&(t.labels=o),this.K_(t)}X_(e){const t={};t.database=cp(this.serializer),t.removeTarget=e,this.K_(t)}}class pb extends oS{constructor(e,t,o,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,r,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Tx(e.writeResults,e.commitTime),o=Fi(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=cp(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>Ex(this.serializer,o)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{}class gb extends mb{constructor(e,t,o,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new _e(le.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,lp(t,o),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(le.UNKNOWN,l.toString())}))}jo(e,t,o,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,lp(t,o),r,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(le.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function yb(n,e,t,o){return new gb(n,e,t,o)}class vb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fo(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="RemoteStore";class _b{constructor(e,t,o,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{o.enqueueAndForget((async()=>{Xs(this)&&(me(Ks,"Restarting streams for network reachability change."),await(async function(y){const m=Ne(y);m.Ea.add(4),await zl(m),m.Va.set("Unknown"),m.Ea.delete(4),await Ef(m)})(this))}))})),this.Va=new vb(o,r)}}async function Ef(n){if(Xs(n))for(const e of n.Ra)await e(!0)}async function zl(n){for(const e of n.Ra)await e(!1)}function sS(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),im(t)?nm(t):la(t).O_()&&tm(t,e))}function em(n,e){const t=Ne(n),o=la(t);t.Ia.delete(e),o.O_()&&rS(t,e),t.Ia.size===0&&(o.O_()?o.L_():Xs(t)&&t.Va.set("Unknown"))}function tm(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}la(n).Z_(e)}function rS(n,e){n.da.$e(e),la(n).X_(e)}function nm(n){n.da=new dx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),la(n).start(),n.Va.ua()}function im(n){return Xs(n)&&!la(n).x_()&&n.Ia.size>0}function Xs(n){return Ne(n).Ea.size===0}function aS(n){n.da=void 0}async function Eb(n){n.Va.set("Online")}async function Tb(n){n.Ia.forEach(((e,t)=>{tm(n,e)}))}async function Sb(n,e){aS(n),im(n)?(n.Va.ha(e),nm(n)):n.Va.set("Unknown")}async function Ab(n,e,t){if(n.Va.set("Online"),e instanceof zT&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const d of l.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,c),r.Ia.delete(d),r.da.removeTarget(d))})(n,e)}catch(o){me(Ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await jc(n,o)}else if(e instanceof kc?n.da.Xe(e):e instanceof HT?n.da.st(e):n.da.tt(e),!t.isEqual(we.min()))try{const o=await nS(n.localStore);t.compareTo(o)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((y,m)=>{if(y.resumeToken.approximateByteSize()>0){const _=l.Ia.get(m);_&&l.Ia.set(m,_.withResumeToken(y.resumeToken,c))}})),d.targetMismatches.forEach(((y,m)=>{const _=l.Ia.get(y);if(!_)return;l.Ia.set(y,_.withResumeToken(en.EMPTY_BYTE_STRING,_.snapshotVersion)),rS(l,y);const E=new Wo(_.target,y,m,_.sequenceNumber);tm(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(o){me(Ks,"Failed to raise snapshot:",o),await jc(n,o)}}async function jc(n,e,t){if(!aa(e))throw e;n.Ea.add(1),await zl(n),n.Va.set("Offline"),t||(t=()=>nS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(Ks,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ef(n)}))}function lS(n,e){return e().catch((t=>jc(n,t,e)))}async function Tf(n){const e=Ne(n),t=as(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fp;for(;Cb(e);)try{const r=await ob(e.localStore,o);if(r===null){e.Ta.length===0&&t.L_();break}o=r.batchId,Rb(e,r)}catch(r){await jc(e,r)}uS(e)&&cS(e)}function Cb(n){return Xs(n)&&n.Ta.length<10}function Rb(n,e){n.Ta.push(e);const t=as(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function uS(n){return Xs(n)&&!as(n).x_()&&n.Ta.length>0}function cS(n){as(n).start()}async function Ib(n){as(n).ra()}async function wb(n){const e=as(n);for(const t of n.Ta)e.ea(t.mutations)}async function xb(n,e,t){const o=n.Ta.shift(),r=Kp.from(o,e,t);await lS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Tf(n)}async function bb(n,e){e&&as(n).Y_&&await(async function(o,r){if((function(c){return ux(c)&&c!==le.ABORTED})(r.code)){const l=o.Ta.shift();as(o).B_(),await lS(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Tf(o)}})(n,e),uS(n)&&cS(n)}async function J0(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),me(Ks,"RemoteStore received new credentials");const o=Xs(t);t.Ea.add(3),await zl(t),o&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ef(t)}async function Nb(n,e){const t=Ne(n);e?(t.Ea.delete(2),await Ef(t)):e||(t.Ea.add(2),await zl(t),t.Va.set("Unknown"))}function la(n){return n.ma||(n.ma=(function(t,o,r){const l=Ne(t);return l.sa(),new hb(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Zo:Eb.bind(null,n),Yo:Tb.bind(null,n),t_:Sb.bind(null,n),J_:Ab.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),im(n)?nm(n):n.Va.set("Unknown")):(await n.ma.stop(),aS(n))}))),n.ma}function as(n){return n.fa||(n.fa=(function(t,o,r){const l=Ne(t);return l.sa(),new pb(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Ib.bind(null,n),t_:bb.bind(null,n),ta:wb.bind(null,n),na:xb.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Tf(n)):(await n.fa.stop(),n.Ta.length>0&&(me(Ks,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t,o,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,r,l){const c=Date.now()+o,d=new om(e,t,c,r,l);return d.start(o),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sm(n,e){if(fo("AsyncQueue",`${e}: ${n}`),aa(n))return new _e(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{static emptySet(e){return new $r(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ae.comparator(t.key,o.key):(t,o)=>Ae.comparator(t.key,o.key),this.keyedMap=Sl(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $r)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new $r;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this.ga=new gt(Ae.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Re(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class ia{constructor(e,t,o,r,l,c,d,y,m){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=y,this.hasCachedResults=m}static fromInitialDocuments(e,t,o,r,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new ia(e,t,$r.emptySet(t),c,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==o[r].type||!t[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Db{constructor(){this.queries=$0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const r=Ne(t),l=r.queries;r.queries=$0(),l.forEach(((c,d)=>{for(const y of d.ba)y.onError(o)}))})(this,new _e(le.ABORTED,"Firestore shutting down"))}}function $0(){return new Qs((n=>NT(n)),pf)}async function fS(n,e){const t=Ne(n);let o=3;const r=e.query;let l=t.queries.get(r);l?!l.Sa()&&e.Da()&&(o=2):(l=new Mb,o=e.Da()?0:1);try{switch(o){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const d=sm(c,`Initialization of query '${Fr(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&rm(t)}async function dS(n,e){const t=Ne(n),o=e.query;let r=3;const l=t.queries.get(o);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?r=e.Da()?0:1:!l.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function Vb(n,e){const t=Ne(n);let o=!1;for(const r of e){const l=r.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(r)&&(o=!0);c.wa=r}}o&&rm(t)}function Pb(n,e,t){const o=Ne(n),r=o.queries.get(e);if(r)for(const l of r.ba)l.onError(t);o.queries.delete(e)}function rm(n){n.Ca.forEach((e=>{e.next()}))}var hp,Q0;(Q0=hp||(hp={})).Ma="default",Q0.Cache="cache";class hS{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const r of e.docChanges)r.type!==3&&o.push(r);e=new ia(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.key=e}}class mS{constructor(e){this.key=e}}class Ub{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ge(),this.mutatedKeys=Ge(),this.eu=MT(e),this.tu=new $r(this.eu)}get nu(){return this.Za}ru(e,t){const o=t?t.iu:new K0,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=r,d=!1;const y=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,E)=>{const S=r.get(_),I=mf(this.query,E)?E:null,L=!!S&&this.mutatedKeys.has(S.key),G=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let O=!1;S&&I?S.data.isEqual(I.data)?L!==G&&(o.track({type:3,doc:I}),O=!0):this.su(S,I)||(o.track({type:2,doc:I}),O=!0,(y&&this.eu(I,y)>0||m&&this.eu(I,m)<0)&&(d=!0)):!S&&I?(o.track({type:0,doc:I}),O=!0):S&&!I&&(o.track({type:1,doc:S}),O=!0,(y||m)&&(d=!0)),O&&(I?(c=c.add(I),l=G?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),o.track({type:1,doc:_})}return{tu:c,iu:o,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(I,L){const G=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Vt:O})}};return G(I)-G(L)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(o),r=r??!1;const d=t&&!r?this._u():[],y=this.Ya.size===0&&this.current&&!r?1:0,m=y!==this.Xa;return this.Xa=y,c.length!==0||m?{snapshot:new ia(this.query,e.tu,l,c,e.mutatedKeys,y===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new K0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ge(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const t=[];return e.forEach((o=>{this.Ya.has(o)||t.push(new mS(o))})),this.Ya.forEach((o=>{e.has(o)||t.push(new pS(o))})),t}cu(e){this.Za=e.ks,this.Ya=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ia.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const am="SyncEngine";class Lb{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class kb{constructor(e){this.key=e,this.hu=!1}}class Ob{constructor(e,t,o,r,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Qs((d=>NT(d)),pf),this.Iu=new Map,this.Eu=new Set,this.Ru=new gt(Ae.comparator),this.Au=new Map,this.Vu=new Xp,this.du={},this.mu=new Map,this.fu=na.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Bb(n,e,t=!0){const o=TS(n);let r;const l=o.Tu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await gS(o,e,t,!0),r}async function Fb(n,e){const t=TS(n);await gS(t,e,!0,!1)}async function gS(n,e,t,o){const r=await sb(n.localStore,Bi(e)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return o&&(d=await Gb(n,e,l,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&sS(n.remoteStore,r),d}async function Gb(n,e,t,o,r){n.pu=(E,S,I)=>(async function(G,O,K,ie){let Z=O.view.ru(K);Z.Ss&&(Z=await G0(G.localStore,O.query,!1).then((({documents:D})=>O.view.ru(D,Z))));const re=ie&&ie.targetChanges.get(O.targetId),ue=ie&&ie.targetMismatches.get(O.targetId)!=null,ce=O.view.applyChanges(Z,G.isPrimaryClient,re,ue);return W0(G,O.targetId,ce.au),ce.snapshot})(n,E,S,I);const l=await G0(n.localStore,e,!0),c=new Ub(e,l.ks),d=c.ru(l.documents),y=Hl.createSynthesizedTargetChangeForCurrentChange(t,o&&n.onlineState!=="Offline",r),m=c.applyChanges(d,n.isPrimaryClient,y);W0(n,t,m.au);const _=new Lb(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function qb(n,e,t){const o=Ne(n),r=o.Tu.get(e),l=o.Iu.get(r.targetId);if(l.length>1)return o.Iu.set(r.targetId,l.filter((c=>!pf(c,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await fp(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),t&&em(o.remoteStore,r.targetId),pp(o,r.targetId)})).catch(ra)):(pp(o,r.targetId),await fp(o.localStore,r.targetId,!0))}async function Hb(n,e){const t=Ne(n),o=t.Tu.get(e),r=t.Iu.get(o.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),em(t.remoteStore,o.targetId))}async function zb(n,e,t){const o=Wb(n);try{const r=await(function(c,d){const y=Ne(c),m=dt.now(),_=d.reduce(((I,L)=>I.add(L.key)),Ge());let E,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let L=ho(),G=Ge();return y.xs.getEntries(I,_).next((O=>{L=O,L.forEach(((K,ie)=>{ie.isValidDocument()||(G=G.add(K))}))})).next((()=>y.localDocuments.getOverlayedDocuments(I,L))).next((O=>{E=O;const K=[];for(const ie of d){const Z=ox(ie,E.get(ie.key).overlayedDocument);Z!=null&&K.push(new cs(ie.key,Z,AT(Z.value.mapValue),fi.exists(!0)))}return y.mutationQueue.addMutationBatch(I,m,K,d)})).next((O=>{S=O;const K=O.applyToLocalDocumentSet(E,G);return y.documentOverlayCache.saveOverlays(I,O.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:VT(E)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(r.batchId),(function(c,d,y){let m=c.du[c.currentUser.toKey()];m||(m=new gt(Fe)),m=m.insert(d,y),c.du[c.currentUser.toKey()]=m})(o,r.batchId,t),await Yl(o,r.changes),await Tf(o.remoteStore)}catch(r){const l=sm(r,"Failed to persist write");t.reject(l)}}async function yS(n,e){const t=Ne(n);try{const o=await nb(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=t.Au.get(l);c&&(Ze(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?Ze(c.hu,14607):r.removedDocuments.size>0&&(Ze(c.hu,42227),c.hu=!1))})),await Yl(t,o,e)}catch(o){await ra(o)}}function X0(n,e,t){const o=Ne(n);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const r=[];o.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(c,d){const y=Ne(c);y.onlineState=d;let m=!1;y.queries.forEach(((_,E)=>{for(const S of E.ba)S.va(d)&&(m=!0)})),m&&rm(y)})(o.eventManager,e),r.length&&o.Pu.J_(r),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function Yb(n,e,t){const o=Ne(n);o.sharedClientState.updateQueryState(e,"rejected",t);const r=o.Au.get(e),l=r&&r.key;if(l){let c=new gt(Ae.comparator);c=c.insert(l,sn.newNoDocument(l,we.min()));const d=Ge().add(l),y=new vf(we.min(),new Map,new gt(Fe),c,d);await yS(o,y),o.Ru=o.Ru.remove(l),o.Au.delete(e),lm(o)}else await fp(o.localStore,e,!1).then((()=>pp(o,e,t))).catch(ra)}async function Jb(n,e){const t=Ne(n),o=e.batch.batchId;try{const r=await tb(t.localStore,e);_S(t,o,null),vS(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await Yl(t,r)}catch(r){await ra(r)}}async function Kb(n,e,t){const o=Ne(n);try{const r=await(function(c,d){const y=Ne(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return y.mutationQueue.lookupMutationBatch(m,d).next((E=>(Ze(E!==null,37113),_=E.keys(),y.mutationQueue.removeMutationBatch(m,E)))).next((()=>y.mutationQueue.performConsistencyCheck(m))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>y.localDocuments.getDocuments(m,_)))}))})(o.localStore,e);_S(o,e,t),vS(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await Yl(o,r)}catch(r){await ra(r)}}function vS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function _S(n,e,t){const o=Ne(n);let r=o.du[o.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),o.du[o.currentUser.toKey()]=r}}function pp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const o of n.Iu.get(e))n.Tu.delete(o),t&&n.Pu.yu(o,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((o=>{n.Vu.containsKey(o)||ES(n,o)}))}function ES(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(em(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),lm(n))}function W0(n,e,t){for(const o of t)o instanceof pS?(n.Vu.addReference(o.key,e),$b(n,o)):o instanceof mS?(me(am,"Document no longer in limbo: "+o.key),n.Vu.removeReference(o.key,e),n.Vu.containsKey(o.key)||ES(n,o.key)):Re(19791,{wu:o})}function $b(n,e){const t=e.key,o=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(o)||(me(am,"New document in limbo: "+t),n.Eu.add(o),lm(n))}function lm(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ae(ft.fromString(e)),o=n.fu.next();n.Au.set(o,new kb(t)),n.Ru=n.Ru.insert(t,o),sS(n.remoteStore,new Wo(Bi(hf(t.path)),o,"TargetPurposeLimboResolution",uf.ce))}}async function Yl(n,e,t){const o=Ne(n),r=[],l=[],c=[];o.Tu.isEmpty()||(o.Tu.forEach(((d,y)=>{c.push(o.pu(y,e,t).then((m=>{var _;if((m||t)&&o.isPrimaryClient){const E=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:_.current;o.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(m){r.push(m);const E=Zp.Es(y.targetId,m);l.push(E)}})))})),await Promise.all(c),o.Pu.J_(r),await(async function(y,m){const _=Ne(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(m,(S=>se.forEach(S.Ts,(I=>_.persistence.referenceDelegate.addReference(E,S.targetId,I))).next((()=>se.forEach(S.Is,(I=>_.persistence.referenceDelegate.removeReference(E,S.targetId,I)))))))))}catch(E){if(!aa(E))throw E;me(jp,"Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const I=_.vs.get(S),L=I.snapshotVersion,G=I.withLastLimboFreeSnapshotVersion(L);_.vs=_.vs.insert(S,G)}}})(o.localStore,l))}async function Qb(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){me(am,"User change. New user:",e.toKey());const o=await tS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((y=>{y.reject(new _e(le.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Yl(t,o.Ns)}}function Xb(n,e){const t=Ne(n),o=t.Au.get(e);if(o&&o.hu)return Ge().add(o.key);{let r=Ge();const l=t.Iu.get(e);if(!l)return r;for(const c of l){const d=t.Tu.get(c);r=r.unionWith(d.view.nu)}return r}}function TS(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yb.bind(null,e),e.Pu.J_=Vb.bind(null,e.eventManager),e.Pu.yu=Pb.bind(null,e.eventManager),e}function Wb(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kb.bind(null,e),e}class ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return eb(this.persistence,new Wx,e.initialUser,this.serializer)}Cu(e){return new eS(Wp.Vi,this.serializer)}Du(e){return new ab}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ef.provider={build:()=>new ef};class Zb extends ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ze(this.persistence.referenceDelegate instanceof Zc,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new Lx(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new eS((o=>Zc.Vi(o,t)),this.serializer)}}class mp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>X0(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qb.bind(null,this.syncEngine),await Nb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Db})()}createDatastore(e){const t=_f(e.databaseInfo.databaseId),o=db(e.databaseInfo);return yb(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,r,l,c,d){return new _b(o,r,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>X0(this.syncEngine,t,0)),(function(){return z0.v()?new z0:new lb})())}createSyncEngine(e,t){return(function(r,l,c,d,y,m,_){const E=new Ob(r,l,c,d,y,m);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Ne(r);me(Ks,"RemoteStore shutting down."),l.Ea.add(5),await zl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}mp.provider={build:()=>new mp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="FirestoreClient";class jb{constructor(e,t,o,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this._databaseInfo=r,this.user=on.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async c=>{me(ls,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(o,(c=>(me(ls,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=sm(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Yh(n,e){n.asyncQueue.verifyOperationInProgress(),me(ls,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let o=t.initialUser;n.setCredentialChangeListener((async r=>{o.isEqual(r)||(await tS(e.localStore,r),o=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Z0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await e1(n);me(ls,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((o=>J0(e.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,r)=>J0(e.remoteStore,r))),n._onlineComponents=e}async function e1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(ls,"Using user provided OfflineComponentProvider");try{await Yh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===le.FAILED_PRECONDITION||r.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Js("Error using user provided cache. Falling back to memory cache: "+t),await Yh(n,new ef)}}else me(ls,"Using default OfflineComponentProvider"),await Yh(n,new Zb(void 0));return n._offlineComponents}async function AS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(ls,"Using user provided OnlineComponentProvider"),await Z0(n,n._uninitializedComponentsProvider._online)):(me(ls,"Using default OnlineComponentProvider"),await Z0(n,new mp))),n._onlineComponents}function t1(n){return AS(n).then((e=>e.syncEngine))}async function gp(n){const e=await AS(n),t=e.eventManager;return t.onListen=Bb.bind(null,e.syncEngine),t.onUnlisten=qb.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Fb.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Hb.bind(null,e.syncEngine),t}function n1(n,e,t,o){const r=new SS(o),l=new hS(e,r,t);return n.asyncQueue.enqueueAndForget((async()=>fS(await gp(n),l))),()=>{r.Nu(),n.asyncQueue.enqueueAndForget((async()=>dS(await gp(n),l)))}}function i1(n,e,t={}){const o=new ts;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,y,m){const _=new SS({next:S=>{_.Nu(),c.enqueueAndForget((()=>dS(l,E)));const I=S.docs.has(d);!I&&S.fromCache?m.reject(new _e(le.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&y&&y.source==="server"?m.reject(new _e(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new hS(hf(d.path),_,{includeMetadataChanges:!0,Ka:!0});return fS(l,E)})(await gp(n),n.asyncQueue,e,t,o))),o.promise}function o1(n,e){const t=new ts;return n.asyncQueue.enqueueAndForget((async()=>zb(await t1(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="ComponentProvider",j0=new Map;function r1(n,e,t,o,r){return new Rw(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,CS(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="firestore.googleapis.com",e_=!0;class t_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RS,this.ssl=e_}else this.host=e.host,this.ssl=e.ssl??e_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Px)throw new _e(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CS(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sf{constructor(e,t,o,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new ow;switch(o.type){case"firstParty":return new lw(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new _e(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=j0.get(t);o&&(me(s1,"Removing Datastore"),j0.delete(t),o.terminate())})(this),Promise.resolve()}}function a1(n,e,t,o={}){var m;n=ci(n,Sf);const r=Up(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(NR(`https://${d}`),PR("Firestore",!0)),l.host!==RS&&l.host!==d&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:d,ssl:r,emulatorOptions:o};if(!Ml(y,c)&&(n._setSettings(y),o.mockUserToken)){let _,E;if(typeof o.mockUserToken=="string")_=o.mockUserToken,E=on.MOCK_USER;else{_=MR(o.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const S=o.mockUserToken.sub||o.mockUserToken.user_id;if(!S)throw new _e(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(S)}n._authCredentials=new sw(new fT(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Af(this.firestore,e,this._query)}}class Ct{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(Gl(t,Ct._jsonSchema))return new Ct(e,o||null,new Ae(ft.fromString(t.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:Ut("string",Ct._jsonSchemaVersion),referencePath:Ut("string")};class ns extends Af{constructor(e,t,o){super(e,t,hf(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new Ae(e))}withConverter(e){return new ns(this.firestore,e,this._path)}}function Jh(n,e,...t){if(n=uo(n),dT("collection","path",e),n instanceof Sf){const o=ft.fromString(e,...t);return m0(o),new ns(n,null,o)}{if(!(n instanceof Ct||n instanceof ns))throw new _e(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ft.fromString(e,...t));return m0(o),new ns(n.firestore,null,o)}}function ui(n,e,...t){if(n=uo(n),arguments.length===1&&(e=Op.newId()),dT("doc","path",e),n instanceof Sf){const o=ft.fromString(e,...t);return p0(o),new Ct(n,null,new Ae(o))}{if(!(n instanceof Ct||n instanceof ns))throw new _e(le.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ft.fromString(e,...t));return p0(o),new Ct(n.firestore,n instanceof ns?n.converter:null,new Ae(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="AsyncQueue";class i_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iS(this,"async_queue_retry"),this._c=()=>{const o=zh();o&&me(n_,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=zh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=zh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ts;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!aa(e))throw e;me(n_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,fo("INTERNAL UNHANDLED ERROR: ",o_(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=om.createAndSchedule(this,e,t,o,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Re(47125,{Pc:o_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function o_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class $s extends Sf{constructor(e,t,o,r){super(e,t,o,r),this.type="firestore",this._queue=new i_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i_(e),this._firestoreClient=void 0,await e}}}function l1(n,e){const t=typeof n=="object"?n:zI(),o=typeof n=="string"?n:Yc,r=BI(t,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=xR("firestore");l&&a1(r,...l)}return r}function um(n){if(n._terminated)throw new _e(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||u1(n),n._firestoreClient}function u1(n){var o,r,l,c;const e=n._freezeSettings(),t=r1(n._databaseId,((o=n._app)==null?void 0:o.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new jb(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(y){const m=y==null?void 0:y._online.build();return{_offline:y==null?void 0:y._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(en.fromBase64String(e))}catch(t){throw new _e(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gl(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Ut("string",Jn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(Gl(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:Ut("string",Gi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gl(e,di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new di(e.vectorValues);throw new _e(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}di._jsonSchemaVersion="firestore/vectorValue/1.0",di._jsonSchema={type:Ut("string",di._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=/^__.*__$/;class f1{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new ql(e,this.data,t,this.fieldTransforms)}}class IS{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{dataSource:n})}}class Rf{constructor(e,t,o,r,l,c){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Rf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return tf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(wS(this.dataSource)&&c1.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class d1{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||_f(e)}createContext(e,t,o,r=!1){return new Rf({dataSource:e,methodName:t,targetDoc:o,path:jt.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xS(n){const e=n._freezeSettings(),t=_f(n._databaseId);return new d1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function h1(n,e,t,o,r,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,r);dm("Data must be an object, but it was:",c,o);const d=bS(o,c);let y,m;if(l.merge)y=new Dn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const S=Bl(e,E,t);if(!c.contains(S))throw new _e(le.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);DS(_,S)||_.push(S)}y=new Dn(_),m=c.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,m=c.fieldTransforms;return new f1(new En(d),y,m)}class If extends Cf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof If}}function p1(n,e,t){return new Rf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fm extends Cf{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=p1(this,e,!0),o=this.Ac.map((l=>Jl(l,t))),r=new ta(o);return new ex(e.path,r)}isEqual(e){return e instanceof fm&&Ml(this.Ac,e.Ac)}}function m1(n,e,t,o){const r=n.createContext(1,e,t);dm("Data must be an object, but it was:",r,o);const l=[],c=En.empty();us(o,((y,m)=>{const _=MS(e,y,t);m=uo(m);const E=r.childContextForFieldPath(_);if(m instanceof If)l.push(_);else{const S=Jl(m,E);S!=null&&(l.push(_),c.set(_,S))}}));const d=new Dn(l);return new IS(c,d,r.fieldTransforms)}function g1(n,e,t,o,r,l){const c=n.createContext(1,e,t),d=[Bl(e,o,t)],y=[r];if(l.length%2!=0)throw new _e(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Bl(e,l[S])),y.push(l[S+1]);const m=[],_=En.empty();for(let S=d.length-1;S>=0;--S)if(!DS(m,d[S])){const I=d[S];let L=y[S];L=uo(L);const G=c.childContextForFieldPath(I);if(L instanceof If)m.push(I);else{const O=Jl(L,G);O!=null&&(m.push(I),_.set(I,O))}}const E=new Dn(m);return new IS(_,E,c.fieldTransforms)}function Jl(n,e){if(NS(n=uo(n)))return dm("Unsupported field value:",e,n),bS(n,e);if(n instanceof Cf)return(function(o,r){if(!wS(r.dataSource))throw r.createError(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,r){const l=[];let c=0;for(const d of o){let y=Jl(d,r.childContextForArray(c));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),c++}return{arrayValue:{values:l}}})(n,e)}return(function(o,r){if((o=uo(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return Ww(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=dt.fromDate(o);return{timestampValue:Wc(r.serializer,l)}}if(o instanceof dt){const l=new dt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Wc(r.serializer,l)}}if(o instanceof Gi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Jn)return{bytesValue:YT(r.serializer,o._byteString)};if(o instanceof Ct){const l=r.databaseId,c=o.firestore._databaseId;if(!c.isEqual(l))throw r.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Qp(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof di)return(function(c,d){const y=c instanceof di?c.toArray():c;return{mapValue:{fields:{[TT]:{stringValue:ST},[Jc]:{arrayValue:{values:y.map((_=>{if(typeof _!="number")throw d.createError("VectorValues must only contain numeric values.");return Yp(d.serializer,_)}))}}}}}})(o,r);if(ZT(o))return o._toProto(r.serializer);throw r.createError(`Unsupported field value: ${Bp(o)}`)})(n,e)}function bS(n,e){const t={};return mT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(n,((o,r)=>{const l=Jl(r,e.childContextForField(o));l!=null&&(t[o]=l)})),{mapValue:{fields:t}}}function NS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof Gi||n instanceof Jn||n instanceof Ct||n instanceof Cf||n instanceof di||ZT(n))}function dm(n,e,t){if(!NS(t)||!hT(t)){const o=Bp(t);throw o==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+o)}}function Bl(n,e,t){if((e=uo(e))instanceof cm)return e._internalPath;if(typeof e=="string")return MS(n,e);throw tf("Field path arguments must be of type string or ",n,!1,void 0,t)}const y1=new RegExp("[~\\*/\\[\\]]");function MS(n,e,t){if(e.search(y1)>=0)throw tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cm(...e.split("."))._internalPath}catch{throw tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tf(n,e,t,o,r){const l=o&&!o.isEmpty(),c=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let y="";return(l||c)&&(y+=" (found",l&&(y+=` in field ${o}`),c&&(y+=` in document ${r}`),y+=")"),new _e(le.INVALID_ARGUMENT,d+n+y)}function DS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{convertValue(e,t="none"){switch(rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return us(e,((r,l)=>{o[r]=this.convertValue(l,t)})),o}convertVectorValue(e){var o,r,l;const t=(l=(r=(o=e.fields)==null?void 0:o[Jc].arrayValue)==null?void 0:r.values)==null?void 0:l.map((c=>At(c.doubleValue)));return new di(t)}convertGeoPoint(e){return new Gi(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=ff(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ul(e));default:return null}}convertTimestamp(e){const t=os(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=ft.fromString(e);Ze(WT(o),9688,{name:e});const r=new Ll(o.get(1),o.get(3)),l=new Ae(o.popFirst(5));return r.isEqual(t)||fo(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS extends v1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function s_(...n){return new fm("arrayUnion",n)}const r_="@firebase/firestore",a_="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(n){return(function(t,o){if(typeof t!="object"||t===null)return!1;const r=t;for(const l of o)if(l in r&&typeof r[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t,o,r,l){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Bl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _1 extends PS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function T1(n,e,t){let o;return o=n?n.toFirestore(e):e,o}class Cl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zs extends PS{constructor(e,t,o,r,l,c){super(e,t,o,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Bl("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=zs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",zs._jsonSchema={type:Ut("string",zs._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Oc extends zs{data(e={}){return super.data(e)}}class Qr{constructor(e,t,o,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Cl(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new Oc(this._firestore,this._userDataWriter,o.key,o,new Cl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((d=>{const y=new Oc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Cl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const y=new Oc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Cl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,_=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:S1(d.type),doc:y,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function S1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr._jsonSchemaVersion="firestore/querySnapshot/1.0",Qr._jsonSchema={type:Ut("string",Qr._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(n){n=ci(n,Ct);const e=ci(n.firestore,$s),t=um(e);return i1(t,n._key).then((o=>US(e,n,o)))}function c_(n,e,t){n=ci(n,Ct);const o=ci(n.firestore,$s),r=T1(n.converter,e),l=xS(o);return hm(o,[h1(l,"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,fi.none())])}function vl(n,e,t,...o){n=ci(n,Ct);const r=ci(n.firestore,$s),l=xS(r);let c;return c=typeof(e=uo(e))=="string"||e instanceof cm?g1(l,"updateDoc",n._key,e,t,o):m1(l,"updateDoc",n._key,e),hm(r,[c.toMutation(n._key,fi.exists(!0))])}function A1(n){return hm(ci(n.firestore,$s),[new Jp(n._key,fi.none())])}function f_(n,...e){var m,_,E;n=uo(n);let t={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||l_(e[o])||(t=e[o++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(l_(e[o])){const S=e[o];e[o]=(m=S.next)==null?void 0:m.bind(S),e[o+1]=(_=S.error)==null?void 0:_.bind(S),e[o+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,c,d;if(n instanceof Ct)c=ci(n.firestore,$s),d=hf(n._key.path),l={next:S=>{e[o]&&e[o](US(c,n,S))},error:e[o+1],complete:e[o+2]};else{const S=ci(n,Af);c=ci(S.firestore,$s),d=S._query;const I=new VS(c);l={next:L=>{e[o]&&e[o](new Qr(c,I,S,L))},error:e[o+1],complete:e[o+2]},E1(n._query)}const y=um(c);return n1(y,d,r,l)}function hm(n,e){const t=um(n);return o1(t,e)}function US(n,e,t){const o=t.docs.get(e._key),r=new VS(n);return new zs(n,r,e._key,o,new Cl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){iw(HI),Hc(new Dl("firestore",((o,{instanceIdentifier:r,options:l})=>{const c=o.getProvider("app").getImmediate(),d=new $s(new rw(o.getProvider("auth-internal")),new uw(c,o.getProvider("app-check-internal")),Iw(c,r),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Jr(r_,a_,e),Jr(r_,a_,"esm2020")})();const C1={apiKey:"AIzaSyAinxlOhOZYdNZYr8q8qNvx_-pln195XRY",authDomain:"spaceaduans-aigit-956472-f2243.firebaseapp.com",projectId:"spaceaduans-aigit-956472-f2243",storageBucket:"spaceaduans-aigit-956472-f2243.appspot.com",messagingSenderId:"684109081771",appId:"1:684109081771:web:e7ac6491d2a2358e5b9bee"},R1=tT(C1),Mn=l1(R1),I1=({onLogin:n})=>{const[e,t]=be.useState(""),[o,r]=be.useState(""),l=c=>{c.preventDefault(),n({email:e,pass:o})};return R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 p-6",children:R.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden animate-fadeIn",children:[R.jsxs("div",{className:"bg-blue-600 p-8 text-center",children:[R.jsx("img",{src:"/assets/new_logo.jpg",alt:"SpaceAduanas AI Logo",className:"h-20 w-20 rounded-2xl mx-auto mb-4"}),R.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"SpaceAduanas AI"}),R.jsx("p",{className:"text-blue-100 text-sm opacity-80 mt-1",children:"Revisin Normativa de Pedimentos"})]}),R.jsxs("form",{onSubmit:l,className:"p-8 space-y-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Correo Electrnico"}),R.jsx("input",{type:"email",required:!0,value:e,onChange:c=>t(c.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-700",placeholder:"nombre@spaceaduanas.com"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Contrasea (4 dgitos)"}),R.jsx("input",{type:"password",maxLength:4,required:!0,value:o,onChange:c=>r(c.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-700 tracking-widest text-lg",placeholder:""})]}),R.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all active:scale-[0.98]",children:"Entrar al Portal"}),R.jsx("div",{className:"text-center",children:R.jsx("p",{className:"text-xs text-slate-400",children:"Uso exclusivo para personal autorizado de SpaceAduanas."})})]})]})})},w1=({user:n,onLogout:e,children:t,activeTab:o,setActiveTab:r})=>R.jsxs("div",{className:"min-h-screen flex flex-col",children:[R.jsxs("header",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("img",{src:"/assets/new_logo.jpg",alt:"SpaceAduanas AI Logo",className:"h-10 w-10 rounded-lg"}),R.jsxs("div",{children:[R.jsxs("h1",{className:"font-bold text-xl tracking-tight text-slate-800",children:["SpaceAduanas ",R.jsx("span",{className:"text-blue-600",children:"AI"})]}),R.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Revisin Inteligente de Pedimentos"})]})]}),R.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[R.jsx("button",{onClick:()=>r("reviewer"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${o==="reviewer"?"bg-blue-50 text-blue-700":"text-slate-600 hover:bg-slate-100"}`,children:"Revisor"}),n.isSuperUser&&R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:()=>r("admin"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${o==="admin"?"bg-blue-50 text-blue-700":"text-slate-600 hover:bg-slate-100"}`,children:"Panel Admin"}),R.jsx("button",{onClick:()=>r("history"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${o==="history"?"bg-blue-50 text-blue-700":"text-slate-600 hover:bg-slate-100"}`,children:"Historial Global"})]})]}),R.jsxs("div",{className:"flex items-center space-x-4",children:[R.jsxs("div",{className:"text-right hidden sm:block",children:[R.jsx("p",{className:"text-sm font-semibold text-slate-700",children:n.email}),R.jsx("p",{className:"text-xs text-slate-500 capitalize",children:n.isSuperUser?"Administrador":"Usuario"})]}),R.jsx("button",{onClick:e,className:"p-2 text-slate-400 hover:text-red-500 transition-colors",title:"Cerrar Sesin",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]}),R.jsx("main",{className:"flex-1 p-6 max-w-7xl mx-auto w-full",children:t})]});var x1={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let b1,N1;function M1(){return{geminiUrl:b1,vertexUrl:N1}}function D1(n,e,t,o){var r,l;if(!(n!=null&&n.baseUrl)){const c=M1();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mo{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const y=n[d];if(Array.isArray(t))for(let m=0;m<y.length;m++){const _=y[m];h(_,e.slice(l+1),t[m])}else for(const m of y)h(m,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const y=n[d];h(y[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return t;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(o+1),t)):t}else return t}else n=n[r]}return n}catch(o){if(o instanceof TypeError)return t;throw o}}function V1(n,e){for(const[t,o]of Object.entries(e)){const r=t.split("."),l=o.split("."),c=new Set;let d=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){d=y;break}if(d!==-1&&l.length>d)for(let y=d;y<l.length;y++){const m=l[y];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}yp(n,r,l,0,c)}}function yp(n,e,t,o,r){if(o>=e.length||typeof n!="object"||n===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),d=n;if(c in d&&Array.isArray(d[c]))for(const y of d[c])yp(y,e,t,o+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,d=Object.keys(c).filter(m=>!m.startsWith("_")&&!r.has(m)),y={};for(const m of d)y[m]=c[m];for(const[m,_]of Object.entries(y)){const E=[];for(const S of t.slice(o))S==="*"?E.push(m):E.push(S);h(c,E,_)}for(const m of d)delete c[m]}}else{const c=n;l in c&&yp(c[l],e,t,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P1(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const o=f(n,["resourceName"]);return o!=null&&h(e,["_url","resourceName"],o),e}function U1(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],k1(c)),e}function L1(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],O1(c)),e}function k1(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>B1(c))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function O1(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>F1(c))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function B1(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],J1(t)),e}function F1(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],K1(t)),e}function G1(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function q1(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function H1(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],z1(c)),e}function z1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function LS(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],Y1(c)),e}function Y1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function J1(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const o=f(n,["encodedVideo"]);o!=null&&h(e,["videoBytes"],pm(o));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function K1(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],pm(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var d_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(d_||(d_={}));var h_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(h_||(h_={}));var p_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(p_||(p_={}));var mt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(mt||(mt={}));var m_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(m_||(m_={}));var g_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(g_||(g_={}));var y_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(y_||(y_={}));var v_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(v_||(v_={}));var __;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(__||(__={}));var E_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(E_||(E_={}));var T_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(T_||(T_={}));var S_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(S_||(S_={}));var A_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(A_||(A_={}));var C_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(C_||(C_={}));var R_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(R_||(R_={}));var I_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(I_||(I_={}));var w_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(w_||(w_={}));var x_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(x_||(x_={}));var b_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(b_||(b_={}));var N_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(N_||(N_={}));var M_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(M_||(M_={}));var nf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(nf||(nf={}));var D_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(D_||(D_={}));var V_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(V_||(V_={}));var P_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(P_||(P_={}));var vp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(vp||(vp={}));var U_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(U_||(U_={}));var L_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(L_||(L_={}));var _p;(function(n){n.COLLECTION="COLLECTION"})(_p||(_p={}));var k_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(k_||(k_={}));var O_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(O_||(O_={}));var B_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(B_||(B_={}));var F_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(F_||(F_={}));var G_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(G_||(G_={}));var q_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(q_||(q_={}));var H_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(H_||(H_={}));var z_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(z_||(z_={}));var Y_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Y_||(Y_={}));var J_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(J_||(J_={}));var K_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(K_||(K_={}));var $_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})($_||($_={}));var Q_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Q_||(Q_={}));var X_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(X_||(X_={}));var W_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(W_||(W_={}));var Z_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Z_||(Z_={}));var j_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(j_||(j_={}));var eE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(eE||(eE={}));var tE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(tE||(tE={}));var nE;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(nE||(nE={}));var iE;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(iE||(iE={}));var oE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(oE||(oE={}));var sE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(sE||(sE={}));var rE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(rE||(rE={}));var aE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(aE||(aE={}));var lE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(lE||(lE={}));var uE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(uE||(uE={}));var zr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(zr||(zr={}));class Ep{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class _l{get text(){var e,t,o,r,l,c,d,y;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",_=!1;const E=[];for(const S of(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&y!==void 0?y:[]){for(const[I,L]of Object.entries(S))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(L!==null||L!==void 0)&&E.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,m+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?m:void 0}get data(){var e,t,o,r,l,c,d,y;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const _=[];for(const E of(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&y!==void 0?y:[]){for(const[S,I]of Object.entries(E))S!=="inlineData"&&(I!==null||I!==void 0)&&_.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,o,r,l,c,d,y;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,o,r,l,c,d,y,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,o,r,l,c,d,y,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.output}}class cE{}class fE{}class $1{}class Q1{}class X1{}class W1{}class dE{}class hE{}class pE{}class Z1{}class of{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new of;let r;const l=e;return t?r=L1(l):r=U1(l),Object.assign(o,r),o}}class mE{}class gE{}class yE{}class vE{}class j1{}class eN{}class tN{}class mm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new mm,l=H1(e);return Object.assign(o,l),o}}class nN{}class iN{}class oN{}class _E{}class sN{get text(){var e,t,o;let r="",l=!1;const c=[];for(const d of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[y,m]of Object.entries(d))y!=="text"&&y!=="thought"&&m!==null&&c.push(y);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const c of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[d,y]of Object.entries(c))d!=="inlineData"&&y!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class rN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class gm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new gm,l=LS(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function kS(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function OS(n){return Array.isArray(n)?n.map(e=>sf(e)):[sf(n)]}function sf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function BS(n){const e=sf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function FS(n){const e=sf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function EE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function GS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>EE(e)):[EE(n)]}function Tp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function TE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function SE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return Tp(n)?n:{role:"user",parts:GS(n)}}function ym(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=rn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function Kn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(TE(n)||SE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],o=Tp(n[0]);for(const r of n){const l=Tp(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(TE(r)||SE(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:GS(t)}),e}function aN(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(mt).includes(t[0].toUpperCase())?t[0].toUpperCase():mt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(mt).includes(o.toUpperCase())?o.toUpperCase():mt.TYPE_UNSPECIFIED})}}function Xr(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&aN(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(mt).includes(d.toUpperCase())?d.toUpperCase():mt.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Xr(d);else if(o.includes(c)){const y=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}y.push(Xr(m))}e[c]=y}else if(r.includes(c)){const y={};for(const[m,_]of Object.entries(d))y[m]=Xr(_);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=d}return e}function vm(n){return Xr(n)}function _m(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Em(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ua(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Xr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Xr(e.response));return n}function ca(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function lN(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function go(n,e){if(typeof e!="string")throw new Error("name must be a string");return lN(n,e,"cachedContents")}function qS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function fs(n){return pm(n)}function uN(n){return n!=null&&typeof n=="object"&&"name"in n}function cN(n){return n!=null&&typeof n=="object"&&"video"in n}function fN(n){return n!=null&&typeof n=="object"&&"uri"in n}function HS(n){var e;let t;if(uN(n)&&(t=n.name),!(fN(n)&&(t=n.uri,t===void 0))&&!(cN(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function zS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function YS(n){for(const e of["models","tunedModels","publisherModels"])if(dN(n,e))return n[e];return[]}function dN(n,e){return n!==null&&typeof n=="object"&&e in n}function hN(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function pN(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=hN(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function JS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function mN(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function KS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function fa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function $S(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gN(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const o=f(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>XN(c))),h(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function yN(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const o=f(n,["gcsDestination","outputUriPrefix"]);o!=null&&h(e,["gcsUri"],o);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function vN(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const o=f(n,["gcsUri"]);o!=null&&h(e,["gcsDestination","outputUriPrefix"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Bc(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata","displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],$S(r));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const y=f(n,["metadata","model"]);y!=null&&h(e,["model"],y);const m=f(n,["metadata","output"]);return m!=null&&h(e,["dest"],gN(KS(m))),e}function Sp(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["state"]);r!=null&&h(e,["state"],$S(r));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["createTime"]);c!=null&&h(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const y=f(n,["endTime"]);y!=null&&h(e,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&h(e,["updateTime"],m);const _=f(n,["model"]);_!=null&&h(e,["model"],_);const E=f(n,["inputConfig"]);E!=null&&h(e,["src"],_N(E));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],yN(KS(S)));const I=f(n,["completionStats"]);return I!=null&&h(e,["completionStats"],I),e}function _N(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const o=f(n,["gcsSource","uris"]);o!=null&&h(e,["gcsUri"],o);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function EN(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&h(t,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>QN(n,c))),h(t,["requests","requests"],l)}return t}function TN(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const o=f(n,["gcsUri"]);o!=null&&h(e,["gcsSource","uris"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function SN(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function AN(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function CN(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function RN(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const o=f(n,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],IN(o));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const y=f(n,["index"]);y!=null&&h(e,["index"],y);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(I=>I)),h(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function IN(n){const e={},t=f(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["citations"],o)}return e}function QS(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>iM(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function wN(n,e){const t={},o=f(n,["displayName"]);if(e!==void 0&&o!=null&&h(e,["batch","displayName"],o),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function xN(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],vN(mN(r))),t}function AE(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],EN(n,JS(n,r)));const l=f(e,["config"]);return l!=null&&wN(l,t),t}function bN(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],$e(n,o));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],TN(JS(n,r)));const l=f(e,["config"]);return l!=null&&xN(l,t),t}function NN(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&h(e,["batch","displayName"],o),t}function MN(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],ON(n,r));const l=f(e,["config"]);return l!=null&&NN(l,t),t}function DN(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function VN(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function PN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function UN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function LN(n,e){const t={},o=f(e,["contents"]);if(o!=null){let l=ym(n,o);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(h(t,["_self"],kN(r,t)),V1(t,{"requests[].*":"requests[].request.*"})),t}function kN(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function ON(n,e){const t={},o=f(e,["fileName"]);o!=null&&h(t,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],LN(n,r)),t}function BN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function FN(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function GN(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qN(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],QS(rn(r)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(o,["topP"],c);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const y=f(e,["candidateCount"]);y!=null&&h(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const _=f(e,["stopSequences"]);_!=null&&h(o,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&h(o,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&h(o,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&h(o,["frequencyPenalty"],L);const G=f(e,["seed"]);G!=null&&h(o,["seed"],G);const O=f(e,["responseMimeType"]);O!=null&&h(o,["responseMimeType"],O);const K=f(e,["responseSchema"]);K!=null&&h(o,["responseSchema"],vm(K));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&h(o,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let M=Z;Array.isArray(M)&&(M=M.map(j=>oM(j))),h(t,["safetySettings"],M)}const re=f(e,["tools"]);if(t!==void 0&&re!=null){let M=ca(re);Array.isArray(M)&&(M=M.map(j=>rM(ua(j)))),h(t,["tools"],M)}const ue=f(e,["toolConfig"]);if(t!==void 0&&ue!=null&&h(t,["toolConfig"],sM(ue)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=f(e,["cachedContent"]);t!==void 0&&ce!=null&&h(t,["cachedContent"],go(n,ce));const D=f(e,["responseModalities"]);D!=null&&h(o,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&h(o,["mediaResolution"],N);const b=f(e,["speechConfig"]);if(b!=null&&h(o,["speechConfig"],_m(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&h(o,["thinkingConfig"],P);const V=f(e,["imageConfig"]);V!=null&&h(o,["imageConfig"],$N(V));const k=f(e,["enableEnhancedCivicAnswers"]);if(k!=null&&h(o,["enableEnhancedCivicAnswers"],k),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function HN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>RN(m))),h(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function zN(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function YN(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function JN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function KN(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function $N(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const o=f(n,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function QN(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["request","model"],$e(n,o));const r=f(e,["contents"]);if(r!=null){let d=Kn(r);Array.isArray(d)&&(d=d.map(y=>QS(y))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&h(t,["request","generationConfig"],qN(n,c,f(t,["request"],{}))),t}function XN(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],HN(t));const o=f(n,["error"]);return o!=null&&h(e,["error"],o),e}function WN(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function ZN(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function jN(n){const e={},t=f(n,["config"]);return t!=null&&WN(t,e),e}function eM(n){const e={},t=f(n,["config"]);return t!=null&&ZN(t,e),e}function tM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Bc(c))),h(e,["batchJobs"],l)}return e}function nM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Sp(c))),h(e,["batchJobs"],l)}return e}function iM(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],BN(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],FN(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],SN(y));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function oM(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function sM(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],GN(o)),e}function rM(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const c=f(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],JN(c));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],KN(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&h(e,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var po;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(po||(po={}));class Ws{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aM extends mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ws(po.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=AE(this.apiClient,e),o=t._url,r=pe("{model}:batchGenerateContent",o),d=t.batch.inputConfig.requests,y=d.requests,m=[];for(const _ of y){const E=Object.assign({},_);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=S,E.request=I}m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=bN(this.apiClient,e);return d=pe("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>Sp(_))}else{const m=AE(this.apiClient,e);return d=pe("{model}:batchGenerateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Bc(_))}}async createEmbeddingsInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=MN(this.apiClient,e);return l=pe("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>Bc(y))}}async get(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=YN(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>Sp(_))}else{const m=zN(this.apiClient,e);return d=pe("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Bc(_))}}async cancel(e){var t,o,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const y=CN(this.apiClient,e);c=pe("batchPredictionJobs/{name}:cancel",y._url),d=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=AN(this.apiClient,e);c=pe("batches/{name}:cancel",y._url),d=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=eM(e);return d=pe("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=nM(_),S=new _E;return Object.assign(S,E),S})}else{const m=jN(e);return d=pe("batches",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=tM(_),S=new _E;return Object.assign(S,E),S})}}async delete(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=VN(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>UN(_))}else{const m=DN(this.apiClient,e);return d=pe("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>PN(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lM(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function CE(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>MM(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function uM(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let _=Kn(c);Array.isArray(_)&&(_=_.map(E=>CE(E))),h(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],CE(rn(d)));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let _=y;Array.isArray(_)&&(_=_.map(E=>VM(E))),h(e,["tools"],_)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],DM(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function cM(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let E=Kn(c);Array.isArray(E)&&(E=E.map(S=>S)),h(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],rn(d));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(S=>PM(S))),h(e,["tools"],E)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&h(e,["encryption_spec","kmsKeyName"],_),t}function fM(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],kS(n,o));const r=f(e,["config"]);return r!=null&&uM(r,t),t}function dM(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],kS(n,o));const r=f(e,["config"]);return r!=null&&cM(r,t),t}function hM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],go(n,o)),t}function pM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],go(n,o)),t}function mM(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function gM(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function yM(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function vM(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _M(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function EM(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function TM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],go(n,o)),t}function SM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],go(n,o)),t}function AM(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function CM(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function RM(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function IM(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function wM(n){const e={},t=f(n,["config"]);return t!=null&&RM(t,e),e}function xM(n){const e={},t=f(n,["config"]);return t!=null&&IM(t,e),e}function bM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function NM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function MM(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],yM(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],vM(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],lM(y));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function DM(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],_M(o)),e}function VM(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const c=f(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],AM(c));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],CM(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&h(e,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function PM(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>EM(S))),h(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&h(e,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const _=f(n,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function UM(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function LM(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function kM(n,e){const t={},o=f(e,["name"]);o!=null&&h(t,["_url","name"],go(n,o));const r=f(e,["config"]);return r!=null&&UM(r,t),t}function OM(n,e){const t={},o=f(e,["name"]);o!=null&&h(t,["_url","name"],go(n,o));const r=f(e,["config"]);return r!=null&&LM(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BM extends mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ws(po.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=dM(this.apiClient,e);return d=pe("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const m=fM(this.apiClient,e);return d=pe("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async get(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=SM(this.apiClient,e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const m=TM(this.apiClient,e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async delete(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=pM(this.apiClient,e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=gM(_),S=new yE;return Object.assign(S,E),S})}else{const m=hM(this.apiClient,e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=mM(_),S=new yE;return Object.assign(S,E),S})}}async update(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=OM(this.apiClient,e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const m=kM(this.apiClient,e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async listInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=xM(e);return d=pe("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=NM(_),S=new vE;return Object.assign(S,E),S})}else{const m=wM(e);return d=pe("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=bM(_),S=new vE;return Object.assign(S,E),S})}}}function rf(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]]);return t}function RE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(n){return this instanceof Ie?(this.v=n,this):new Ie(n)}function hi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(I){return function(L){return Promise.resolve(L).then(I,E)}}function d(I,L){o[I]&&(r[I]=function(G){return new Promise(function(O,K){l.push([I,G,O,K])>1||y(I,G)})},L&&(r[I]=L(r[I])))}function y(I,L){try{m(o[I](L))}catch(G){S(l[0][3],G)}}function m(I){I.value instanceof Ie?Promise.resolve(I.value.v).then(_,E):S(l[0][2],I)}function _(I){y("next",I)}function E(I){y("throw",I)}function S(I,L){I(L),l.shift(),l.length&&y(l[0][0],l[0][1])}}function pi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof RE=="function"?RE(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(c){return new Promise(function(d,y){c=n[l](c),r(d,y,c.done,c.value)})}}function r(l,c,d,y){Promise.resolve(y).then(function(m){l({value:m,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FM(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:XS(t)}function XS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function GM(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function IE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!XS(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class qM{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new HM(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class HM{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),GM(l)}async sendMessage(e){var t;await this.sendPromise;const o=rn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const y=await r,m=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,_=y.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];_!=null&&(S=(d=_.slice(E))!==null&&d!==void 0?d:[]);const I=m?[m]:[];this.recordHistory(o,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=rn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?IE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return hi(this,arguments,function*(){var r,l,c,d,y,m;const _=[];try{for(var E=!0,S=pi(e),I;I=yield Ie(S.next()),r=I.done,!r;E=!0){d=I.value,E=!1;const L=d;if(FM(L)){const G=(m=(y=L.candidates)===null||y===void 0?void 0:y[0])===null||m===void 0?void 0:m.content;G!==void 0&&_.push(G)}yield yield Ie(L)}}catch(L){l={error:L}}finally{try{!E&&!r&&(c=S.return)&&(yield Ie(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,_)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...IE(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Fl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zM(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function YM(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function JM(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],HS(t)),e}function KM(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function $M(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],HS(t)),e}function QM(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function XM(n){const e={},t=f(n,["config"]);return t!=null&&QM(t,e),e}function WM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZM extends mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ws(po.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=XM(e);return l=pe("files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:y.headers},_})),r.then(y=>{const m=WM(y),_=new nN;return Object.assign(_,m),_})}}async createInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zM(e);return l=pe("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=YM(y),_=new iN;return Object.assign(_,m),_})}}async get(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$M(e);return l=pe("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=JM(e);return l=pe("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:y.headers},_})),r.then(y=>{const m=KM(y),_=new oN;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fc(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function jM(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>mD(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function eD(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function tD(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nD(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function iD(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const o=f(n,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const y=f(n,["logprobs"]);y!=null&&h(e,["logprobs"],y);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const _=f(n,["mediaResolution"]);_!=null&&h(e,["mediaResolution"],_);const E=f(n,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&h(e,["responseMimeType"],I);const L=f(n,["responseModalities"]);L!=null&&h(e,["responseModalities"],L);const G=f(n,["responseSchema"]);G!=null&&h(e,["responseSchema"],G);const O=f(n,["routingConfig"]);O!=null&&h(e,["routingConfig"],O);const K=f(n,["seed"]);K!=null&&h(e,["seed"],K);const ie=f(n,["speechConfig"]);ie!=null&&h(e,["speechConfig"],ie);const Z=f(n,["stopSequences"]);Z!=null&&h(e,["stopSequences"],Z);const re=f(n,["temperature"]);re!=null&&h(e,["temperature"],re);const ue=f(n,["thinkingConfig"]);ue!=null&&h(e,["thinkingConfig"],ue);const ce=f(n,["topK"]);ce!=null&&h(e,["topK"],ce);const D=f(n,["topP"]);if(D!=null&&h(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function oD(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function sD(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function rD(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Em(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],jM(rn(L)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let ce=ca(G);Array.isArray(ce)&&(ce=ce.map(D=>yD(ua(D)))),h(e,["setup","tools"],ce)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],gD(O));const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&h(e,["setup","inputAudioTranscription"],K);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&h(e,["setup","outputAudioTranscription"],ie);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const ue=f(n,["proactivity"]);if(e!==void 0&&ue!=null&&h(e,["setup","proactivity"],ue),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function aD(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],iD(o));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Em(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],rn(L));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let D=ca(G);Array.isArray(D)&&(D=D.map(N=>vD(ua(N)))),h(e,["setup","tools"],D)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],O);const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&h(e,["setup","inputAudioTranscription"],K);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&h(e,["setup","outputAudioTranscription"],ie);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const ue=f(n,["proactivity"]);e!==void 0&&ue!=null&&h(e,["setup","proactivity"],ue);const ce=f(n,["explicitVadSignal"]);return e!==void 0&&ce!=null&&h(e,["setup","explicitVadSignal"],ce),t}function lD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],$e(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],rD(r,t)),t}function uD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],$e(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],aD(r,t)),t}function cD(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function fD(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["weightedPrompts"],o)}return e}function dD(n){const e={},t=f(n,["media"]);if(t!=null){let m=OS(t);Array.isArray(m)&&(m=m.map(_=>Fc(_))),h(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&h(e,["audio"],Fc(FS(o)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],Fc(BS(l)));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const y=f(n,["activityEnd"]);return y!=null&&h(e,["activityEnd"],y),e}function hD(n){const e={},t=f(n,["media"]);if(t!=null){let m=OS(t);Array.isArray(m)&&(m=m.map(_=>_)),h(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&h(e,["audio"],FS(o));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],BS(l));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const y=f(n,["activityEnd"]);return y!=null&&h(e,["activityEnd"],y),e}function pD(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const o=f(n,["serverContent"]);o!=null&&h(e,["serverContent"],o);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],_D(c));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const y=f(n,["sessionResumptionUpdate"]);y!=null&&h(e,["sessionResumptionUpdate"],y);const m=f(n,["voiceActivityDetectionSignal"]);m!=null&&h(e,["voiceActivityDetectionSignal"],m);const _=f(n,["voiceActivity"]);return _!=null&&h(e,["voiceActivity"],ED(_)),e}function mD(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],eD(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],tD(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],Fc(y));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function gD(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yD(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const c=f(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],oD(c));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],sD(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&h(e,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function vD(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>nD(S))),h(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&h(e,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const _=f(n,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function _D(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const o=f(n,["cachedContentTokenCount"]);o!=null&&h(e,["cachedContentTokenCount"],o);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const y=f(n,["promptTokensDetails"]);if(y!=null){let I=y;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["promptTokensDetails"],I)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["cacheTokensDetails"],I)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["responseTokensDetails"],I)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["toolUsePromptTokensDetails"],I)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}function ED(n){const e={},t=f(n,["type"]);return t!=null&&h(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TD(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function SD(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const o=f(n,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],AD(o));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const y=f(n,["index"]);y!=null&&h(e,["index"],y);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(I=>I)),h(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function AD(n){const e={},t=f(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["citations"],o)}return e}function CD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["contents"]);if(r!=null){let l=Kn(r);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["contents"],l)}return t}function RD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["tokensInfo"],r)}return e}function ID(n){const e={},t=f(n,["values"]);t!=null&&h(e,["values"],t);const o=f(n,["statistics"]);return o!=null&&h(e,["statistics"],wD(o)),e}function wD(n){const e={},t=f(n,["truncated"]);t!=null&&h(e,["truncated"],t);const o=f(n,["token_count"]);return o!=null&&h(e,["tokenCount"],o),e}function wf(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>L2(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function xD(n){const e={},t=f(n,["controlType"]);t!=null&&h(e,["controlType"],t);const o=f(n,["enableControlImageComputation"]);return o!=null&&h(e,["computeControl"],o),e}function bD(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function ND(n,e){const t={},o=f(n,["systemInstruction"]);e!==void 0&&o!=null&&h(e,["systemInstruction"],rn(o));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>eA(d))),h(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],T2(l)),t}function MD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["contents"]);if(r!=null){let c=Kn(r);Array.isArray(c)&&(c=c.map(d=>wf(d))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&bD(l),t}function DD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["contents"]);if(r!=null){let c=Kn(r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&ND(l,t),t}function VD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["totalTokens"]);o!=null&&h(e,["totalTokens"],o);const r=f(n,["cachedContentTokenCount"]);return r!=null&&h(e,["cachedContentTokenCount"],r),e}function PD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["totalTokens"]);return o!=null&&h(e,["totalTokens"],o),e}function UD(n,e){const t={},o=f(e,["model"]);return o!=null&&h(t,["_url","name"],$e(n,o)),t}function LD(n,e){const t={},o=f(e,["model"]);return o!=null&&h(t,["_url","name"],$e(n,o)),t}function kD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function OD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function BD(n,e){const t={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const y=f(n,["seed"]);e!==void 0&&y!=null&&h(e,["parameters","seed"],y);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&h(e,["parameters","language"],I);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const G=f(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&h(e,["parameters","outputOptions","compressionQuality"],G);const O=f(n,["addWatermark"]);e!==void 0&&O!=null&&h(e,["parameters","addWatermark"],O);const K=f(n,["labels"]);e!==void 0&&K!=null&&h(e,["labels"],K);const ie=f(n,["editMode"]);e!==void 0&&ie!=null&&h(e,["parameters","editMode"],ie);const Z=f(n,["baseSteps"]);return e!==void 0&&Z!=null&&h(e,["parameters","editConfig","baseSteps"],Z),t}function FD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(y=>q2(y))),h(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&BD(c,t),t}function GD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>xf(l))),h(e,["generatedImages"],r)}return e}function qD(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function HD(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&h(e,["instances[]","task_type"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),t}function zD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["contents"]);if(r!=null){let d=ym(n,r);Array.isArray(d)&&(d=d.map(y=>y)),h(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&qD(l,t);const c=f(e,["model"]);return c!==void 0&&h(t,["requests[]","model"],$e(n,c)),t}function YD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["contents"]);if(r!=null){let c=ym(n,r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&HD(l,t),t}function JD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function KD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>ID(c))),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function $D(n){const e={},t=f(n,["endpoint"]);t!=null&&h(e,["name"],t);const o=f(n,["deployedModelId"]);return o!=null&&h(e,["deployedModelId"],o),e}function QD(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function XD(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WD(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ZD(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function jD(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],wf(rn(r)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(o,["topP"],c);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const y=f(e,["candidateCount"]);y!=null&&h(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const _=f(e,["stopSequences"]);_!=null&&h(o,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&h(o,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&h(o,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&h(o,["frequencyPenalty"],L);const G=f(e,["seed"]);G!=null&&h(o,["seed"],G);const O=f(e,["responseMimeType"]);O!=null&&h(o,["responseMimeType"],O);const K=f(e,["responseSchema"]);K!=null&&h(o,["responseSchema"],vm(K));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&h(o,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let M=Z;Array.isArray(M)&&(M=M.map(j=>H2(j))),h(t,["safetySettings"],M)}const re=f(e,["tools"]);if(t!==void 0&&re!=null){let M=ca(re);Array.isArray(M)&&(M=M.map(j=>X2(ua(j)))),h(t,["tools"],M)}const ue=f(e,["toolConfig"]);if(t!==void 0&&ue!=null&&h(t,["toolConfig"],Q2(ue)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=f(e,["cachedContent"]);t!==void 0&&ce!=null&&h(t,["cachedContent"],go(n,ce));const D=f(e,["responseModalities"]);D!=null&&h(o,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&h(o,["mediaResolution"],N);const b=f(e,["speechConfig"]);if(b!=null&&h(o,["speechConfig"],_m(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&h(o,["thinkingConfig"],P);const V=f(e,["imageConfig"]);V!=null&&h(o,["imageConfig"],I2(V));const k=f(e,["enableEnhancedCivicAnswers"]);if(k!=null&&h(o,["enableEnhancedCivicAnswers"],k),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function e2(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],rn(r));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(o,["topP"],c);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const y=f(e,["candidateCount"]);y!=null&&h(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const _=f(e,["stopSequences"]);_!=null&&h(o,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&h(o,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&h(o,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&h(o,["frequencyPenalty"],L);const G=f(e,["seed"]);G!=null&&h(o,["seed"],G);const O=f(e,["responseMimeType"]);O!=null&&h(o,["responseMimeType"],O);const K=f(e,["responseSchema"]);K!=null&&h(o,["responseSchema"],vm(K));const ie=f(e,["responseJsonSchema"]);ie!=null&&h(o,["responseJsonSchema"],ie);const Z=f(e,["routingConfig"]);Z!=null&&h(o,["routingConfig"],Z);const re=f(e,["modelSelectionConfig"]);re!=null&&h(o,["modelConfig"],re);const ue=f(e,["safetySettings"]);if(t!==void 0&&ue!=null){let ae=ue;Array.isArray(ae)&&(ae=ae.map(ye=>ye)),h(t,["safetySettings"],ae)}const ce=f(e,["tools"]);if(t!==void 0&&ce!=null){let ae=ca(ce);Array.isArray(ae)&&(ae=ae.map(ye=>eA(ua(ye)))),h(t,["tools"],ae)}const D=f(e,["toolConfig"]);t!==void 0&&D!=null&&h(t,["toolConfig"],D);const N=f(e,["labels"]);t!==void 0&&N!=null&&h(t,["labels"],N);const b=f(e,["cachedContent"]);t!==void 0&&b!=null&&h(t,["cachedContent"],go(n,b));const P=f(e,["responseModalities"]);P!=null&&h(o,["responseModalities"],P);const V=f(e,["mediaResolution"]);V!=null&&h(o,["mediaResolution"],V);const k=f(e,["speechConfig"]);k!=null&&h(o,["speechConfig"],_m(k));const M=f(e,["audioTimestamp"]);M!=null&&h(o,["audioTimestamp"],M);const j=f(e,["thinkingConfig"]);j!=null&&h(o,["thinkingConfig"],j);const Ee=f(e,["imageConfig"]);if(Ee!=null&&h(o,["imageConfig"],w2(Ee)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const $=f(e,["modelArmorConfig"]);return t!==void 0&&$!=null&&h(t,["modelArmorConfig"],$),o}function wE(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["contents"]);if(r!=null){let c=Kn(r);Array.isArray(c)&&(c=c.map(d=>wf(d))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],jD(n,l,t)),t}function xE(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["contents"]);if(r!=null){let c=Kn(r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],e2(n,l,t)),t}function bE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>SD(m))),h(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function NE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(_=>_)),h(e,["candidates"],m)}const r=f(n,["createTime"]);r!=null&&h(e,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&h(e,["responseId"],d);const y=f(n,["usageMetadata"]);return y!=null&&h(e,["usageMetadata"],y),e}function t2(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const y=f(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&h(e,["parameters","includeSafetyAttributes"],y);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const _=f(n,["language"]);e!==void 0&&_!=null&&h(e,["parameters","language"],_);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(n,["imageSize"]);if(e!==void 0&&I!=null&&h(e,["parameters","sampleImageSize"],I),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function n2(n,e){const t={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const y=f(n,["seed"]);e!==void 0&&y!=null&&h(e,["parameters","seed"],y);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&h(e,["parameters","language"],I);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const G=f(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&h(e,["parameters","outputOptions","compressionQuality"],G);const O=f(n,["addWatermark"]);e!==void 0&&O!=null&&h(e,["parameters","addWatermark"],O);const K=f(n,["labels"]);e!==void 0&&K!=null&&h(e,["labels"],K);const ie=f(n,["imageSize"]);e!==void 0&&ie!=null&&h(e,["parameters","sampleImageSize"],ie);const Z=f(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&h(e,["parameters","enhancePrompt"],Z),t}function i2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&t2(l,t),t}function o2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&n2(l,t),t}function s2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>y2(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],ZS(r)),e}function r2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>xf(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],jS(r)),e}function a2(n,e){const t={},o=f(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);e!==void 0&&y!=null&&h(e,["parameters","negativePrompt"],y);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&h(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(n,["lastFrame"]);e!==void 0&&_!=null&&h(e,["instances[0]","lastFrame"],bf(_));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(I=>uV(I))),h(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function l2(n,e){const t={},o=f(n,["numberOfVideos"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const y=f(n,["aspectRatio"]);e!==void 0&&y!=null&&h(e,["parameters","aspectRatio"],y);const m=f(n,["resolution"]);e!==void 0&&m!=null&&h(e,["parameters","resolution"],m);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&h(e,["parameters","pubsubTopic"],E);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","negativePrompt"],S);const I=f(n,["enhancePrompt"]);e!==void 0&&I!=null&&h(e,["parameters","enhancePrompt"],I);const L=f(n,["generateAudio"]);e!==void 0&&L!=null&&h(e,["parameters","generateAudio"],L);const G=f(n,["lastFrame"]);e!==void 0&&G!=null&&h(e,["instances[0]","lastFrame"],mi(G));const O=f(n,["referenceImages"]);if(e!==void 0&&O!=null){let Z=O;Array.isArray(Z)&&(Z=Z.map(re=>cV(re))),h(e,["instances[0]","referenceImages"],Z)}const K=f(n,["mask"]);e!==void 0&&K!=null&&h(e,["instances[0]","mask"],lV(K));const ie=f(n,["compressionQuality"]);return e!==void 0&&ie!=null&&h(e,["parameters","compressionQuality"],ie),t}function u2(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],h2(c)),e}function c2(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],p2(c)),e}function f2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],bf(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],tA(c));const d=f(e,["source"]);d!=null&&m2(d,t);const y=f(e,["config"]);return y!=null&&a2(y,t),t}function d2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],mi(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],nA(c));const d=f(e,["source"]);d!=null&&g2(d,t);const y=f(e,["config"]);return y!=null&&l2(y,t),t}function h2(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>_2(c))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function p2(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>E2(c))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function m2(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],bf(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],tA(l)),t}function g2(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],mi(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],nA(l)),t}function y2(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],x2(t));const o=f(n,["raiFilteredReason"]);o!=null&&h(e,["raiFilteredReason"],o);const r=f(n,["_self"]);return r!=null&&h(e,["safetyAttributes"],ZS(r)),e}function xf(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],WS(t));const o=f(n,["raiFilteredReason"]);o!=null&&h(e,["raiFilteredReason"],o);const r=f(n,["_self"]);r!=null&&h(e,["safetyAttributes"],jS(r));const l=f(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function v2(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["mask"],WS(t));const o=f(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["labels"],r)}return e}function _2(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],rV(t)),e}function E2(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],aV(t)),e}function T2(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const o=f(n,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const y=f(n,["logprobs"]);y!=null&&h(e,["logprobs"],y);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const _=f(n,["mediaResolution"]);_!=null&&h(e,["mediaResolution"],_);const E=f(n,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&h(e,["responseMimeType"],I);const L=f(n,["responseModalities"]);L!=null&&h(e,["responseModalities"],L);const G=f(n,["responseSchema"]);G!=null&&h(e,["responseSchema"],G);const O=f(n,["routingConfig"]);O!=null&&h(e,["routingConfig"],O);const K=f(n,["seed"]);K!=null&&h(e,["seed"],K);const ie=f(n,["speechConfig"]);ie!=null&&h(e,["speechConfig"],ie);const Z=f(n,["stopSequences"]);Z!=null&&h(e,["stopSequences"],Z);const re=f(n,["temperature"]);re!=null&&h(e,["temperature"],re);const ue=f(n,["thinkingConfig"]);ue!=null&&h(e,["thinkingConfig"],ue);const ce=f(n,["topK"]);ce!=null&&h(e,["topK"],ce);const D=f(n,["topP"]);if(D!=null&&h(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function S2(n,e){const t={},o=f(e,["model"]);return o!=null&&h(t,["_url","name"],$e(n,o)),t}function A2(n,e){const t={},o=f(e,["model"]);return o!=null&&h(t,["_url","name"],$e(n,o)),t}function C2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function R2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function I2(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const o=f(n,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function w2(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const o=f(n,["imageSize"]);o!=null&&h(e,["imageSize"],o);const r=f(n,["personGeneration"]);r!=null&&h(e,["personGeneration"],r);const l=f(n,["outputMimeType"]);l!=null&&h(e,["imageOutputOptions","mimeType"],l);const c=f(n,["outputCompressionQuality"]);return c!=null&&h(e,["imageOutputOptions","compressionQuality"],c),e}function x2(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],fs(t));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function WS(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&h(e,["imageBytes"],fs(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function bf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],fs(t));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function mi(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const o=f(n,["imageBytes"]);o!=null&&h(e,["bytesBase64Encoded"],fs(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function b2(n,e,t){const o={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],zS(n,d)),o}function N2(n,e,t){const o={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],zS(n,d)),o}function M2(n,e){const t={},o=f(e,["config"]);return o!=null&&b2(n,o,t),t}function D2(n,e){const t={},o=f(e,["config"]);return o!=null&&N2(n,o,t),t}function V2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["_self"]);if(r!=null){let l=YS(r);Array.isArray(l)&&(l=l.map(c=>Ap(c))),h(e,["models"],l)}return e}function P2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["_self"]);if(r!=null){let l=YS(r);Array.isArray(l)&&(l=l.map(c=>Cp(c))),h(e,["models"],l)}return e}function U2(n){const e={},t=f(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const o=f(n,["segmentationClasses"]);o!=null&&h(e,["maskClasses"],o);const r=f(n,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function Ap(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["version"]);l!=null&&h(e,["version"],l);const c=f(n,["_self"]);c!=null&&h(e,["tunedModelInfo"],W2(c));const d=f(n,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const y=f(n,["outputTokenLimit"]);y!=null&&h(e,["outputTokenLimit"],y);const m=f(n,["supportedGenerationMethods"]);m!=null&&h(e,["supportedActions"],m);const _=f(n,["temperature"]);_!=null&&h(e,["temperature"],_);const E=f(n,["maxTemperature"]);E!=null&&h(e,["maxTemperature"],E);const S=f(n,["topP"]);S!=null&&h(e,["topP"],S);const I=f(n,["topK"]);I!=null&&h(e,["topK"],I);const L=f(n,["thinking"]);return L!=null&&h(e,["thinking"],L),e}function Cp(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["versionId"]);l!=null&&h(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>$D(S))),h(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&h(e,["labels"],d);const y=f(n,["_self"]);y!=null&&h(e,["tunedModelInfo"],Z2(y));const m=f(n,["defaultCheckpointId"]);m!=null&&h(e,["defaultCheckpointId"],m);const _=f(n,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(S=>S)),h(e,["checkpoints"],E)}return e}function L2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],QD(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],XD(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],TD(y));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function k2(n){const e={},t=f(n,["productImage"]);return t!=null&&h(e,["image"],mi(t)),e}function O2(n,e){const t={},o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&h(e,["parameters","baseSteps"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const y=f(n,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&h(e,["parameters","addWatermark"],m);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","mimeType"],_);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","compressionQuality"],E);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S);const I=f(n,["labels"]);return e!==void 0&&I!=null&&h(e,["labels"],I),t}function B2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["source"]);r!=null&&G2(r,t);const l=f(e,["config"]);return l!=null&&O2(l,t),t}function F2(n){const e={},t=f(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>xf(r))),h(e,["generatedImages"],o)}return e}function G2(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const r=f(n,["personImage"]);e!==void 0&&r!=null&&h(e,["instances[0]","personImage","image"],mi(r));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>k2(d))),h(e,["instances[0]","productImages"],c)}return t}function q2(n){const e={},t=f(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],mi(t));const o=f(n,["referenceId"]);o!=null&&h(e,["referenceId"],o);const r=f(n,["referenceType"]);r!=null&&h(e,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],U2(l));const c=f(n,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],xD(c));const d=f(n,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const y=f(n,["subjectImageConfig"]);return y!=null&&h(e,["subjectImageConfig"],y),e}function ZS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const o=f(n,["safetyAttributes","scores"]);o!=null&&h(e,["scores"],o);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function jS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const o=f(n,["safetyAttributes","scores"]);o!=null&&h(e,["scores"],o);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function H2(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function z2(n){const e={},t=f(n,["image"]);return t!=null&&h(e,["image"],mi(t)),e}function Y2(n,e){const t={},o=f(n,["mode"]);e!==void 0&&o!=null&&h(e,["parameters","mode"],o);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&h(e,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const y=f(n,["labels"]);return e!==void 0&&y!=null&&h(e,["labels"],y),t}function J2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["source"]);r!=null&&$2(r,t);const l=f(e,["config"]);return l!=null&&Y2(l,t),t}function K2(n){const e={},t=f(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>v2(r))),h(e,["generatedMasks"],o)}return e}function $2(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],mi(r));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],z2(l)),t}function Q2(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],WD(o)),e}function X2(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const c=f(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],C2(c));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],R2(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&h(e,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function eA(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>ZD(S))),h(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&h(e,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const _=f(n,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function W2(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const o=f(n,["createTime"]);o!=null&&h(e,["createTime"],o);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function Z2(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const o=f(n,["createTime"]);o!=null&&h(e,["createTime"],o);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function j2(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function eV(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function tV(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","name"],$e(n,o));const r=f(e,["config"]);return r!=null&&j2(r,t),t}function nV(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["config"]);return r!=null&&eV(r,t),t}function iV(n,e){const t={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const r=f(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&h(e,["parameters","safetySetting"],r);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=f(n,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const y=f(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","compressionQuality"],y);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],m);const _=f(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const E=f(n,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&h(e,["parameters","sampleCount"],S);const I=f(n,["mode"]);return e!==void 0&&I!=null&&h(e,["parameters","mode"],I),t}function oV(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],$e(n,o));const r=f(e,["image"]);r!=null&&h(t,["instances[0]","image"],mi(r));const l=f(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&iV(c,t),t}function sV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>xf(l))),h(e,["generatedImages"],r)}return e}function rV(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const o=f(n,["encodedVideo"]);o!=null&&h(e,["videoBytes"],fs(o));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function aV(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],fs(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function lV(n){const e={},t=f(n,["image"]);t!=null&&h(e,["_self"],mi(t));const o=f(n,["maskMode"]);return o!=null&&h(e,["maskMode"],o),e}function uV(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],bf(t));const o=f(n,["referenceType"]);return o!=null&&h(e,["referenceType"],o),e}function cV(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],mi(t));const o=f(n,["referenceType"]);return o!=null&&h(e,["referenceType"],o),e}function tA(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const o=f(n,["videoBytes"]);o!=null&&h(e,["encodedVideo"],fs(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["encoding"],r),e}function nA(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const o=f(n,["videoBytes"]);o!=null&&h(e,["bytesBase64Encoded"],fs(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fV(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&h(e,["displayName"],o),t}function dV(n){const e={},t=f(n,["config"]);return t!=null&&fV(t,e),e}function hV(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),t}function pV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&hV(o,e),e}function mV(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function gV(n,e){const t={},o=f(n,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),t}function yV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],_V(c)),e}function vV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const o=f(n,["fileName"]);o!=null&&h(e,["fileName"],o);const r=f(n,["config"]);return r!=null&&gV(r,e),e}function _V(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function EV(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function TV(n){const e={},t=f(n,["config"]);return t!=null&&EV(t,e),e}function SV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function iA(n,e){const t={},o=f(n,["mimeType"]);e!==void 0&&o!=null&&h(e,["mimeType"],o);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(y=>y)),h(e,["customMetadata"],d)}const c=f(n,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),t}function AV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const o=f(n,["config"]);return o!=null&&iA(o,e),e}function CV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RV="Content-Type",IV="X-Server-Timeout",wV="User-Agent",Rp="x-goog-api-client",xV="1.38.0",bV=`google-genai-sdk/${xV}`,NV="v1beta1",MV="v1beta";class DV{constructor(e){var t,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:NV}else{if(!this.clientOptions.apiKey)throw new Fl({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:MV,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===_p.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))r.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o,r){if(t&&t.timeout||r){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&VV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,o),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await ME(r),new Ep(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await ME(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return hi(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const d="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:_}=yield Ie(r.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=l.decode(_,{stream:!0});try{const L=JSON.parse(E);if("error"in L){const G=JSON.parse(JSON.stringify(L.error)),O=G.status,K=G.code,ie=`got status: ${O}. ${JSON.stringify(L)}`;if(K>=400&&K<600)throw new Fl({message:ie,status:K})}}catch(L){if(L.name==="ApiError")throw L}c+=E;let S=-1,I=0;for(;;){S=-1,I=0;for(const O of y){const K=c.indexOf(O);K!==-1&&(S===-1||K<S)&&(S=K,I=O.length)}if(S===-1)break;const L=c.substring(0,S);c=c.substring(S+I);const G=L.trim();if(G.startsWith(d)){const O=G.substring(d.length).trim();try{const K=new Response(O,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ie(new Ep(K))}catch(K){throw new Error(`exception parsing stream chunk ${O}. ${K}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=bV+" "+this.clientOptions.userAgentExtra;return e[wV]=t,e[Rp]=t,e[RV]="application/json",e}async getHeadersInternal(e,t){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(IV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,t),o}getFileName(e){var t;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(t=o.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),o}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const d=(o=t==null?void 0:t.mimeType)!==null&&o!==void 0?o:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const y={file:r},m=this.getFileName(e),_=pe("upload/v1beta/files",y._url),E=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,m,y,t==null?void 0:t.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,o){var r;const l=this.clientOptions.uploader,c=await l.stat(t),d=String(c.size),y=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:c.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),E={};o!=null&&iA(o,E);const S=await this.fetchUploadUrl(m,d,y,_,E,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,o,r,l,c){var d;let y={};c?y=c:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:y});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function ME(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new Fl({message:r,status:t}):new Error(r)}}function VV(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const d=Object.assign({},l);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const m=c[y],_=d[y];m&&typeof m=="object"&&!Array.isArray(m)&&_&&typeof _=="object"&&!Array.isArray(_)?d[y]=o(_,m):(_&&m&&typeof _!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof _}, New type: ${typeof m}. Overwriting.`),d[y]=m)}return d}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PV="mcp_used/unknown";let UV=!1;function oA(n){for(const e of n)if(LV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return UV}function sA(n){var e;const t=(e=n[Rp])!==null&&e!==void 0?e:"";n[Rp]=(t+` ${PV}`).trimStart()}function LV(n){return n!==null&&typeof n=="object"&&n instanceof Tm}function kV(n){return hi(this,arguments,function*(t,o=100){let r,l=0;for(;l<o;){const c=yield Ie(t.listTools({cursor:r}));for(const d of c.tools)yield yield Ie(d),l++;if(!c.nextCursor)break;r=c.nextCursor}})}class Tm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Tm(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const _ of this.mcpClients)try{for(var d=!0,y=(t=void 0,pi(kV(_))),m;m=await y.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const E=r;c.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(E){t={error:E}}finally{try{!d&&!e&&(o=y.return)&&await o.call(y)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),pN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function OV(n,e,t){const o=new rN;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(o,r),e(o)}class BV{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=qV(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const _=new Promise(Z=>{m=Z}),E=e.callbacks,S=function(){m({})},I=this.apiClient,L={onopen:S,onmessage:Z=>{OV(I,E.onmessage,Z)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(Z){}},G=this.webSocketFactory.create(y,GV(c),L);G.connect(),await _;const ie={setup:{model:$e(this.apiClient,e.model)}};return G.send(JSON.stringify(ie)),new FV(G,this.apiClient)}}class FV{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=fD(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=cD(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(zr.PLAY)}pause(){this.sendPlaybackControl(zr.PAUSE)}stop(){this.sendPlaybackControl(zr.STOP)}resetContext(){this.sendPlaybackControl(zr.RESET_CONTEXT)}close(){this.conn.close()}}function GV(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function qV(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function zV(n,e,t){const o=new sN;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const c=pD(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class YV{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new BV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&oA(e.config.tools)&&sA(E);const S=QV(E);if(this.apiClient.isVertexAI()){const b=this.apiClient.getProject(),P=this.apiClient.getLocation(),V=this.apiClient.getApiKey(),k=!!b&&!!P||!!V;this.apiClient.getCustomBaseUrl()&&!k?_=y:(_=`${y}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_))}else{const b=this.apiClient.getApiKey();let P="BidiGenerateContent",V="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",V="access_token"),_=`${y}/ws/google.ai.generativelanguage.${m}.GenerativeService.${P}?${V}=${b}`}let I=()=>{};const L=new Promise(b=>{I=b}),G=e.callbacks,O=function(){var b;(b=G==null?void 0:G.onopen)===null||b===void 0||b.call(G),I({})},K=this.apiClient,ie={onopen:O,onmessage:b=>{zV(K,G.onmessage,b)},onerror:(t=G==null?void 0:G.onerror)!==null&&t!==void 0?t:function(b){},onclose:(o=G==null?void 0:G.onclose)!==null&&o!==void 0?o:function(b){}},Z=this.webSocketFactory.create(_,$V(S),ie);Z.connect(),await L;let re=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const b=this.apiClient.getProject(),P=this.apiClient.getLocation();b&&P&&(re=`projects/${b}/locations/${P}/`+re)}let ue={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[nf.AUDIO]}:e.config.responseModalities=[nf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ce=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],D=[];for(const b of ce)if(this.isCallableTool(b)){const P=b;D.push(await P.tool())}else D.push(b);D.length>0&&(e.config.tools=D);const N={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ue=uD(this.apiClient,N):ue=lD(this.apiClient,N),delete ue.config,Z.send(JSON.stringify(ue)),new KV(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const JV={turnComplete:!0};class KV{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=Kn(t.turns),e.isVertexAI()||(o=o.map(r=>wf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(HV)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},JV),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:hD(e)}:t={realtimeInput:dD(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function $V(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function QV(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DE=10;function VE(n){var e,t,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Wr(c)){r=!0;break}if(!r)return!0;const l=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Wr(n){return"callTool"in n&&typeof n.callTool=="function"}function XV(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Wr(r)))!==null&&o!==void 0?o:!1}function PE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,r)=>{if(Wr(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function UE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WV extends mo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,c,d;const y=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!XV(t)||VE(t.config))return await this.generateContentInternal(y);const m=PE(t);if(m.length>0){const G=m.map(O=>`tools[${O}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${G}.`)}let _,E;const S=Kn(y.contents),I=(l=(r=(o=y.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:DE;let L=0;for(;L<I&&(_=await this.generateContentInternal(y),!(!_.functionCalls||_.functionCalls.length===0));){const G=_.candidates[0].content,O=[];for(const K of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Wr(K)){const Z=await K.callTool(_.functionCalls);O.push(...Z)}L++,E={role:"user",parts:O},y.contents=Kn(y.contents),y.contents.push(G),y.contents.push(E),UE(y.config)&&(S.push(G),S.push(E))}return UE(y.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async t=>{var o,r,l,c,d;if(this.maybeMoveToResponseJsonSchem(t),VE(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const y=PE(t);if(y.length>0){const E=y.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(r=(o=t==null?void 0:t.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(d=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const c=[];if(o!=null&&o.generatedImages)for(const y of o.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=y==null?void 0:y.safetyAttributes:c.push(y);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async t=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Ws(po.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var o,r,l,c,d,y;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=t.video)===null||o===void 0)&&o.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((y=(d=t.source)===null||d===void 0?void 0:d.video)===null||y===void 0)&&y.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async y=>Wr(y)?await y.tool():y)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&oA(e.config.tools)){const y=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},y);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),sA(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const c of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(Wr(c)){const d=c,y=await d.tool();for(const m of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:DE;let c=!1,d=0;const y=await this.initAfcToolsMap(e);return(function(m,_,E){return hi(this,arguments,function*(){for(var S,I,L,G,O,K;d<l;){c&&(d++,c=!1);const ue=yield Ie(m.processParamsMaybeAddMcpUsage(E)),ce=yield Ie(m.generateContentStreamInternal(ue)),D=[],N=[];try{for(var ie=!0,Z=(I=void 0,pi(ce)),re;re=yield Ie(Z.next()),S=re.done,!S;ie=!0){G=re.value,ie=!1;const b=G;if(yield yield Ie(b),b.candidates&&(!((O=b.candidates[0])===null||O===void 0)&&O.content)){N.push(b.candidates[0].content);for(const P of(K=b.candidates[0].content.parts)!==null&&K!==void 0?K:[])if(d<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(P.functionCall.name)){const V=yield Ie(_.get(P.functionCall.name).callTool([P.functionCall]));D.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(b){I={error:b}}finally{try{!ie&&!S&&(L=Z.return)&&(yield Ie(L.call(Z)))}finally{if(I)throw I.error}}if(D.length>0){c=!0;const b=new _l;b.candidates=[{content:{role:"user",parts:D}}],yield yield Ie(b);const P=[];P.push(...N),P.push({role:"user",parts:D});const V=Kn(E.contents).concat(P);E.contents=V}else break}})})(this,y,e)}async generateContentInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=xE(this.apiClient,e);return d=pe("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=NE(_),S=new _l;return Object.assign(S,E),S})}else{const m=wE(this.apiClient,e);return d=pe("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=bE(_),S=new _l;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=xE(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(E){return hi(this,arguments,function*(){var S,I,L,G;try{for(var O=!0,K=pi(E),ie;ie=yield Ie(K.next()),S=ie.done,!S;O=!0){G=ie.value,O=!1;const Z=G,re=NE(yield Ie(Z.json()));re.sdkHttpResponse={headers:Z.headers};const ue=new _l;Object.assign(ue,re),yield yield Ie(ue)}}catch(Z){I={error:Z}}finally{try{!O&&!S&&(L=K.return)&&(yield Ie(L.call(K)))}finally{if(I)throw I.error}}})})}else{const m=wE(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return hi(this,arguments,function*(){var S,I,L,G;try{for(var O=!0,K=pi(E),ie;ie=yield Ie(K.next()),S=ie.done,!S;O=!0){G=ie.value,O=!1;const Z=G,re=bE(yield Ie(Z.json()));re.sdkHttpResponse={headers:Z.headers};const ue=new _l;Object.assign(ue,re),yield yield Ie(ue)}}catch(Z){I={error:Z}}finally{try{!O&&!S&&(L=K.return)&&(yield Ie(L.call(K)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=YD(this.apiClient,e);return d=pe("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=KD(_),S=new cE;return Object.assign(S,E),S})}else{const m=zD(this.apiClient,e);return d=pe("{model}:batchEmbedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=JD(_),S=new cE;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=o2(this.apiClient,e);return d=pe("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=r2(_),S=new fE;return Object.assign(S,E),S})}else{const m=i2(this.apiClient,e);return d=pe("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=s2(_),S=new fE;return Object.assign(S,E),S})}}async editImageInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=FD(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:y.headers},_})),r.then(y=>{const m=GD(y),_=new $1;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=oV(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:y.headers},_})),r.then(y=>{const m=sV(y),_=new Q1;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=B2(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=F2(y),_=new X1;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=J2(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=K2(y),_=new W1;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=A2(this.apiClient,e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>Cp(_))}else{const m=S2(this.apiClient,e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Ap(_))}}async listInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=D2(this.apiClient,e);return d=pe("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=P2(_),S=new dE;return Object.assign(S,E),S})}else{const m=M2(this.apiClient,e);return d=pe("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=V2(_),S=new dE;return Object.assign(S,E),S})}}async update(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=nV(this.apiClient,e);return d=pe("{model}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>Cp(_))}else{const m=tV(this.apiClient,e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Ap(_))}}async delete(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=LD(this.apiClient,e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=OD(_),S=new hE;return Object.assign(S,E),S})}else{const m=UD(this.apiClient,e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=kD(_),S=new hE;return Object.assign(S,E),S})}}async countTokens(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=DD(this.apiClient,e);return d=pe("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=PD(_),S=new pE;return Object.assign(S,E),S})}else{const m=MD(this.apiClient,e);return d=pe("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=VD(_),S=new pE;return Object.assign(S,E),S})}}async computeTokens(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=CD(this.apiClient,e);return l=pe("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:y.headers},_})),r.then(y=>{const m=RD(y),_=new Z1;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=d2(this.apiClient,e);return d=pe("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>{const E=c2(_),S=new of;return Object.assign(S,E),S})}else{const m=f2(this.apiClient,e);return d=pe("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>{const E=u2(_),S=new of;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZV extends mo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=q1(e);return d=pe("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c}else{const m=G1(e);return d=pe("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=P1(e);return l=pe("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jV(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function eP(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>uP(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function tP(n,e,t){const o={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&h(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],lP(n,d));const y=f(e,["lockAdditionalFields"]);return t!==void 0&&y!=null&&h(t,["fieldMask"],y),o}function nP(n,e){const t={},o=f(e,["config"]);return o!=null&&h(t,["config"],tP(n,o,t)),t}function iP(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function oP(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function rP(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function aP(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Em(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],eP(rn(L)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let ce=ca(G);Array.isArray(ce)&&(ce=ce.map(D=>fP(ua(D)))),h(e,["setup","tools"],ce)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],cP(O));const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&h(e,["setup","inputAudioTranscription"],K);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&h(e,["setup","outputAudioTranscription"],ie);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const ue=f(n,["proactivity"]);if(e!==void 0&&ue!=null&&h(e,["setup","proactivity"],ue),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function lP(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],$e(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],aP(r,t)),t}function uP(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],iP(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],oP(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],jV(y));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function cP(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fP(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const c=f(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],sP(c));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],rP(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&h(e,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dP(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function hP(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=dP(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(m=>c.includes(m)?`generationConfig.${m}`:m));const y=[];l&&y.push(l),d.length>0&&y.push(...d),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class pP extends mo{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=nP(this.apiClient,e);l=pe("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const y=hP(d,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mP(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),t}function gP(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&mP(o,e),e}function yP(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function vP(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function _P(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const o=f(n,["config"]);return o!=null&&vP(o,e),e}function EP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TP extends mo{constructor(e){super(),this.apiClient=e,this.list=async t=>new Ws(po.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:t.parent,config:o.config}),await this.listInternal(t),t)}async get(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=yP(e);return l=pe("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=gP(e);r=pe("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_P(e);return l=pe("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=EP(y),_=new j1;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SP extends mo{constructor(e,t=new TP(e)){super(),this.apiClient=e,this.documents=t,this.list=async(o={})=>new Ws(po.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=dV(e);return l=pe("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mV(e);return l=pe("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=pV(e);r=pe("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=TV(e);return l=pe("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=SV(y),_=new eN;return Object.assign(_,m),_})}}async uploadToFileSearchStoreInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=AV(e);return l=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=CV(y),_=new tN;return Object.assign(_,m),_})}}async importFile(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=vV(e);return l=pe("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=yV(y),_=new mm;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let rA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return rA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^t()&15>>+o/4).toString(16))};const AP=()=>rA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ip(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const wp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $n extends Error{}class fn extends $n{constructor(e,t,o,r){super(`${fn.makeMessage(e,t,o)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,o){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,o,r){if(!e||!r)return new Nf({message:o,cause:wp(t)});const l=t;return e===400?new lA(e,l,o,r):e===401?new uA(e,l,o,r):e===403?new cA(e,l,o,r):e===404?new fA(e,l,o,r):e===409?new dA(e,l,o,r):e===422?new hA(e,l,o,r):e===429?new pA(e,l,o,r):e>=500?new mA(e,l,o,r):new fn(e,l,o,r)}}class xp extends fn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Nf extends fn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class aA extends Nf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class lA extends fn{}class uA extends fn{}class cA extends fn{}class fA extends fn{}class dA extends fn{}class hA extends fn{}class pA extends fn{}class mA extends fn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CP=/^[a-z][a-z0-9+.-]*:/i,RP=n=>CP.test(n);let bp=n=>(bp=Array.isArray,bp(n));const IP=bp;let wP=IP;const LE=wP;function xP(n){if(!n)return!0;for(const e in n)return!1;return!0}function bP(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const NP=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new $n(`${n} must be an integer`);if(e<0)throw new $n(`${n} must be a positive integer`);return e},MP=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DP=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const PP=()=>{var n,e,t,o,r;const l=VP();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hr,"X-Stainless-OS":OE(Deno.build.os),"X-Stainless-Arch":kE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hr,"X-Stainless-OS":OE((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":kE((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=UP();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function UP(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const o=t.exec(navigator.userAgent);if(o){const r=o[1]||0,l=o[2]||0,c=o[3]||0;return{browser:e,version:`${r}.${l}.${c}`}}}return null}const kE=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",OE=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let wc;const LP=()=>wc??(wc=PP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function gA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function OP(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return gA({start(){},async pull(t){const{done:o,value:r}=await e.next();o?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function yA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function BP(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const o=n.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FP=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Kh(n,e,t){return vA(),new File(n,e??"unknown_file",t)}function GP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const qP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _A=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",HP=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&_A(n),zP=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function YP(n,e,t){if(vA(),n=await n,HP(n))return n instanceof File?n:Kh([await n.arrayBuffer()],n.name);if(zP(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Kh(await Np(r),e,t)}const o=await Np(n);if(e||(e=GP(n)),!(t!=null&&t.type)){const r=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Kh(o,e,t)}async function Np(n){var e,t,o,r,l;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(_A(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(qP(n))try{for(var d=!0,y=pi(n),m;m=await y.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const _=r;c.push(...await Np(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(o=y.return)&&await o.call(y)}finally{if(t)throw t.error}}else{const _=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${JP(n)}`)}return c}function JP(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EA{constructor(e){this._client=e}}EA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const BE=Object.freeze(Object.create(null)),KP=(n=TA)=>(function(t,...o){if(t.length===1)return t[0];let r=!1;const l=[],c=t.reduce((_,E,S)=>{var I,L,G;/[?#]/.test(E)&&(r=!0);const O=o[S];let K=(r?encodeURIComponent:n)(""+O);return S!==o.length&&(O==null||typeof O=="object"&&O.toString===((G=Object.getPrototypeOf((L=Object.getPrototypeOf((I=O.hasOwnProperty)!==null&&I!==void 0?I:BE))!==null&&L!==void 0?L:BE))===null||G===void 0?void 0:G.toString))&&(K=O+"",l.push({start:_.length+E.length,length:K.length,error:`Value of type ${Object.prototype.toString.call(O).slice(8,-1)} is not a valid path parameter`})),_+E+(S===o.length?"":K)},""),d=c.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(d))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((_,E)=>_.start-E.start),l.length>0){let _=0;const E=l.reduce((S,I)=>{const L=" ".repeat(I.start-_),G="^".repeat(I.length);return _=I.start+I.length,S+L+G},"");throw new $n(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${E}`)}return c}),xc=KP(TA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SA extends EA{create(e,t){var o;const{api_version:r=this._client.apiVersion}=e,l=rf(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new $n("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new $n("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(xc`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(xc`/${r}/interactions/${e}`,o)}cancel(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(xc`/${r}/interactions/${e}/cancel`,o)}get(e,t={},o){var r;const l=t??{},{api_version:c=this._client.apiVersion}=l,d=rf(l,["api_version"]);return this._client.get(xc`/${c}/interactions/${e}`,Object.assign(Object.assign({query:d},o),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}SA._key=Object.freeze(["interactions"]);class AA extends SA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $P(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let o=0;for(const r of n)t.set(r,o),o+=r.length;return t}let bc;function Sm(n){let e;return(bc??(e=new globalThis.TextEncoder,bc=e.encode.bind(e)))(n)}let Nc;function FE(n){let e;return(Nc??(e=new globalThis.TextDecoder,Nc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Sm(e):e;this.buffer=$P([this.buffer,t]);const o=[];let r;for(;(r=QP(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(FE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=FE(this.buffer.subarray(0,l));o.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Mf.NEWLINE_CHARS=new Set([`
`,"\r"]);Mf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function QP(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function XP(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const af={off:0,error:200,warn:300,info:400,debug:500},GE=(n,e,t)=>{if(n){if(bP(af,n))return n;cn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(af))}`)}};function Rl(){}function Mc(n,e,t){return!e||af[n]>af[t]?Rl:e[n].bind(e)}const WP={error:Rl,warn:Rl,info:Rl,debug:Rl};let qE=new WeakMap;function cn(n){var e;const t=n.logger,o=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return WP;const r=qE.get(t);if(r&&r[0]===o)return r[1];const l={error:Mc("error",t,o),warn:Mc("warn",t,o),info:Mc("info",t,o),debug:Mc("debug",t,o)};return qE.set(t,[o,l]),l}const qs=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yr{constructor(e,t,o){this.iterator=e,this.controller=t,this.client=o}static fromSSEResponse(e,t,o){let r=!1;const l=o?cn(o):console;function c(){return hi(this,arguments,function*(){var y,m,_,E;if(r)throw new $n("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var I=!0,L=pi(ZP(e,t)),G;G=yield Ie(L.next()),y=G.done,!y;I=!0){E=G.value,I=!1;const O=E;if(!S)if(O.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ie(JSON.parse(O.data))}catch(K){throw l.error("Could not parse message into JSON:",O.data),l.error("From chunk:",O.raw),K}}}catch(O){m={error:O}}finally{try{!I&&!y&&(_=L.return)&&(yield Ie(_.call(L)))}finally{if(m)throw m.error}}S=!0}catch(O){if(Ip(O))return yield Ie(void 0);throw O}finally{S||t.abort()}})}return new Yr(c,t,o)}static fromReadableStream(e,t,o){let r=!1;function l(){return hi(this,arguments,function*(){var y,m,_,E;const S=new Mf,I=yA(e);try{for(var L=!0,G=pi(I),O;O=yield Ie(G.next()),y=O.done,!y;L=!0){E=O.value,L=!1;const K=E;for(const ie of S.decode(K))yield yield Ie(ie)}}catch(K){m={error:K}}finally{try{!L&&!y&&(_=G.return)&&(yield Ie(_.call(G)))}finally{if(m)throw m.error}}for(const K of S.flush())yield yield Ie(K)})}function c(){return hi(this,arguments,function*(){var y,m,_,E;if(r)throw new $n("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var I=!0,L=pi(l()),G;G=yield Ie(L.next()),y=G.done,!y;I=!0){E=G.value,I=!1;const O=E;S||O&&(yield yield Ie(JSON.parse(O)))}}catch(O){m={error:O}}finally{try{!I&&!y&&(_=L.return)&&(yield Ie(_.call(L)))}finally{if(m)throw m.error}}S=!0}catch(O){if(Ip(O))return yield Ie(void 0);throw O}finally{S||t.abort()}})}return new Yr(c,t,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],o=this.iterator(),r=l=>({next:()=>{if(l.length===0){const c=o.next();e.push(c),t.push(c)}return l.shift()}});return[new Yr(()=>r(e),this.controller,this.client),new Yr(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return gA({async start(){t=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:l}=await t.next();if(l)return o.close();const c=Sm(JSON.stringify(r)+`
`);o.enqueue(c)}catch(r){o.error(r)}},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}}function ZP(n,e){return hi(this,arguments,function*(){var o,r,l,c;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new $n("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new $n("Attempted to iterate over a response with no body");const d=new e4,y=new Mf,m=yA(n.body);try{for(var _=!0,E=pi(jP(m)),S;S=yield Ie(E.next()),o=S.done,!o;_=!0){c=S.value,_=!1;const I=c;for(const L of y.decode(I)){const G=d.decode(L);G&&(yield yield Ie(G))}}}catch(I){r={error:I}}finally{try{!_&&!o&&(l=E.return)&&(yield Ie(l.call(E)))}finally{if(r)throw r.error}}for(const I of y.flush()){const L=d.decode(I);L&&(yield yield Ie(L))}})}function jP(n){return hi(this,arguments,function*(){var t,o,r,l;let c=new Uint8Array;try{for(var d=!0,y=pi(n),m;m=yield Ie(y.next()),t=m.done,!t;d=!0){l=m.value,d=!1;const _=l;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?Sm(_):_;let S=new Uint8Array(c.length+E.length);S.set(c),S.set(E,c.length),c=S;let I;for(;(I=XP(c))!==-1;)yield yield Ie(c.slice(0,I)),c=c.slice(I)}}catch(_){o={error:_}}finally{try{!d&&!t&&(r=y.return)&&(yield Ie(r.call(y)))}finally{if(o)throw o.error}}c.length>0&&(yield yield Ie(c))})}class e4{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,o,r]=t4(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function t4(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function n4(n,e){const{response:t,requestLogID:o,retryOfRequestLogID:r,startTime:l}=e,c=await(async()=>{var d;if(e.options.stream)return cn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Yr.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const y=t.headers.get("content-type"),m=(d=y==null?void 0:y.split(";")[0])===null||d===void 0?void 0:d.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await t.json():await t.text()})();return cn(n).debug(`[${o}] response parsed`,qs({retryOfRequestLogID:r,url:t.url,status:t.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Am extends Promise{constructor(e,t,o=n4){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Am(this.client,this.responsePromise,async(t,o)=>e(await this.parseResponse(t,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CA=Symbol("brand.privateNullableHeaders");function*i4(n){if(!n)return;if(CA in n){const{values:o,nulls:r}=n;yield*o.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():LE(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let o of t){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=LE(o[1])?o[1]:[o[1]];let c=!1;for(const d of l)d!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,d])}}const El=n=>{const e=new Headers,t=new Set;for(const o of n){const r=new Set;for(const[l,c]of i4(o)){const d=l.toLowerCase();r.has(d)||(e.delete(l),r.add(d)),c===null?(e.delete(l),t.add(d)):(e.append(l,c),t.delete(d))}}return{[CA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $h=n=>{var e,t,o,r,l,c;if(typeof globalThis.process<"u")return(o=(t=(e=x1)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var RA;class Df{constructor(e){var t,o,r,l,c,d,y,{baseURL:m=$h("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=$h("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,S=rf(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:_,apiVersion:E},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(o=I.timeout)!==null&&o!==void 0?o:Df.DEFAULT_TIMEOUT,this.logger=(r=I.logger)!==null&&r!==void 0?r:console;const L="warn";this.logLevel=L,this.logLevel=(c=(l=GE(I.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:GE($h("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:L,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(y=I.fetch)!==null&&y!==void 0?y:kP(),this.encoder=FP,this._options=I,this.apiKey=_,this.apiVersion=E,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=El([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return El([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return El([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,o])=>typeof o<"u").map(([t,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(t)}=`;throw new $n(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Hr}`}defaultIdempotencyKey(){return`stainless-node-retry-${AP()}`}makeStatusError(e,t,o,r){return fn.generate(e,t,o,r)}buildURL(e,t,o){const r=!this.baseURLOverridden()&&o||this.baseURL,l=RP(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return xP(c)||(t=Object.assign(Object.assign({},c),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:o}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Am(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,o){var r,l,c;const d=await e,y=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=y),await this.prepareOptions(d);const{req:m,url:_,timeout:E}=await this.buildRequest(d,{retryCount:y-t});await this.prepareRequest(m,{url:_,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=o===void 0?"":`, retryOf: ${o}`,L=Date.now();if(cn(this).debug(`[${S}] sending request`,qs({retryOfRequestLogID:o,method:d.method,url:_,options:d,headers:m.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new xp;const G=new AbortController,O=await this.fetchWithTimeout(_,m,E,G).catch(wp),K=Date.now();if(O instanceof globalThis.Error){const Z=`retrying, ${t} attempts remaining`;if(!((c=d.signal)===null||c===void 0)&&c.aborted)throw new xp;const re=Ip(O)||/timed? ?out/i.test(String(O)+("cause"in O?String(O.cause):""));if(t)return cn(this).info(`[${S}] connection ${re?"timed out":"failed"} - ${Z}`),cn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (${Z})`,qs({retryOfRequestLogID:o,url:_,durationMs:K-L,message:O.message})),this.retryRequest(d,t,o??S);throw cn(this).info(`[${S}] connection ${re?"timed out":"failed"} - error; no more retries left`),cn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (error; no more retries left)`,qs({retryOfRequestLogID:o,url:_,durationMs:K-L,message:O.message})),re?new aA:new Nf({cause:O})}const ie=`[${S}${I}] ${m.method} ${_} ${O.ok?"succeeded":"failed"} with status ${O.status} in ${K-L}ms`;if(!O.ok){const Z=await this.shouldRetry(O);if(t&&Z){const b=`retrying, ${t} attempts remaining`;return await BP(O.body),cn(this).info(`${ie} - ${b}`),cn(this).debug(`[${S}] response error (${b})`,qs({retryOfRequestLogID:o,url:O.url,status:O.status,headers:O.headers,durationMs:K-L})),this.retryRequest(d,t,o??S,O.headers)}const re=Z?"error; no more retries left":"error; not retryable";cn(this).info(`${ie} - ${re}`);const ue=await O.text().catch(b=>wp(b).message),ce=MP(ue),D=ce?void 0:ue;throw cn(this).debug(`[${S}] response error (${re})`,qs({retryOfRequestLogID:o,url:O.url,status:O.status,headers:O.headers,message:D,durationMs:Date.now()-L})),this.makeStatusError(O.status,ce,D,O.headers)}return cn(this).info(ie),cn(this).debug(`[${S}] response start`,qs({retryOfRequestLogID:o,url:O.url,status:O.status,headers:O.headers,durationMs:K-L})),{response:O,options:d,controller:G,requestLogID:S,retryOfRequestLogID:o,startTime:L}}async fetchWithTimeout(e,t,o,r){const l=t||{},{signal:c,method:d}=l,y=rf(l,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),o),_=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),y);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(m)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,o,r){var l;let c;const d=r==null?void 0:r.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(c=m)}const y=r==null?void 0:r.get("retry-after");if(y&&!c){const m=parseFloat(y);Number.isNaN(m)?c=Date.parse(y)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(t,m)}return await DP(c),this.makeRequest(e,t-1,o)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,c=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var o,r,l;const c=Object.assign({},e),{method:d,path:y,query:m,defaultBaseURL:_}=c,E=this.buildURL(y,m,_);"timeout"in c&&NP("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:I}=this.buildBody({options:c}),L=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:L},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:c.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:o,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let d=El([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),LP()),this._options.defaultHeaders,o,e.headers,c]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=El([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:OP(e)}:this.encoder({body:e,headers:o})}}Df.DEFAULT_TIMEOUT=6e4;class Yt extends Df{constructor(){super(...arguments),this.interactions=new AA(this)}}RA=Yt;Yt.GeminiNextGenAPIClient=RA;Yt.GeminiNextGenAPIClientError=$n;Yt.APIError=fn;Yt.APIConnectionError=Nf;Yt.APIConnectionTimeoutError=aA;Yt.APIUserAbortError=xp;Yt.NotFoundError=fA;Yt.ConflictError=dA;Yt.RateLimitError=pA;Yt.BadRequestError=lA;Yt.AuthenticationError=uA;Yt.InternalServerError=mA;Yt.PermissionDeniedError=cA;Yt.UnprocessableEntityError=hA;Yt.toFile=YP;Yt.Interactions=AA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o4(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function s4(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function r4(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function a4(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function l4(n,e,t){const o={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(n,["learningRateMultiplier"]);if(c!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const y=f(n,["learningRate"]);if(e!==void 0&&y!=null&&h(e,["tuningTask","hyperparameters","learningRate"],y),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function u4(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec"],HE(I))}else if(r==="PREFERENCE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec"],HE(I))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=f(n,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let y=f(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(y==="PREFERENCE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(m==="PREFERENCE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(_==="PREFERENCE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const S=f(n,["beta"]);return e!==void 0&&S!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),o}function c4(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&T4(l);const c=f(n,["config"]);return c!=null&&l4(c,t),t}function f4(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&S4(l,t,e);const c=f(n,["config"]);return c!=null&&u4(c,t,e),t}function d4(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function h4(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function p4(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),o}function m4(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),o}function g4(n,e){const t={},o=f(n,["config"]);return o!=null&&p4(o,t),t}function y4(n,e){const t={},o=f(n,["config"]);return o!=null&&m4(o,t),t}function v4(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>IA(d))),h(t,["tuningJobs"],c)}return t}function _4(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Mp(d))),h(t,["tuningJobs"],c)}return t}function E4(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["model"],o);const r=f(n,["name"]);return r!=null&&h(t,["endpoint"],r),t}function T4(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(n,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["examples","examples"],r)}return t}function S4(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function IA(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],qS(l));const c=f(n,["createTime"]);c!=null&&h(t,["createTime"],c);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const y=f(n,["tuningTask","completeTime"]);y!=null&&h(t,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const _=f(n,["description"]);_!=null&&h(t,["description"],_);const E=f(n,["baseModel"]);E!=null&&h(t,["baseModel"],E);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],E4(S)),t}function Mp(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],qS(l));const c=f(n,["createTime"]);c!=null&&h(t,["createTime"],c);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const y=f(n,["endTime"]);y!=null&&h(t,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const _=f(n,["error"]);_!=null&&h(t,["error"],_);const E=f(n,["description"]);E!=null&&h(t,["description"],E);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const I=f(n,["tunedModel"]);I!=null&&h(t,["tunedModel"],I);const L=f(n,["preTunedModel"]);L!=null&&h(t,["preTunedModel"],L);const G=f(n,["supervisedTuningSpec"]);G!=null&&h(t,["supervisedTuningSpec"],G);const O=f(n,["preferenceOptimizationSpec"]);O!=null&&h(t,["preferenceOptimizationSpec"],O);const K=f(n,["tuningDataStats"]);K!=null&&h(t,["tuningDataStats"],K);const ie=f(n,["encryptionSpec"]);ie!=null&&h(t,["encryptionSpec"],ie);const Z=f(n,["partnerModelTuningSpec"]);Z!=null&&h(t,["partnerModelTuningSpec"],Z);const re=f(n,["customBaseModel"]);re!=null&&h(t,["customBaseModel"],re);const ue=f(n,["experiment"]);ue!=null&&h(t,["experiment"],ue);const ce=f(n,["labels"]);ce!=null&&h(t,["labels"],ce);const D=f(n,["outputUri"]);D!=null&&h(t,["outputUri"],D);const N=f(n,["pipelineJob"]);N!=null&&h(t,["pipelineJob"],N);const b=f(n,["serviceAccount"]);b!=null&&h(t,["serviceAccount"],b);const P=f(n,["tunedModelDisplayName"]);P!=null&&h(t,["tunedModelDisplayName"],P);const V=f(n,["veoTuningSpec"]);return V!=null&&h(t,["veoTuningSpec"],V),t}function A4(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const c=f(n,["done"]);c!=null&&h(t,["done"],c);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function HE(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["validationDatasetUri"],o);const r=f(n,["vertexDatasetResource"]);return r!=null&&h(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C4 extends mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ws(po.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:vp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=h4(e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>Mp(_))}else{const m=d4(e);return d=pe("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>IA(_))}}async listInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=y4(e);return d=pe("tuningJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=_4(_),S=new mE;return Object.assign(S,E),S})}else{const m=g4(e);return d=pe("tunedModels",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=v4(_),S=new mE;return Object.assign(S,E),S})}}async cancel(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=s4(e);return d=pe("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=a4(_),S=new gE;return Object.assign(S,E),S})}else{const m=o4(e);return d=pe("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const E=r4(_),S=new gE;return Object.assign(S,E),S})}}async tuneInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=f4(e,e);return l=pe("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:y.headers},_})),r.then(y=>Mp(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=c4(e);return l=pe("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:y.headers},_})),r.then(y=>A4(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R4{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const I4=1024*1024*8,w4=3,x4=1e3,b4=2,lf="x-goog-upload-status";async function N4(n,e,t){var o;const r=await wA(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[lf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function M4(n,e,t){var o;const r=await wA(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[lf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=LS(l),d=new gm;return Object.assign(d,c),d}async function wA(n,e,t){var o,r;let l=0,c=0,d=new Ep(new Response),y="upload";for(l=n.size;c<l;){const m=Math.min(I4,l-c),_=n.slice(c,c+m);c+m>=l&&(y+=", finalize");let E=0,S=x4;for(;E<w4&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[lf]));)E++,await V4(S),S=S*b4;if(c+=m,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[lf])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function D4(n){return{size:n.size,type:n.type}}function V4(n){return new Promise(e=>setTimeout(e,n))}class P4{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await N4(e,t,o)}async uploadToFileSearchStore(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await M4(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await D4(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U4{create(e,t,o){return new L4(e,t,o)}}class L4{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zE="x-goog-api-key";class k4{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(zE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(zE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O4="gl-node/";class xA{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Yt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=D1(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new k4(this.apiKey);this.apiClient=new DV({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:O4+"web",uploader:new P4,downloader:new R4}),this.models=new WV(this.apiClient),this.live=new YV(this.apiClient,r,new U4),this.batches=new aM(this.apiClient),this.chats=new qM(this.models,this.apiClient),this.caches=new BM(this.apiClient),this.files=new ZM(this.apiClient),this.operations=new ZV(this.apiClient),this.authTokens=new pP(this.apiClient),this.tunings=new C4(this.apiClient),this.fileSearchStores=new SP(this.apiClient)}}const B4=n=>{let e=n.trim();const t=e.indexOf("{"),o=e.lastIndexOf("}");return t!==-1&&o!==-1&&(e=e.substring(t,o+1)),e=e.replace(/^```json/i,"").replace(/```$/,"").trim(),e},F4=async(n,e,t,o)=>{const r=new xA({apiKey:"AIzaSyB5_wL5H0EtB4qzmqSidnPxFzxUbeKA39o"}),d=!(n&&n.length>0)&&t&&t.length>0?`Eres el "Auditor Especialista T-MEC", un experto en el Anexo 5-A de las Reglas del T-MEC. Tu misin es auditar el Certificado de Origen y generar un reporte JSON que sea claro y no contradictorio.

REGLAS DE REPORTE OBLIGATORIAS E INQUEBRANTABLES:

1.  **Anlisis de Campos:** Valida cada elemento del certificado y crea un objeto para cada uno en el arreglo 'validations'.

2.  **Lgica Binaria para 'status' y 'error':** Esta es tu regla ms importante. Debes seguirla sin excepciones.
    *   **CASO 1: El campo evaluado es CORRECTO.**
        *   El \`status\` DEBE ser "correct".
        *   El campo \`error\` DEBE contener el texto: "Campo validado conforme a las reglas.".
    *   **CASO 2: El campo evaluado tiene un ERROR.**
        *   El \`status\` DEBE ser "error".
        *   El campo \`error\` DEBE contener una descripcin CLARA y PRECISA del error encontrado. (Ejemplo: "Discrepancia de fechas: la fecha del documento (01/01/2026) no coincide con la de la firma digital (2026.02.04).").

3.  **PROHIBICIN ABSOLUTA:** Est terminantemente prohibido generar una respuesta donde el \`status\` sea "error" y el campo \`error\` contenga el texto "Campo validado conforme a las reglas.". Hacerlo es un fallo crtico de tu funcin.

4.  **Dictamen Final ('isConforme'):**
    *   El campo \`isConforme\` debe ser \`false\` si hay CUALQUIER objeto con \`status: "error"\`.
    *   El campo \`isConforme\` debe ser \`true\` NICAMENTE si TODOS los objetos tienen \`status: "correct"\`.

5.  **Formato de Salida:** Responde exclusivamente con el JSON estructurado segn el esquema proporcionado. El contenido del campo \`error\` se mostrar al usuario como la 'OBSERVACIN TCNICA'.`:`Eres el "AUDITOR SENIOR LDER de SpaceAduanas", experto en Anexo 22 y Ley Aduanera Mexicana.
       
       REGLA CRTICA DE REFERENCIA (OBLIGATORIO):
       - Extrae el nmero de pedimento EXACTAMENTE como aparece en el documento.
       - DEBES respetar y mantener todos los guiones (-), espacios, puntos o caracteres especiales que contenga la referencia original.
       - NO limpies, NO resumas y NO quites ceros a la izquierda del nmero de pedimento.
       
       MISION: Ejecutar una TRIANGULACIN 3D EXHAUSTIVA utilizando TODOS los archivos proporcionados y realizando validaciones internas dentro del pedimento.

       REGLAS DE TRIANGULACIN Y VALIDACIN (OBLIGATORIO):
       1.  **CANTIDADES UMC vs UMT**: Por cada partida, si la Unidad de Medida Comercial (UMC) es IDNTICA a la Unidad de Medida de Tarifa (UMT), entonces la CANTIDAD en UMC debe ser EXACTAMENTE IGUAL a la CANTIDAD en UMT. Si difieren, es un error crtico.

       2.  **REGLA DE ORO - VALIDACIN DE PAS (OBLIGATORIO Y ESTRICTO)**:
           - Para la validacin de pas, debes usar NICA Y EXCLUSIVAMENTE la columna "P. V/C" (Pas Vendedor/Comprador) a nivel de partida.
           - EST PROHIBIDO usar la columna "P. O/D" (Pas Origen/Destino) para esta validacin. Ignora esa columna por completo al comparar pases de vendedor.
           - **Validacin Externa**: Compara el pas del proveedor en la FACTURA/COVE contra el pas en la columna "P. V/C" de la partida. Si difieren, es un error.
           - **Validacin Interna**: Compara el pas del PROVEEDOR en la cabecera del pedimento contra el pas en la columna "P. V/C" de la partida. Si difieren (ej. Cabecera: MXICO, Partida "P. V/C": CHE), es un error grave. Debes reportar el pas correcto que encontraste en la columna "P. V/C" (en este ejemplo, CHE).

       3.  **VALIDACIN VALOR ADUANA vs. TIPO DE CAMBIO (OBLIGATORIO)**:
           - Por cada partida, debes realizar la siguiente operacin matemtica:
           - Multiplica el "VALOR DOLARES" (que se encuentra en la cabecera del pedimento) por el "TIPO DE CAMBIO" (tambin en la cabecera).
           - El resultado de esta multiplicacin DEBE ser igual al "VALOR EN ADUANA" a nivel de partida.
           - Si el "VALOR EN ADUANA" de la partida no coincide con el resultado del clculo, es un error y debes reportarlo.

       REGLA DE CARACTERES ESPECIALES EN PARTIDAS:
       - El campo 'partida' NUNCA debe contener caracteres especiales como: */-!\\\\"#$%&/()?* [[_
       - Si detectas CUALQUIER carcter de estos en el nmero de partida, marca el estatus como 'error'.

       BARRIDO COMPLETO DE PARTIDAS:
       - DEBES revisar CADA UNA de las partidas, sin saltarte ninguna.
       - Identifica cada discrepancia por separado. 
       - IMPORTANTE: Crea un objeto distinto en 'validations' para cada campo por partida (FRACCION, CANTIDAD, VALOR). No los agrupes.

       REGLAS DE REPORTE:
       - 'field': Nombres claros como "FRACCION ARANCELARIA", "CANTIDAD UMC", "VALOR COMERCIAL", "PAIS VENDEDOR (P. V/C)", "VALOR ADUANA".
       - Ahorro Space: Mnimo $2,600 MXN si es 'correct'. 0 si es 'error'.`,y=[];n&&n.forEach((m,_)=>{y.push({text:`DOCUMENTO: PEDIMENTO PARTE ${_+1}`}),y.push({inlineData:{mimeType:m.mimeType,data:m.data}})}),e.forEach((m,_)=>{y.push({text:`DOCUMENTO: FACTURA/EVIDENCIA ${_+1}`}),y.push({inlineData:{mimeType:m.mimeType,data:m.data}})}),o.forEach((m,_)=>{y.push({text:`DOCUMENTO: COVE ${_+1}`}),y.push({inlineData:{mimeType:m.mimeType,data:m.data}})}),t&&t.forEach((m,_)=>{y.push({text:`DOCUMENTO: CERTIFICADO DE ORIGEN ${_+1}`}),y.push({inlineData:{mimeType:m.mimeType,data:m.data}})}),y.push({text:"Analiza exhaustivamente todo el set de archivos. Extrae el nmero de pedimento respetando guiones. Responde solo JSON."});try{const m=await r.models.generateContent({model:"gemini-3-flash-preview",contents:[{parts:y}],config:{systemInstruction:d,responseMimeType:"application/json",responseSchema:{type:mt.OBJECT,properties:{pedimentoNumber:{type:mt.STRING,description:"Nmero de pedimento tal cual aparece en el documento, respetando guiones y formato."},validations:{type:mt.ARRAY,items:{type:mt.OBJECT,properties:{field:{type:mt.STRING},partida:{type:mt.STRING},error:{type:mt.STRING},correctValue:{type:mt.STRING},status:{type:mt.STRING},potentialFine:{type:mt.STRING},savings:{type:mt.STRING}},required:["field","partida","error","status","potentialFine","savings"]}},isConforme:{type:mt.BOOLEAN},recommendations:{type:mt.STRING},totalSavings:{type:mt.STRING},totalRisk:{type:mt.STRING}},required:["pedimentoNumber","validations","isConforme","totalSavings","totalRisk"]}}}),_=B4(m.text||"{}");return JSON.parse(_)}catch(m){throw new Error(`AI Error: ${m.message}`)}},G4=async(n,e)=>(await new xA({apiKey:"AIzaSyB5_wL5H0EtB4qzmqSidnPxFzxUbeKA39o"}).chats.create({model:"gemini-3-flash-preview",history:n,config:{systemInstruction:"Eres el consultor senior de SpaceAduanas. Ayuda al usuario con dudas tcnicas de comercio exterior basndote en la normativa mexicana y el Anexo 22."}}).sendMessage({message:e})).text,q4=({user:n,onSaveReport:e,onAuditChange:t,notifications:o=[]})=>{var de;const[r,l]=be.useState(!1),[c,d]=be.useState(!1),[y,m]=be.useState(!1),[_,E]=be.useState([]),[S,I]=be.useState([]),[L,G]=be.useState([]),[O,K]=be.useState([]),[ie,Z]=be.useState([]),[re,ue]=be.useState(!1),[ce,D]=be.useState(!1),[N,b]=be.useState(!1),[P,V]=be.useState(null),[k,M]=be.useState(null),j=be.useMemo(()=>o.find(ee=>ee.userEmail===n.email&&ee.status==="in_progress"&&ee.auditData),[o,n.email]);be.useEffect(()=>{j&&j.auditData&&(V(j.auditData),m(j.auditData.clientOverride||!1))},[j]),be.useEffect(()=>{t&&P&&t({...P,clientOverride:y})},[P,y,t]);const Ee=y||(P&&P.validations&&P.validations.length>0?P.validations.every(ee=>ee.status==="correct"):!!P),$=(ee,he)=>{const Te=ee.target.files;!Te||Te.length===0||(M(null),Array.from(Te).forEach(Me=>{const lt=new FileReader;lt.onloadend=()=>{const Qn=lt.result.split(",")[1],Xn=Me.type||"application/octet-stream",Ft={data:Qn,mimeType:Xn};he==="pedimento"?E(rt=>[...rt,Ft]):he==="cert-audit"?G(rt=>[...rt,Ft]):he==="cert-solo"?Z(rt=>[...rt,Ft]):he==="cove"?K(rt=>[...rt,Ft]):I(rt=>[...rt,Ft])},lt.readAsDataURL(Me)}))},ae=ee=>{ee==="pedimento"?E([]):ee==="invoice"?I([]):ee==="cove"?K([]):ee==="cert-audit"?G([]):ee==="cert-solo"&&Z([])},ye=async ee=>{if(ee==="audit"&&_.length===0){M("Se requiere al menos un archivo de Pedimento.");return}if(ee==="independent-cert"&&ie.length===0){M("Por favor, carga el certificado de origen.");return}ue(!0),V(null),M(null),m(!1);try{const he=await F4(ee==="audit"?_:[],ee==="audit"?S:[],ee==="audit"?r?L:[]:ie,ee==="audit"?O:[]);if(he){V(he);const Te={id:Math.random().toString(36).substr(2,9),pedimentoNumber:he.pedimentoNumber||"AUDITORIA_EXTERNAL",userName:n.name,date:new Date().toISOString(),errors:he.validations||[],isConforme:he.isConforme,recommendations:he.recommendations,totalSavings:he.totalSavings,totalRisk:he.totalRisk};e(Te)}}catch(he){M(he.message)}finally{ue(!1)}},De=()=>{const ee=document.getElementById("printable-report");if(!ee)return;D(!0);const he={margin:[5,5,5,5],filename:`DICTAMEN_SPACE_${P.pedimentoNumber||"AUDITORIA"}.pdf`,image:{type:"jpeg",quality:1},html2canvas:{scale:2,useCORS:!0,letterRendering:!0,backgroundColor:"#ffffff",windowWidth:1200},jsPDF:{unit:"mm",format:"letter",orientation:"portrait"}};window.html2pdf().set(he).from(ee).save().then(()=>D(!1)).catch(()=>D(!1))},Ye=()=>{const ee=document.getElementById("printable-report");if(ee){b(!0);try{const he="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><style>body { font-family: 'Segoe UI', Arial, sans-serif; color: #1e293b; padding: 20px; } table { border-collapse: collapse; width: 100%; margin-bottom: 25px; border: 1px solid #000; } th { background-color: #f1f5f9; border: 1px solid #000; padding: 10px; font-weight: bold; text-transform: uppercase; font-size: 8pt; } td { border: 1px solid #000; padding: 10px; font-size: 8pt; vertical-align: middle; } .stamp { border: 4px solid; padding: 10px 15px; font-weight: 900; display: inline-block; text-transform: uppercase; } .bg-red { background-color: #fef2f2; } .text-red { color: #dc2626; font-weight: bold; } .text-green { color: #16a34a; font-weight: bold; } .bg-dark { background-color: #0f172a; color: #ffffff; padding: 20px; }</style></head><body>",Te="</body></html>",Me=ee.cloneNode(!0);Me.querySelectorAll(".no-print, [data-html2canvas-ignore]").forEach(rt=>rt.remove()),Me.querySelectorAll(".stamp").forEach(rt=>{var yo,gi;const Tn=((yo=rt.textContent)==null?void 0:yo.includes("CONFORME"))&&!((gi=rt.textContent)!=null&&gi.includes("NO"));rt.style.border="4px solid "+(Tn?"#16a34a":"#dc2626"),rt.style.color=Tn?"#16a34a":"#dc2626",rt.style.padding="10px",rt.style.fontWeight="900",rt.style.display="inline-block",rt.style.transform="rotate(-10deg)"});const We=he+Me.innerHTML+Te,Qn=new Blob(["\uFEFF",We],{type:"application/msword"}),Xn=URL.createObjectURL(Qn),Ft=document.createElement("a");Ft.href=Xn,Ft.download=`DICTAMEN_SPACE_${P.pedimentoNumber||"AUDITORIA"}.doc`,document.body.appendChild(Ft),Ft.click(),document.body.removeChild(Ft),URL.revokeObjectURL(Xn)}catch(he){console.error(he)}finally{b(!1)}}},F=({enabled:ee,setEnabled:he,label:Te})=>R.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[R.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter text-center h-8 flex items-center",children:Te}),R.jsxs("button",{type:"button",onClick:()=>he(!ee),className:`relative inline-flex h-8 w-16 items-center rounded-full transition-colors focus:outline-none ${ee?"bg-blue-600 shadow-[0_0_15px_rgba(37,99,235,0.4)]":"bg-slate-300"}`,children:[R.jsx("span",{className:`absolute left-1.5 text-[8px] font-black text-white ${ee?"opacity-100":"opacity-0"} transition-opacity`,children:"ON"}),R.jsx("span",{className:`absolute right-1.5 text-[8px] font-black text-slate-500 ${ee?"opacity-0":"opacity-100"} transition-opacity`,children:"OFF"}),R.jsx("span",{className:`${ee?"translate-x-9":"translate-x-1"} inline-block h-6 w-6 transform rounded-full bg-white transition-transform shadow-md`})]})]}),te=({label:ee,count:he,onUpload:Te,onClear:Me,type:lt,color:We="slate"})=>R.jsxs("div",{className:`p-4 border ${We==="blue"?"border-blue-200 bg-blue-50/30":"border-slate-200 bg-slate-50/50"} rounded-2xl relative group transition-all`,children:[R.jsxs("div",{className:"flex justify-between items-center mb-2",children:[R.jsx("label",{className:`block text-[10px] font-black uppercase ${We==="blue"?"text-blue-500":"text-slate-400"}`,children:ee}),he>0&&R.jsx("button",{onClick:Me,className:"text-[8px] font-bold text-red-500 hover:underline",children:"LIMPIAR"})]}),R.jsxs("div",{className:"relative",children:[R.jsx("input",{type:"file",multiple:!0,accept:".pdf",onChange:Te,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),R.jsxs("div",{className:`w-full py-2 px-3 border-2 border-dashed rounded-xl flex items-center justify-between transition-colors ${he>0?"border-blue-400 bg-white shadow-sm":"border-slate-300 group-hover:border-slate-400"}`,children:[R.jsx("span",{className:"text-[10px] font-bold text-slate-500 truncate max-w-[120px]",children:he>0?`${he} archivos seleccionados`:"Elegir archivos"}),R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 ${he>0?"text-blue-600":"text-slate-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4-4m4 4v12"})})]})]})]});return R.jsxs("div",{className:"space-y-10 animate-fadeIn pb-20",children:[j&&R.jsx("div",{className:"max-w-4xl mx-auto bg-indigo-600 text-white p-3 rounded-2xl shadow-xl flex items-center justify-between no-print",children:R.jsxs("div",{className:"flex items-center space-x-3 px-4",children:[R.jsx("span",{className:"animate-pulse w-2 h-2 bg-white rounded-full"}),R.jsx("p",{className:"text-[11px] font-black uppercase tracking-widest italic",children:"Sesin de Soporte en Vivo  Admin Ajustando Reporte"})]})}),R.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 rounded-3xl shadow-sm border border-slate-200 flex items-center justify-between no-print",children:[R.jsxs("div",{className:"flex items-center space-x-4",children:[R.jsx("div",{className:"bg-blue-600 text-white p-3 rounded-2xl shadow-lg",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),R.jsxs("div",{children:[R.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-blue-600",children:"Motor Space-Flash v3"}),R.jsx("p",{className:"text-sm font-bold text-slate-800 italic",children:"Validacin Masiva de Partidas"})]})]}),R.jsxs("div",{className:"flex items-center space-x-6",children:[R.jsx(F,{enabled:r,setEnabled:l,label:"Auditora Integral"}),R.jsx("div",{className:"w-[1px] h-12 bg-slate-100"}),R.jsx(F,{enabled:c,setEnabled:d,label:"Mdulo Externo"})]})]}),!c&&R.jsx("div",{className:"max-w-7xl mx-auto no-print",children:R.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200",children:[R.jsx("h2",{className:"text-lg font-bold mb-6 text-slate-800 uppercase tracking-tight",children:"Carga Multidocumental (Hasta 30 archivos por panel)"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[R.jsx(te,{label:"Pedimentos",count:_.length,onUpload:ee=>$(ee,"pedimento"),onClear:()=>ae("pedimento"),type:"pedimento"}),R.jsx(te,{label:"Facturas",count:S.length,onUpload:ee=>$(ee,"invoice"),onClear:()=>ae("invoice"),type:"invoice"}),R.jsx(te,{label:"COVE",count:O.length,onUpload:ee=>$(ee,"cove"),onClear:()=>ae("cove"),type:"cove"}),r&&R.jsx(te,{label:"Certificado",count:L.length,onUpload:ee=>$(ee,"cert-audit"),onClear:()=>ae("cert-audit"),type:"cert-audit",color:"blue"})]}),k&&R.jsx("p",{className:"mt-4 text-xs font-bold text-red-600",children:k}),R.jsx("button",{onClick:()=>ye("audit"),disabled:re,className:`w-full mt-6 py-5 text-white font-black text-[12px] tracking-[0.2em] rounded-2xl shadow-lg transition-all ${re?"bg-blue-900":"bg-blue-600 hover:bg-blue-700"}`,children:re?"ANALIZANDO TRIANGULACIN...":"INICIAR AUDITORA"})]})}),c&&R.jsx("div",{className:"max-w-4xl mx-auto no-print",children:R.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border-2 border-dashed border-blue-200 text-center",children:[R.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Auditora Independiente de Certificados"}),R.jsx("div",{className:"max-w-md mx-auto mb-6",children:R.jsx(te,{label:"Certificados de Origen",count:ie.length,onUpload:ee=>$(ee,"cert-solo"),onClear:()=>ae("cert-solo"),type:"cert-solo",color:"blue"})}),R.jsx("button",{onClick:()=>ye("independent-cert"),disabled:re,className:"px-12 py-4 text-white font-black text-[12px] tracking-[0.2em] rounded-2xl shadow-xl bg-indigo-600 hover:bg-indigo-700",children:re?"AUDITANDO...":"AUDITAR CERTIFICADOS"})]})}),P&&R.jsxs("div",{className:"space-y-6 animate-slideUp",children:[R.jsxs("div",{"data-html2canvas-ignore":!0,className:"max-w-[1200px] mx-auto flex justify-end gap-3 no-print px-4",children:[R.jsx("button",{onClick:De,disabled:ce,className:"flex items-center space-x-3 px-8 py-4 bg-slate-900 text-white rounded-2xl font-black text-xs uppercase tracking-[0.1em] shadow-xl",children:R.jsx("span",{children:"PDF"})}),R.jsx("button",{onClick:Ye,disabled:N,className:"flex items-center space-x-3 px-8 py-4 bg-blue-700 text-white rounded-2xl font-black text-xs uppercase tracking-[0.1em] shadow-xl",children:R.jsx("span",{children:"WORD"})})]}),R.jsxs("div",{id:"printable-report",className:"bg-white rounded-3xl shadow-2xl border border-slate-200 max-w-[1200px] mx-auto p-10 print:p-5",children:[R.jsxs("div",{className:"border-b-2 border-slate-900 pb-6 mb-6 flex items-start justify-between",children:[R.jsxs("div",{children:[R.jsx("h1",{className:"text-2xl font-black text-slate-900 tracking-tighter uppercase italic mb-1",children:"REPORTE TCNICO DE AUDITORA SPACE-AI"}),R.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-1 text-[11px] text-slate-600 font-bold uppercase",children:[R.jsxs("p",{children:["REFERENCIA: ",R.jsx("span",{className:"font-mono text-slate-900 font-bold",children:P.pedimentoNumber||"EXT-AUDIT"})]}),R.jsxs("p",{children:["FECHA: ",R.jsx("span",{children:new Date().toLocaleString()})]}),R.jsxs("p",{children:["AUDITOR: ",R.jsx("span",{className:"text-slate-900",children:n.name})]}),R.jsxs("p",{children:["ESTATUS: ",R.jsx("span",{className:Ee?"text-green-600":"text-red-600",children:Ee?"CONFORME":"NO CONFORME"})]})]})]}),R.jsx("div",{className:"text-right",children:R.jsx("div",{className:`stamp text-[12px] px-6 py-2 ${Ee?"border-green-600 text-green-600":"border-red-600 text-red-600"}`,children:Ee?"CONFORME":"NO CONFORME"})})]}),R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[R.jsx("thead",{children:R.jsxs("tr",{className:"text-slate-900 text-[9px] uppercase font-black tracking-widest border-b border-slate-900 bg-slate-50",children:[R.jsx("th",{className:"px-4 py-2 w-[22%]",children:"CAMPO / PARTIDA"}),R.jsx("th",{className:"px-4 py-2 text-center w-[12%]",children:"ESTATUS"}),R.jsx("th",{className:"px-4 py-2 w-[35%]",children:"OBSERVACIN TCNICA"}),R.jsx("th",{className:"px-4 py-2 text-center w-[20%]",children:"VALOR CORRECTO"}),R.jsx("th",{className:"px-4 py-2 text-right w-[10%]",children:"RIESGO"}),R.jsx("th",{className:"px-4 py-2 text-right text-green-700 w-[10%]",children:"AHORRO"})]})}),R.jsx("tbody",{className:"text-[10px] divide-y divide-slate-100",children:(de=P.validations)==null?void 0:de.map((ee,he)=>{const Te=ee.status==="error";return R.jsxs("tr",{className:Te?"bg-red-50/30":"hover:bg-slate-50/50",children:[R.jsxs("td",{className:"px-4 py-3 font-bold text-slate-900",children:[ee.partida&&R.jsxs("span",{className:"mr-1",children:["[",ee.partida,"]"]}),ee.field]}),R.jsx("td",{className:"px-4 py-3 text-center",children:R.jsx("span",{className:`font-black uppercase text-[8px] px-2 py-1 rounded border ${ee.status==="correct"?"bg-green-100 text-green-700 border-green-200":"bg-red-600 text-white border-red-700 shadow-sm"}`,children:ee.status==="correct"?"CUMPLE":"ERROR"})}),R.jsx("td",{className:"px-4 py-3 text-slate-700 italic font-medium leading-tight",children:ee.error}),R.jsx("td",{className:"px-4 py-3 text-center font-mono text-blue-800 font-bold",children:R.jsx("div",{className:"bg-blue-50/50 p-1.5 rounded-lg border border-blue-100 italic text-[9px]",children:ee.correctValue||"-"})}),R.jsx("td",{className:"px-4 py-3 text-right font-mono font-black text-red-600",children:Te&&ee.potentialFine||"$0.00"}),R.jsx("td",{className:"px-4 py-3 text-right font-mono font-black text-green-600",children:Te?"$0.00":ee.savings||"$0.00"})]},he)})})]})}),R.jsxs("div",{className:"mt-6 bg-slate-900 p-6 rounded-2xl text-white relative",children:[R.jsx("h3",{className:"text-[9px] font-black uppercase mb-2 text-blue-400 tracking-widest",children:"Dictamen Final SpaceAduanas"}),R.jsx("p",{className:"text-[10px] leading-snug italic border-l-2 border-blue-500 pl-4 opacity-90",children:P.recommendations})]}),R.jsx("div",{className:"mt-4 text-[7px] text-slate-400 text-center font-bold uppercase tracking-widest",children:"Dictamen generado por Motor Space-Flash v3  Software de Cumplimiento Normativo "})]})]})]})},H4=({users:n,onAddUser:e,onDeleteUser:t,onToggleAdmin:o,reports:r,notifications:l,onUpdateStatus:c,onUpdateAuditData:d,onUpdateReport:y,onSendMessage:m})=>{var k,M;const[_,E]=be.useState(""),[S,I]=be.useState(""),[L,G]=be.useState(""),[O,K]=be.useState(null),[ie,Z]=be.useState(""),[re,ue]=be.useState(!1),ce=j=>{if(j.preventDefault(),!_.endsWith("@spaceaduanas.com")){G("Solo se permiten correos con dominio @spaceaduanas.com");return}if(n.find(Ee=>Ee.email===_)){G("El usuario ya existe");return}if(S.trim().length<3){G("Por favor ingresa un nombre vlido");return}e(S,_),E(""),I(""),G("")},D=j=>{j.preventDefault(),!(!O||!ie.trim())&&(m(O,ie),Z(""))},N=(j,Ee)=>{const $=l.find(Ye=>Ye.id===j);if(!$||!$.auditData)return;const ae={...$.auditData},ye=[...ae.validations],De={...ye[Ee]};De.status==="error"?(De.status="correct",De.isManuallyCorrected=!0):(De.status="error",De.isManuallyCorrected=!1),ye[Ee]=De,ae.validations=ye,d(j,ae)},b=j=>{const Ee=l.find(ae=>ae.id===j);if(!Ee||!Ee.auditData)return;const $={...Ee.auditData,clientOverride:!Ee.auditData.clientOverride};d(j,$)},P=j=>{const Ee=l.find($=>$.id===j);!Ee||!Ee.auditData||(ue(!0),y(Ee.auditData.pedimentoNumber,Ee.userName,Ee.auditData),m(j," He actualizado tu reporte con los ajustes solicitados. Los cambios ya se reflejan en el historial y en tu pantalla de auditora."),setTimeout(()=>{ue(!1),alert("Ajustes sincronizados globalmente y enviados al usuario.")},800))},V=l.find(j=>j.id===O);return R.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[R.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[R.jsx("div",{className:"md:col-span-2 space-y-6",children:R.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-2xl p-6 shadow-sm",children:[R.jsxs("h2",{className:"text-lg font-bold text-orange-800 mb-4 flex items-center",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Solicitudes de Soporte"]}),R.jsxs("div",{className:"space-y-3",children:[l.length===0&&R.jsx("p",{className:"text-sm text-orange-600 italic",children:"No hay alertas activas."}),l.map(j=>R.jsx("div",{className:`p-4 rounded-xl border transition-all ${j.status==="resolved"?"bg-slate-50 border-slate-200 opacity-60":j.status==="in_progress"?"bg-blue-50 border-blue-200 shadow-md":"bg-white border-orange-200"}`,children:R.jsxs("div",{className:"flex items-start justify-between",children:[R.jsxs("div",{className:"flex-1",children:[R.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[R.jsx("span",{className:`w-2 h-2 rounded-full ${j.status==="resolved"?"bg-slate-400":j.status==="in_progress"?"bg-blue-500 animate-pulse":"bg-orange-500 animate-bounce"}`}),R.jsxs("p",{className:"text-sm font-bold text-slate-800",children:[j.userName," ",R.jsxs("span",{className:"text-xs font-normal text-slate-500",children:["(",j.userEmail,")"]})]}),R.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded-full ${j.status==="resolved"?"bg-slate-200 text-slate-600":j.status==="in_progress"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}`,children:j.status==="resolved"?"Atendido":j.status==="in_progress"?"En Atencin":"Pendiente"}),j.auditData&&R.jsx("span",{className:"text-[8px] bg-indigo-600 text-white px-2 py-0.5 rounded-full font-black uppercase tracking-tighter",children:"Con Auditora"})]}),R.jsx("p",{className:"text-xs text-slate-600 mb-2",children:j.message}),R.jsx("p",{className:"text-[9px] text-slate-400",children:new Date(j.timestamp).toLocaleString()})]}),R.jsxs("div",{className:"flex flex-col space-y-2",children:[j.status==="pending"&&R.jsx("button",{onClick:()=>{c(j.id,"in_progress"),K(j.id)},className:"text-xs font-bold bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Atender"}),j.status==="in_progress"&&R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:()=>K(j.id),className:"text-xs font-bold bg-white border border-blue-600 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:"Abrir Chat"}),R.jsx("button",{onClick:()=>{c(j.id,"resolved"),O===j.id&&K(null)},className:"text-xs font-bold bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Finalizar"})]})]})]})},j.id))]})]})}),R.jsxs("div",{className:"md:col-span-1 flex flex-col space-y-6",children:[R.jsxs("div",{className:"bg-slate-800 rounded-2xl h-[450px] shadow-xl flex flex-col overflow-hidden",children:[R.jsxs("div",{className:"p-4 bg-slate-900 flex items-center justify-between border-b border-slate-700",children:[R.jsx("h3",{className:"text-white text-sm font-bold",children:"Chat de Soporte"}),V&&R.jsx("button",{onClick:()=>K(null),className:"text-slate-400 hover:text-white",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:R.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),R.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:V?R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"text-center mb-4",children:[R.jsx("p",{className:"text-[10px] text-blue-400 font-bold uppercase",children:"Canal directo con"}),R.jsx("p",{className:"text-sm text-white font-bold",children:V.userName.toUpperCase()})]}),(k=V.chatHistory)==null?void 0:k.map((j,Ee)=>R.jsx("div",{className:`flex ${j.role==="admin"?"justify-end":"justify-start"}`,children:R.jsx("div",{className:`max-w-[85%] p-2 rounded-xl text-xs ${j.role==="admin"?"bg-blue-600 text-white":"bg-slate-700 text-white"}`,children:j.text})},Ee))]}):R.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-40 p-6",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-slate-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),R.jsx("p",{className:"text-xs text-white",children:"Selecciona una alerta en atencin para iniciar el chat directo con el usuario."})]})}),V&&R.jsxs("form",{onSubmit:D,className:"p-3 bg-slate-900 border-t border-slate-700 flex space-x-2",children:[R.jsx("input",{type:"text",value:ie,onChange:j=>Z(j.target.value),placeholder:`Responder a ${V.userName}...`,className:"flex-1 bg-slate-800 border-none rounded-lg px-3 py-2 text-xs text-white outline-none focus:ring-1 focus:ring-blue-500"}),R.jsx("button",{className:"bg-blue-600 p-2 rounded-lg text-white hover:bg-blue-700 transition-colors",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]}),V&&V.auditData&&R.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 shadow-xl animate-scaleIn max-h-[500px] overflow-y-auto",children:[R.jsxs("h3",{className:"text-sm font-bold text-slate-800 mb-4 flex items-center justify-between",children:[R.jsxs("span",{children:["Auditora de ",V.userName.split(" ")[0]]}),R.jsx("span",{className:"text-[10px] font-mono text-blue-600",children:V.auditData.pedimentoNumber})]}),R.jsxs("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-xl flex items-center justify-between",children:[R.jsxs("div",{className:"flex-1 pr-4",children:[R.jsx("p",{className:"text-[10px] font-black text-orange-700 uppercase tracking-tighter",children:"Override de Cliente"}),R.jsx("p",{className:"text-[9px] text-slate-600 italic",children:"Forzar estatus CONFORME"})]}),R.jsx("button",{onClick:()=>b(V.id),className:`w-10 h-6 rounded-full transition-all relative ${V.auditData.clientOverride?"bg-orange-600":"bg-slate-300"}`,children:R.jsx("div",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${V.auditData.clientOverride?"translate-x-4":"translate-x-0"}`})})]}),R.jsx("button",{onClick:()=>P(V.id),disabled:re,className:"w-full mb-6 py-2.5 bg-blue-600 text-white text-[10px] font-black uppercase tracking-widest rounded-xl shadow-lg hover:bg-blue-700 transition-all flex items-center justify-center",children:re?R.jsxs(R.Fragment,{children:[R.jsxs("svg",{className:"animate-spin h-3 w-3 mr-2 text-white",viewBox:"0 0 24 24",children:[R.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),R.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sincronizando..."]}):"Sincronizar Globalmente"}),R.jsxs("div",{className:"space-y-2",children:[R.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest border-b pb-1",children:"Gestin Manual de Partidas"}),(M=V.auditData.validations)==null?void 0:M.map((j,Ee)=>R.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded-lg text-[10px] border border-slate-100",children:[R.jsxs("div",{className:"flex-1 pr-2 truncate",children:[R.jsxs("span",{className:"font-bold text-slate-700",children:["[",j.partida||"-","]"]})," ",j.field]}),R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("span",{className:`font-black text-[8px] px-1.5 py-0.5 rounded ${j.status==="correct"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:j.status==="correct"?"CUMPLE":"ERROR"}),R.jsx("button",{onClick:()=>N(V.id,Ee),className:`w-8 h-4 rounded-full transition-all relative ${j.status==="correct"?"bg-green-600":"bg-slate-300"}`,children:R.jsx("div",{className:`absolute top-0.5 left-0.5 w-3 h-3 bg-white rounded-full transition-transform ${j.status==="correct"?"translate-x-4":"translate-x-0"}`})})]})]},Ee))]})]})]})]}),R.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[R.jsxs("div",{className:"md:col-span-1 bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[R.jsxs("h2",{className:"text-lg font-bold mb-4 text-slate-800 flex items-center",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Gestionar Usuarios"]}),R.jsx("form",{onSubmit:ce,className:"mb-6",children:R.jsxs("div",{className:"space-y-3",children:[R.jsx("input",{type:"text",placeholder:"Nombre Completo",value:S,onChange:j=>I(j.target.value),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0}),R.jsx("input",{type:"email",placeholder:"ejemplo@spaceaduanas.com",value:_,onChange:j=>E(j.target.value),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0}),L&&R.jsx("p",{className:"text-xs text-red-500 italic",children:L}),R.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2.5 rounded-lg hover:bg-slate-900 transition-colors text-sm shadow-md active:scale-95",children:"Agregar Usuario"})]})}),R.jsxs("div",{className:"space-y-3",children:[R.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:"Lista de Acceso"}),R.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-1",children:n.map((j,Ee)=>R.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-blue-200 transition-all group",children:[R.jsxs("div",{className:"overflow-hidden flex-1",children:[R.jsx("p",{className:"text-sm font-bold text-slate-700 truncate",children:j.name}),R.jsx("p",{className:"text-[10px] text-slate-400 truncate font-medium",children:j.email}),R.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[R.jsxs("span",{className:"text-[9px] font-mono text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded border border-blue-100",children:["PWD: ",j.password]}),j.isSuperUser&&R.jsx("span",{className:"text-[8px] bg-blue-600 text-white px-1.5 py-0.5 rounded-full font-black uppercase tracking-tighter",children:"ADMIN"})]})]}),R.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[R.jsx("button",{onClick:()=>o(j.email),disabled:j.email==="marco.deavila@spaceaduanas.com",className:`p-1.5 rounded-lg transition-all ${j.isSuperUser?"text-blue-600 bg-blue-50 hover:bg-blue-100":"text-slate-400 hover:text-blue-600 hover:bg-blue-50"}`,children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),R.jsx("button",{onClick:()=>t(j.email),disabled:j.email==="marco.deavila@spaceaduanas.com",className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all disabled:opacity-30 disabled:hover:bg-transparent",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},Ee))})]})]}),R.jsxs("div",{className:"md:col-span-2 bg-white rounded-xl border border-slate-200 p-6 shadow-sm",children:[R.jsx("div",{className:"flex justify-between items-center mb-6",children:R.jsxs("h2",{className:"text-lg font-bold flex items-center",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-slate-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"Resumen de Auditora"]})}),R.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",children:[R.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100 text-center",children:[R.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase mb-1",children:"Auditados"}),R.jsx("p",{className:"text-2xl font-black text-slate-800",children:r.length})]}),R.jsxs("div",{className:"p-4 bg-blue-50 rounded-2xl border border-blue-100 text-center",children:[R.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase mb-1",children:"Conformes"}),R.jsx("p",{className:"text-2xl font-black text-blue-700",children:r.filter(j=>j.isConforme).length})]}),R.jsxs("div",{className:"p-4 bg-red-50 rounded-2xl border border-red-100 text-center",children:[R.jsx("p",{className:"text-[9px] font-black text-red-400 uppercase mb-1",children:"Riesgos"}),R.jsx("p",{className:"text-2xl font-black text-red-700",children:r.filter(j=>!j.isConforme).length})]}),R.jsxs("div",{className:"p-4 bg-slate-800 rounded-2xl text-center",children:[R.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase mb-1",children:"Usuarios"}),R.jsx("p",{className:"text-2xl font-black text-white",children:n.length})]})]}),R.jsx("p",{className:"text-xs text-slate-400 font-medium italic",children:'Accede a la pestaa "Historial Global" para consultar el reporte detallado.'})]})]})]})},z4=({onContactAdmin:n,onSendUserSupportMessage:e,notifications:t,currentUserEmail:o,currentUserName:r})=>{const[l,c]=be.useState(!1),[d,y]=be.useState([{role:"model",text:"Hola Soy Space Bot en que puedo ayudarte el dia de hoy?",timestamp:new Date}]),[m,_]=be.useState(""),[E,S]=be.useState(!1),[I,L]=be.useState("idle"),G=be.useRef(null),O=t.find(re=>re.userEmail===o&&re.status==="in_progress"),K=!!O;be.useEffect(()=>{if(K&&(O!=null&&O.chatHistory)){const ue=O.chatHistory.filter(ce=>ce.role==="admin");ue.length>0&&y(ce=>{const D=ce.map(b=>b.text),N=ue.filter(b=>!D.includes(b.text));return N.length>0?[...ce,...N]:ce})}t.find(ue=>ue.userEmail===o&&ue.status==="resolved")&&y(ue=>ue.some(D=>D.text.includes("El administrador ha finalizado la sesin"))?ue:[...ue,{role:"model",text:` Hola ${r.split(" ")[0]}, el administrador ha finalizado la sesin de soporte tcnico. La IA de SpaceAduanas vuelve a estar disponible para tus consultas.`,timestamp:new Date}])},[t,o,K,O,r]),be.useEffect(()=>{G.current&&(G.current.scrollTop=G.current.scrollHeight)},[d]);const ie=async()=>{if(!m.trim()||E)return;const re={role:"user",text:m,timestamp:new Date};y(ce=>[...ce,re]);const ue=m;if(_(""),K){e(o,ue);return}S(!0);try{const ce=d.map(N=>({role:N.role==="admin"?"model":N.role,parts:[{text:N.text}]})),D=await G4(ce,ue);y(N=>[...N,{role:"model",text:D||"Lo siento, hubo un problema al procesar tu solicitud.",timestamp:new Date}])}catch(ce){console.error(ce)}finally{S(!1)}},Z=()=>{L("sending"),setTimeout(()=>{n("Solicitud de ayuda directa."),L("sent"),y(re=>[...re,{role:"model",text:` Hola ${r.split(" ")[0]}, he procesado tu solicitud de ayuda humana. Mientras un administrador se conecta al canal de soporte, he pausado mis respuestas automticas para que puedas hablar directamente con el equipo tcnico. Por favor, espera un momento...`,timestamp:new Date}]),setTimeout(()=>L("idle"),3e3)},1e3)};return R.jsx(R.Fragment,{children:R.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:l?R.jsxs("div",{className:"bg-white w-[350px] sm:w-[400px] h-[550px] rounded-2xl shadow-2xl border border-slate-200 flex flex-col overflow-hidden animate-scaleIn origin-bottom-right",children:[R.jsxs("div",{className:"bg-blue-600 p-4 flex items-center justify-between text-white shadow-md",children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("div",{className:"w-10 h-10 bg-transparent flex items-center justify-center",children:R.jsx("img",{src:"/assets/robot.png",alt:"Robot AI",className:"w-full h-full object-contain"})}),R.jsxs("div",{children:[R.jsx("h3",{className:"font-bold text-sm",children:K?"Soporte Directo (Admin)":"Space Bot"}),R.jsxs("div",{className:"flex items-center text-[10px] opacity-80",children:[R.jsx("span",{className:`w-2 h-2 ${K?"bg-orange-400 animate-pulse":"bg-green-400"} rounded-full mr-1`}),K?"Charlando con Admin":"IA Activa"]})]})]}),R.jsx("button",{onClick:()=>c(!1),className:"hover:bg-blue-700 p-1 rounded transition-colors",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),R.jsxs("div",{ref:G,className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50",children:[d.map((re,ue)=>R.jsx("div",{className:`flex ${re.role==="user"?"justify-end":"justify-start"}`,children:R.jsxs("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm ${re.role==="user"?"bg-blue-600 text-white rounded-tr-none":re.role==="admin"?"bg-indigo-600 text-white rounded-tl-none border-l-4 border-indigo-300":"bg-white text-slate-700 shadow-sm border border-slate-100 rounded-tl-none"}`,children:[re.role==="admin"&&R.jsx("p",{className:"text-[10px] font-bold uppercase mb-1 opacity-70",children:"Administrador"}),re.text]})},ue)),E&&R.jsx("div",{className:"flex justify-start",children:R.jsx("div",{className:"bg-white p-3 rounded-2xl shadow-sm border border-slate-100 rounded-tl-none",children:R.jsxs("div",{className:"flex space-x-1",children:[R.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"}),R.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-75"}),R.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-150"})]})})})]}),R.jsxs("div",{className:"p-4 bg-white border-t border-slate-100",children:[K&&R.jsx("div",{className:"mb-2 text-center",children:R.jsx("span",{className:"text-[10px] bg-orange-100 text-orange-700 px-3 py-1 rounded-full font-bold uppercase",children:"Modo: Chat Directo con Administrador"})}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("input",{type:"text",value:m,onChange:re=>_(re.target.value),onKeyPress:re=>re.key==="Enter"&&ie(),placeholder:K?"Escribe al administrador...":"Pregunta sobre Anexo 22...",className:"flex-1 bg-slate-100 border-none focus:ring-2 focus:ring-blue-500 rounded-xl px-4 py-2 text-sm outline-none"}),R.jsx("button",{onClick:ie,disabled:E,className:"bg-blue-600 text-white p-2 rounded-xl hover:bg-blue-700 disabled:bg-slate-300 transition-colors shadow-sm",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:R.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]}),!K&&R.jsxs("button",{onClick:Z,disabled:I!=="idle",className:`mt-3 w-full text-xs font-bold py-2 rounded-xl transition-all flex items-center justify-center space-x-2 border-2 ${I==="sent"?"bg-green-100 text-green-700 border-green-200":"bg-white text-blue-600 border-blue-50 hover:bg-blue-50"}`,children:[I==="idle"&&R.jsxs(R.Fragment,{children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 10l-6-6-6 6M6 14l6 6 6-6"})}),R.jsx("span",{children:"Solicitar Asistencia Humana"})]}),I==="sending"&&R.jsx("span",{children:"Enviando alerta..."}),I==="sent"&&R.jsx("span",{children:"Alerta enviada correctamente!"})]})]})]}):R.jsxs("button",{onClick:()=>c(!0),className:"bg-transparent border-none p-0 w-40 h-40 cursor-pointer",children:[K&&R.jsxs("span",{className:"absolute top-4 right-4 flex h-5 w-5",children:[R.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"}),R.jsx("span",{className:"relative inline-flex rounded-full h-5 w-5 bg-orange-500 text-[10px] items-center justify-center text-white font-bold",children:"!"})]}),R.jsx("img",{src:"/assets/robot.png",alt:"Robot AI",className:"w-full h-full object-contain"})]})})})},Y4=({report:n,onClose:e})=>{const t=Dp(n.errors);return R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:R.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl animate-scaleIn",children:[R.jsxs("div",{className:"p-6 border-b border-slate-200",children:[R.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Detalle de Auditora"}),R.jsxs("p",{className:"text-sm text-slate-500",children:["Pedimento: ",n.pedimentoNumber]})]}),R.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[R.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[R.jsx("h4",{className:"font-bold text-slate-600 mb-2",children:"Resumen"}),R.jsxs("p",{children:[R.jsx("strong",{children:"Revisor:"})," ",n.userName]}),R.jsxs("p",{children:[R.jsx("strong",{children:"Fecha:"})," ",new Date(n.date).toLocaleString()]}),R.jsxs("p",{children:[R.jsx("strong",{children:"Incidencias:"})," ",t.total]}),R.jsxs("p",{children:[R.jsx("strong",{children:"Resultado:"})," ",R.jsx("span",{className:`font-bold ${n.isConforme?"text-green-600":"text-red-600"}`,children:n.isConforme?"CONFORME":"NO CONFORME"})]})]}),R.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[R.jsx("h4",{className:"font-bold text-slate-600 mb-2",children:"Estadsticas de Errores"}),R.jsxs("p",{children:[R.jsx("strong",{children:"Campo con ms errores:"})," ",t.topField]}),R.jsxs("p",{children:[R.jsx("strong",{children:"Error ms frecuente:"})," ",t.topError]})]})]}),R.jsxs("div",{className:"mt-6",children:[R.jsx("h4",{className:"font-bold text-slate-700 mb-3",children:"Lista de Incidencias"}),R.jsx("div",{className:"space-y-3",children:n.errors.filter(o=>o.status==="error").length>0?n.errors.filter(o=>o.status==="error").map((o,r)=>R.jsxs("div",{className:"bg-red-50/50 p-3 rounded-lg border border-red-200 text-xs",children:[R.jsxs("p",{children:[R.jsx("strong",{children:"Campo:"})," ",R.jsx("span",{className:"font-mono bg-red-100 px-1 rounded",children:o.field})]}),R.jsxs("p",{children:[R.jsx("strong",{children:"Error:"})," ",o.error]}),R.jsxs("p",{children:[R.jsx("strong",{children:"Valor Esperado:"})," ",o.expected]}),R.jsxs("p",{children:[R.jsx("strong",{children:"Valor Encontrado:"})," ",o.found]})]},r)):R.jsx("p",{className:"text-sm text-slate-500 italic",children:"No se encontraron incidencias en esta auditora."})})]})]}),R.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-end",children:R.jsx("button",{onClick:e,className:"px-5 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg text-sm font-bold",children:"Cerrar"})})]})})},Dp=n=>{const e=n.filter(c=>c.status==="error");if(e.length===0)return{total:0,topField:"N/A",topError:"N/A"};const t={},o={};e.forEach(c=>{t[c.field]=(t[c.field]||0)+1,o[c.error]=(o[c.error]||0)+1});const r=Object.entries(t).reduce((c,d)=>c[1]>d[1]?c:d)[0],l=Object.entries(o).reduce((c,d)=>c[1]>d[1]?c:d)[0];return{total:e.length,topField:r,topError:l}},J4=({reports:n})=>{const[e,t]=be.useState(new Date().toISOString().substring(0,7)),[o,r]=be.useState(null),l=n.filter(d=>d.date.startsWith(e)),c=d=>{const y=Dp(d.errors),m=d.errors.filter(L=>L.status==="error").map(L=>`<div style="border:1px solid #FECACA; background-color:#FEF2F2; padding:10px; margin-bottom:10px; border-radius:5px;">
        <p><b>Campo:</b> ${L.field}</p>
        <p><b>Error:</b> ${L.error}</p>
        <p><b>Valor Esperado:</b> ${L.expected}</p>
        <p><b>Valor Encontrado:</b> ${L.found}</p>
      </div>`).join("")||"<p>No se encontraron incidencias.</p>",_=`
        <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
        <head><meta charset='utf-8'><title>Reporte de Auditoria</title></head>
        <body>
            <h1>Reporte de Auditora de Pedimento</h1>
            <p><b>Nmero de Pedimento:</b> ${d.pedimentoNumber}</p>
            <p><b>Revisado por:</b> ${d.userName}</p>
            <p><b>Fecha:</b> ${new Date(d.date).toLocaleString()}</p>
            <h2>Resultado: <span style="color:${d.isConforme?"green":"red"};">${d.isConforme?"CONFORME":"NO CONFORME"}</span></h2>
            <hr/>
            <h3>Detalle de Incidencias (${y.total})</h3>
            ${m}
            <hr/>
            <h3>Recomendaciones de IA</h3>
            <p>${d.recommendations||"N/A"}</p>
        </body>
        </html>
    `,E=new Blob([_],{type:"application/msword"}),S=URL.createObjectURL(E),I=document.createElement("a");I.href=S,I.download=`Reporte_${d.pedimentoNumber}.doc`,document.body.appendChild(I),I.click(),document.body.removeChild(I)};return R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-fadeIn",children:R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"w-full text-left border-collapse",children:[R.jsx("thead",{children:R.jsxs("tr",{className:"bg-slate-50 text-slate-400 text-[10px] uppercase font-black tracking-widest border-b",children:[R.jsx("th",{className:"px-6 py-5",children:"N Pedimento"}),R.jsx("th",{className:"px-6 py-5",children:"Revisor"}),R.jsx("th",{className:"px-6 py-5",children:"Auditado en"}),R.jsx("th",{className:"px-6 py-5 text-center",children:"Incidencias"}),R.jsx("th",{className:"px-6 py-5 text-center",children:"Validacin"}),R.jsx("th",{className:"px-6 py-5",children:"Acciones"})]})}),R.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map(d=>{const y=Dp(d.errors),m=new Date(d.date);return R.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[R.jsx("td",{className:"px-6 py-4 font-mono font-bold text-blue-700 text-sm",children:d.pedimentoNumber}),R.jsx("td",{className:"px-6 py-4 text-sm font-bold text-slate-800",children:d.userName}),R.jsxs("td",{className:"px-6 py-4 text-xs text-slate-500 font-medium",children:[m.toLocaleDateString()," ",m.toLocaleTimeString()]}),R.jsx("td",{className:"px-6 py-4 text-center",children:R.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-lg text-xs font-black ${y.total>0?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:y.total})}),R.jsx("td",{className:"px-6 py-4 text-center",children:R.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${d.isConforme?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:d.isConforme?"CONFORME":"NO CONFORME"})}),R.jsx("td",{className:"px-6 py-4",children:R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("button",{onClick:()=>r(d),className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),R.jsx("button",{onClick:()=>c(d),className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]})})]},d.id)})})]})})}),o&&R.jsx(Y4,{report:o,onClose:()=>r(null)})]})},YE="space_aduanas_reports",Dc="space_session_user",K4=(n,e,t)=>{const o=new Date;o.setTime(o.getTime()+t*24*60*60*1e3);const r="expires="+o.toUTCString();document.cookie=n+"="+e+";"+r+";path=/;SameSite=Strict"},$4=n=>{const e=n+"=",t=document.cookie.split(";");for(let o=0;o<t.length;o++){let r=t[o];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},JE=n=>{document.cookie=n+"=; Max-Age=-99999999;path=/;"},Q4=()=>{const[n,e]=be.useState(null),[t,o]=be.useState(null),[r,l]=be.useState(!0),[c,d]=be.useState([]),[y,m]=be.useState("reviewer"),[_,E]=be.useState(()=>{const P=localStorage.getItem(YE);return P?JSON.parse(P):[]}),[S,I]=be.useState([]);be.useEffect(()=>{const V=(async()=>{l(!0);const k=f_(Jh(Mn,"users"),Ee=>{const $=Ee.docs.map(ae=>ae.data());d($)}),M=f_(Jh(Mn,"notifications"),Ee=>{const $=Ee.docs.map(ae=>({id:ae.id,...ae.data()}));I($)}),j=$4(Dc);if(j){const Ee=ui(Mn,"users",j),$=await u_(Ee);$.exists()?e($.data()):JE(Dc)}return l(!1),()=>{k(),M()}})();return()=>{V.then(k=>k&&k())}},[]),be.useEffect(()=>{localStorage.setItem(YE,JSON.stringify(_))},[_]);const L=async P=>{const V=ui(Mn,"users",P.email),k=await u_(V);if(k.exists()){const M=k.data();M.password===P.pass?(e(M),K4(Dc,M.email,1)):alert("Credenciales incorrectas o el usuario no existe.")}else alert("Credenciales incorrectas o el usuario no existe.")},G=()=>{e(null),m("reviewer"),o(null),JE(Dc)},O=async(P,V)=>{const k=Math.floor(1e3+Math.random()*9e3).toString(),M={name:P,email:V,password:k,isSuperUser:!1};await c_(ui(Mn,"users",M.email),M)},K=async P=>{window.confirm(`Ests seguro de eliminar al usuario ${P}?`)&&await A1(ui(Mn,"users",P))},ie=async P=>{const V=ui(Mn,"users",P),k=c.find(M=>M.email===P);k&&await vl(V,{isSuperUser:!k.isSuperUser})},Z=P=>{E(V=>[P,...V])},re=(P,V,k)=>{E(M=>M.map(j=>{if(j.pedimentoNumber===P&&j.userName===V){const Ee=k.validations.every(ae=>ae.status==="correct"),$=k.clientOverride||Ee;return{...j,errors:k.validations,isConforme:$,totalSavings:k.totalSavings,totalRisk:k.totalRisk}}return j}))},ue=async(P="El usuario requiere asistencia tcnica inmediata.")=>{if(!n)return;const V={id:ui(Jh(Mn,"notifications")).id,userEmail:n.email,userName:n.name,timestamp:new Date().toISOString(),message:P,status:"pending",chatHistory:[{role:"user",text:P,timestamp:new Date}],auditData:t};await c_(ui(Mn,"notifications",V.id),V)},ce=async(P,V)=>{const k=ui(Mn,"notifications",P);await vl(k,{status:V})},D=(P,V)=>{const k=ui(Mn,"notifications",P);vl(k,{auditData:V})},N=async(P,V)=>{const k={role:"admin",text:V,timestamp:new Date},M=ui(Mn,"notifications",P);await vl(M,{chatHistory:s_(k)})},b=(P,V)=>{const k={role:"user",text:V,timestamp:new Date},M=S.find(j=>j.userEmail===P&&j.status==="in_progress");if(M){const j=ui(Mn,"notifications",M.id);vl(j,{chatHistory:s_(k)})}};return r?R.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:R.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"})}):n?R.jsxs(R.Fragment,{children:[R.jsxs(w1,{user:n,onLogout:G,activeTab:y,setActiveTab:m,children:[y==="reviewer"&&R.jsx(q4,{user:n,onSaveReport:Z,onAuditChange:o,notifications:S}),y==="admin"&&n.isSuperUser&&R.jsx(H4,{users:c,onAddUser:O,onDeleteUser:K,onToggleAdmin:ie,reports:_,notifications:S,onUpdateStatus:ce,onUpdateAuditData:D,onUpdateReport:re,onSendMessage:N}),y==="history"&&n.isSuperUser&&R.jsx(J4,{reports:_})]}),R.jsx(z4,{onContactAdmin:ue,onSendUserSupportMessage:b,notifications:S,currentUserEmail:n.email,currentUserName:n.name})]}):R.jsx(I1,{onLogin:L})},bA=document.getElementById("root");if(!bA)throw new Error("Could not find root element to mount to");const X4=yR.createRoot(bA);X4.render(R.jsx(uR.StrictMode,{children:R.jsx(Q4,{})}));
